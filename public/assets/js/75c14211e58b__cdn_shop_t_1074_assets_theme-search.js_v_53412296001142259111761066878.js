(self.webpackChunkshopify_theme=self.webpackChunkshopify_theme||[]).push([[303],{"13c0b7d1f159687cc785":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var jquery=__webpack_require__("e8596b30a256edf356fc"),jquery_default=__webpack_require__.n(jquery),preact_module=__webpack_require__("1c2804c76a9f261d83ca"),hooks_module=__webpack_require__("62b8c22c623551dccee1"),index_es5=__webpack_require__("348a7a00b20380af1616"),lib=__webpack_require__("16f110138c7b151c65d1");const DataMarket=lib.z.object({main_link:lib.z.string().min(0)}),App=function(){const[url_market]=(0,hooks_module.useState)(()=>{const rawDataMarket=document.getElementById("js-market-subdomain");if(rawDataMarket==null)return"";const result=DataMarket.safeParse(JSON.parse(rawDataMarket.innerText));return result.success?result.data.main_link:(console.error("Market subdomain cannot be parsed",result.error),"")}),[tooltip,setTooltip]=(0,hooks_module.useState)(""),[articlesResults,setArticlesResults]=(0,hooks_module.useState)([]),[productsResults,setProductsResults]=(0,hooks_module.useState)([]),[sesrchInput,setSearchInput]=(0,hooks_module.useState)(void 0);return(0,hooks_module.useEffect)(()=>{const defaultBlock=document.getElementById("js-search-default"),tooltipBlock=document.getElementById("js-search-tooltip"),searchBlock=document.getElementById("js-search-feed"),suggestionsBlock=document.getElementById("js-search-suggestions"),onInput=e=>{(async function(e2){const elem=e2.target;if(!(elem instanceof HTMLInputElement))return null;if(elem.value===""&&(tooltipBlock!==null&&(tooltipBlock.innerHTML=""),defaultBlock!==null&&(defaultBlock.style.display="grid"),searchBlock!==null&&(searchBlock.style.display="none"),suggestionsBlock!==null&&(suggestionsBlock.style.display="block")),elem&&elem.value){setSearchInput(elem.value);const response=await async function(query){const data=await fetch(`https://www.rhodeskin.com/search/suggest.json?q=${query}&resources[type]=product,article&resources[options][fields]=body,tag,title,product_type,variants.title,vendor,author`),results=await data.json();return[results.resources.results.products,results.resources.results.articles]}(elem.value);setProductsResults(response[0]),setArticlesResults(response[1])}})(e).catch(err=>{console.error(err)})},searchInput=document.querySelector(".js-search-input");return searchInput?.addEventListener("input",onInput,!1),()=>{searchInput?.removeEventListener("input",onInput,!1)}},[]),(0,hooks_module.useEffect)(()=>{const defaultBlock=document.getElementById("js-search-default"),tooltipBlock=document.getElementById("js-search-tooltip"),searchBlock=document.getElementById("js-search-feed"),suggestionsBlock=document.getElementById("js-search-suggestions");if(articlesResults?.length>0||productsResults?.length>0?(defaultBlock!==null&&(defaultBlock.style.display="none"),searchBlock!==null&&(searchBlock.style.display="block"),suggestionsBlock!==null&&(suggestionsBlock.style.display="none")):(defaultBlock!==null&&(defaultBlock.style.display="grid"),searchBlock!==null&&(searchBlock.style.display="none"),suggestionsBlock!==null&&(suggestionsBlock.style.display="block")),sesrchInput!==void 0&&productsResults.length===0&&articlesResults.length===0&&setTooltip("No results for '"+sesrchInput+"'"),productsResults.length>0||articlesResults.length>0){const resultNo=articlesResults.length+productsResults.length;setTooltip(resultNo+(resultNo===1?" result":" results")+" for '"+sesrchInput+"'")}tooltipBlock!==null&&(tooltipBlock.innerHTML=tooltip)},[articlesResults,productsResults,sesrchInput,tooltip]),(0,preact_module.h)("div",{className:"SearchMini-feedContent"},[(productsResults||[]).map(product=>(0,preact_module.h)("div",{className:"SearchMini-feedProduct"},[(0,preact_module.h)("a",{className:"SearchMini-feedItem u-animate-underline gtm-search-result-product",href:url_market!=="/"?url_market+product.url:""+product.url},(0,preact_module.h)("div",{className:"SearchMini-feedItem-ImagePlaceHolder o-placeholder",style:{backgroundImage:`url('${product.image}')`}}),(0,preact_module.h)("div",{className:"SearchMini-content"},[(0,preact_module.h)("div",{className:"SearchMini-feedItemName"},[(0,preact_module.h)("span",{},product.title)])]))])),function(){if(articlesResults!==void 0&&articlesResults.length>0)return(0,preact_module.h)("div",{className:"SearchMini-feedHeader"},"Vlog")}(),(articlesResults||[]).map(article=>(0,preact_module.h)("div",{className:"SearchMini-articleSlot"},[(0,preact_module.h)("a",{className:"SearchMini-articleTitle u-animate-underline gtm-search-result-article",href:url_market!=="/"?url_market+article.url:""+article.url},[(0,preact_module.h)("span",{},article.title)]),(0,preact_module.h)("div",{className:"SearchMini-articleBody"},(0,index_es5.parse)(article.body))]))])};(async function(){const container=jquery_default()(".js-search-feed");if(container.length===0)throw new Error("Search container element is missing [5c20cd67c23b4b9cabc32faaaafad3b6]");const target=container.get(0);if(!target)throw new Error("Search container element is missing [ff8f3209b45f4845acdd8d79f5f1cada]");(0,preact_module.render)((0,preact_module.h)(App,null),target)})().catch(function(err){console.error(err)})},"348a7a00b20380af1616":function(module,__unused_webpack_exports,__webpack_require__){module.exports=function(){"use strict";var e={611:function(e2,t2){var n2,e3,r2=this&&this.__assign||function(){return(r2=Object.assign||function(e32){for(var t3,n3=1,r3=arguments.length;n3<r3;n3++)for(var a2 in t3=arguments[n3])Object.prototype.hasOwnProperty.call(t3,a2)&&(e32[a2]=t3[a2]);return e32}).apply(this,arguments)};Object.defineProperty(t2,"__esModule",{value:!0}),t2.isIgnored=t2.isBlockText=t2.createRange=t2.createText=t2.createElement=t2.frameflag=t2.closedByClosing=t2.closedByOpening=t2.blockTextElements=t2.selfClosingTags=t2.attrRegex=t2.htmlRegex=t2.NodeType=void 0,(e3=n2||(n2={}))[e3.Element=1]="Element",e3[e3.Text=3]="Text",t2.NodeType=n2,t2.htmlRegex=/<!--[\s\S]*?-->|<(\/?)([a-zA-Z][-.:0-9_a-zA-Z]*)((?:\s+[^>]*?(?:(?:'[^']*')|(?:"[^"]*"))?)*)\s*(\/?)>/g,t2.attrRegex=/(\S+)\s*=\s*(\"?)([^"]*)(\2|\s|$)/gi,t2.frameflag="documentfragmentcontainer",t2.selfClosingTags=["area","base","br","col","hr","img","input","link","meta","source","embed","param","track","wbr"];var o=["script","noscript","style","pre"];function i(e32){var t3=e32.nodeName,a2=t3===void 0?e32.tagName:t3,o2={nodeName:"BODY",nodeType:n2.Element,tagName:"body",tagRange:[],attributes:[],childNodes:[]};return e32&&(o2=r2(r2(r2({},o2),e32),{nodeName:a2})),o2}t2.blockTextElements=o,t2.closedByOpening={li:{li:!0},p:{p:!0,div:!0},b:{div:!0},td:{td:!0,th:!0},th:{td:!0,th:!0},h1:{h1:!0},h2:{h2:!0},h3:{h3:!0},h4:{h4:!0},h5:{h5:!0},h6:{h6:!0}},t2.closedByClosing={li:{ul:!0,ol:!0},a:{div:!0},b:{div:!0},i:{div:!0},p:{div:!0},td:{tr:!0,table:!0},th:{tr:!0,table:!0}},t2.createElement=i,t2.createText=function(e32,t3){return i({nodeType:n2.Text,textContent:e32,nodeName:"#text",tagName:void 0,tagRange:t3})},t2.createRange=function(e32,t3){return[e32-25+2,t3-25+2]},t2.isBlockText=function(e32){return o.map(function(e4){return new RegExp("^"+e4+"$","i")}).some(function(t3){return t3.test(e32)})},t2.isIgnored=function(e32){return o.map(function(e4){return new RegExp("^"+e4+"$","i")}).some(function(t3){return t3.test(e32)})}},49:function(e2,t2,n2){Object.defineProperty(t2,"__esModule",{value:!0}),t2.parseString=t2.parseHtml=void 0;var r2=n2(611);function a(e3){for(var t3=[],n3=void 0;n3=r2.attrRegex.exec(e3);){var a2=n3[1],o2=n3[3],i=o2[0]==="'"||o2[0]==='"',l={name:a2.toLowerCase(),value:i?o2.slice(1,o2.length-1):o2};t3.push(l)}return t3}function o(e3){return e3?.replace(/\r?\n|\r/g,"").replace(/\s{2,}/g," ")||null}t2.parseHtml=function(e3){for(var t3,n3=r2.createElement({tagName:"body",tagRange:[0,e3.length]}),i=[n3],l=-1,s=void 0,c=e3.length;t3=r2.htmlRegex.exec(e3);){var d=t3[0],g=t3[3],u=t3[4],p=t3[1],f=t3[2];f=f.toLowerCase();var h=d.length,m=r2.htmlRegex.lastIndex-h,v=r2.htmlRegex.lastIndex,x=r2.selfClosingTags.includes(f);if(l>-1&&l+h<v){var y=o(e3.substring(l,m));y&&n3.childNodes.push(r2.createText(y,r2.createRange(m,v)))}if(l=r2.htmlRegex.lastIndex,!p){var b=a(g),R=n3.tagName;!u&&r2.closedByOpening[R]&&r2.closedByOpening[R][f]&&(i.pop(),n3=i[i.length-1]),f==="a"&&(s!==void 0&&(i.splice(s),n3=i[i.length-1]),s=i.length);var T=r2.htmlRegex.lastIndex,N=T-h,O=r2.createElement({tagName:f,nodeType:1,attributes:b,tagRange:r2.createRange(N,T)});if(n3.childNodes.push(O),n3=O,i.push(n3),r2.isBlockText(f)){var C="</"+f+">",E=f?e3.toLocaleLowerCase().indexOf(C,r2.htmlRegex.lastIndex):e3.indexOf(C,r2.htmlRegex.lastIndex),B=E===-1?c:E;if(r2.isIgnored(f)){var w=e3.substring(T,B).replace(/^\s+|\s+$/g,"");w.length>0&&/\S/.test(w)&&n3.childNodes.push(r2.createText(w,r2.createRange(N,T)))}E===-1?l=r2.htmlRegex.lastIndex=e3.length+1:(l=r2.htmlRegex.lastIndex=E+C.length,p="/")}}if(p||u||x)for(;;){if(f==="a"&&(s=void 0),n3.tagName===f){n3.tagRange[1]=r2.createRange(-1,Math.max(l,v))[1],i.pop(),n3=i[i.length-1];break}if(R=n3.tagName,!r2.closedByClosing[R]||!r2.closedByClosing[R][f])break;i.pop(),n3=i[i.length-1]}}return i},t2.parseString=o},642:function(e2){e2.exports=__webpack_require__("1c2804c76a9f261d83ca")}},t={};function n(r2){var a=t[r2];if(a!==void 0)return a.exports;var o=t[r2]={exports:{}};return e[r2].call(o.exports,o,o.exports,n),o.exports}var r={};return function(){var e2=r;Object.defineProperty(e2,"__esModule",{value:!0}),e2.parse=void 0;var t2=n(642),a=n(611),o=n(49);function i(e3){var n2=e3.children,r2=n2===void 0?[]:n2;return t2.h(t2.Fragment,{},r2)}function l(e3){var n2=this;if(e3.nodeType===a.NodeType.Text)return o.parseString(e3.textContent);if(e3.nodeType!==a.NodeType.Element)return null;var r2=String(e3.nodeName).toLowerCase(),s=Array.from(e3.childNodes),c=function(){return s.map(function(e4){return l.call(n2,e4)})},d=function(e4){var t3={};if(!e4?.length)return t3;for(var n3=e4.length-1;n3>=0;n3--){var r3=e4[n3];t3[r3.name]=r3.value}return t3}(e3.attributes);return r2==="script"?null:r2==="body"?t2.h(i,{},c()):t2.h(r2,d,c())}e2.parse=function(e3){var t3,n2=`<!DOCTYPE html>
<html><body>`+e3+"</body></html>";if(typeof window>"u")return l(o.parseHtml(e3)[0]);try{t3=new DOMParser().parseFromString(n2,"text/html")}catch{}return t3?l(t3.body):void 0}}(),r}()}},__webpack_require__=>{__webpack_require__.O(0,[351,945,932],()=>__webpack_require__(__webpack_require__.s="13c0b7d1f159687cc785")),__webpack_require__.O()}]);
//# sourceMappingURL=/cdn/shop/t/1074/assets/theme-search.js.map?v=53412296001142259111761066878
