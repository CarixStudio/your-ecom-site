(()=>{(function(){let{proxy:J,integration:K,utils:X,customize:Z,shopifyFunc:$,storefront:Y}=window.FGSECOMAPP?.helper||{};FGSECOMAPP.variables={...FGSECOMAPP.variables,conditions:{collections:!1,locations:!1,function:!1,shipping:!1},scaHandleConfigValue:{...Shopify?.scaHandleConfigValue},isCheckout:!1,isCartPage:window.location.href.includes("/cart"),paymentsConfig:null,failedParseArrOffersAdded:!1,secomappGetCartRunning:!1,fgCallback:[],scaCountRenderEventCheckout:0,checkIsBlockCheckout:!1,hasDoneProcessCheckout:!1,giftIds:[],gifts:{originalProducts:[],clonedProducts:[],offers_shipping:[]},giftIdsFunction:[],maxOfferPriority:null,maxTodayOfferPriority:null,sections_cart:{},bogos_other_discounts:[],bogos_shipping_discounts:[]},FGSECOMAPP.CUSTOM_EVENTS={...FGSECOMAPP.CUSTOM_EVENTS,RERENDER_GIFT_SLIDER:"bogos:glider",SHOW_GIFT_SLIDER:"fg-gifts:show-slider",PRODUCT_HAS_GIFTS:"fg-gifts:gift-icon",GIFT_UPDATED:"fg-gifts:updated",GIFT_ADDED:"fg-gifts:added",CART_AUTO_UPDATED:"fg-cart:auto-updated",START_PROCESS_CART:"fg-cart:start-process",END_PROCESS_CART:"fg-cart:end-process",START_VALIDATE_CHECKOUT:"fg-checkout:start",END_VALIDATE_CHECKOUT:"fg-checkout:end",START_RENDER_APP:"fg-app:start",END_RENDER_APP:"fg-app:end",FG_OVERRIDE_FETCH:"fg-fetch:override",FG_OVERRIDE_XHR_OPEN:"fg-xhr:open",FG_OVERRIDE_XHR_SEND:"fg-xhr:send",RENDER_TODAY_OFFER:"fg-today-offer:render",TODAY_OFFER_CHANGE:"fg-today-offer:success",RENDER_CART_MESSAGE:"fg-messages:render",BOGOS_FG_PROCESS:"bogos:gifts",BOGOS_FG_INIT:"bogos:gifts-init",BOGOS_FG_CART_MESSAGE:"bogos:message",BOGOS_FG_START:"bogos:gifts-start"},FGSECOMAPP.helper.scaCustomLoadingCheckout=Shopify?.scaCustomLoadingCheckout??void 0;let R=FGSECOMAPP.variables.RATE_PRICE??100,H={cart:new RegExp(/(\/cart\/(add|change|update|clear)(\.js)?)/g),render_cart:new RegExp(/(\/cart\/(add|change|update|clear)(\.js)?(.*)(sca_reload_cart))/g),proxy:new RegExp(`/(${SECOMAPP.freegiftProxy})/g`),graphql:new RegExp(/(cartLinesRemove|cartLinesUpdate|cartLinesAdd)/g)},A={OFFER_TYPE:{cloned:"cloned",function:"function",gift_func:"gift"},APP_REVIEW_OPTION:{bundle:"bundle",gift_slider:"gift_slider"},APP_REVIEW:{judgeme:"judgeme",trustoo:"trustoo"},CUSTOM_OPTIONS:{equal:"equal_to",not_equal:"not_equal_to",contains:"contains",not_contains:"not_contains"},NARROW_TYPE:{product:"variants_ids",product_types:"product_types",product_vendors:"product_vendors",collection:"product_collections"},DISCOUNT_TYPE:{percentage:"percentage",fixed_amount:"fixed_amount",fixed_price:"fixed_price",free_products:"free_products",cheapest_free:"cheapest_free",shipping:"shipping_discount"},SYNC_QUANTITY:{stop_offer:"stop_offer"},OBJECT_TYPE:{product:"product",variant:"variant"}};A.TRIGGER_FUNC={[A.OFFER_TYPE.gift_func]:"GF"};let E={GIFTS_CART_SECTION_ID:"#sca_fg_cart_section_gifts_slider",GIFTS_CART_SECTION:`<div class="slide-container">
                <div class="fg-section-title">
                    {{ fg_slider_title }}
                </div>
                <div class="glider-contain">
                    <div class="glider bogos-gift-items" id="fg-gift-items"></div>
                    <div>
                        <button type="button" aria-label="Previous" class="glider-prev nav left-nav btn-nav-slide">\u276E</button>
                    </div>
                    <div>
                        <button type="button" aria-label="Next" class="glider-next nav right-nav btn-nav-slide">\u276F</button>
                    </div>
                </div>
                <div role="tablist" class="dots"></div>
            
                {{ sca_fg_disable_slider_section }}
            </div>`,GIFTS_CART_SECTION_V2_ID:"#bogos_cart_section_gifts_slider",GIFTS_CART_SECTION_V2:`<div class="bogos-gifts-slider-container">
                <div class="bogos-gifts-slider-header">
                    <div class="bogos-slider-header-info">
                        <div class="bogos-slider-info-title">
                            {{fg_slider_title}}
                        </div>
                        <div class="bogos-slider-info-subtitle {{ bogos_check_show_offer_available }}">
                            {{bogos_slider_offer_available}}
                        </div>
                    </div>
                </div>
                <div class="bogos-slider-offers-container">
                </div>
                {{bogos_brand_mark}}
            </div>`,GIFTS_POPUP_SECTION_ID:"#sca_fg_section_gifts_popup",GIFTS_POPUP_SECTION:`<div class="slide-container sca-modal-dialog-fg">
                <button class="sca-close-modal-fg btn" type="button" aria-label="close modal" data-close>\u2715</button>
                <div class="fg-section-title">
                    {{ fg_slider_title }}
                </div>
                <div class="glider-contain">
                    <div class="glider bogos-gift-items" id="fg-gift-items"></div>
                    <div>
                        <button type="button" aria-label="Previous" class="glider-prev nav left-nav btn-nav-slide">\u276E</button>
                    </div>
                    <div>
                        <button type="button" aria-label="Next" class="glider-next nav right-nav btn-nav-slide">\u276F</button>
                    </div>
                </div>
                <div role="tablist" class="dots"></div>
            
                {{ sca_fg_disable_slider_section }}
            </div>`,GIFTS_POPUP_SECTION_V2_ID:"#bogos_section_gifts_popup",GIFTS_POPUP_SECTION_V2:`<div class="bogos-gifts-slider-container bogos-gift-slider-modal">
                <div class="bogos-gifts-slider-header">
                    <div class="bogos-slider-header-info">
                        <div class="bogos-slider-info-title">
                            {{fg_slider_title}}
                        </div>
                        <div class="bogos-slider-info-subtitle {{ bogos_check_show_offer_available }}">
                            {{bogos_slider_offer_available}}
                        </div>
                    </div>
                    <button type="button" class="bogos-slider-close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="11" viewBox="0 0 12 11" fill="none">
                           <path d="M9.96967 10.2803C10.2626 10.5732 10.7374 10.5732 11.0303 10.2803C11.3232 9.98744 11.3232 9.51256 11.0303 9.21967L7.06066 5.25L11.0303 1.28033C11.3232 0.987437 11.3232 0.512564 11.0303 0.21967C10.7374 -0.0732229 10.2626 -0.0732229 9.96967 0.21967L6 4.18934L2.03033 0.21967C1.73744 -0.0732233 1.26256 -0.0732233 0.96967 0.21967C0.676777 0.512563 0.676777 0.987437 0.96967 1.28033L4.93934 5.25L0.96967 9.21967C0.676777 9.51256 0.676777 9.98744 0.96967 10.2803C1.26256 10.5732 1.73744 10.5732 2.03033 10.2803L6 6.31066L9.96967 10.2803Z" fill="#8A8A8A"/>
                        </svg>
                    </button>
                </div>
                <div class="bogos-slider-offers-container">
                </div>
                {{bogos_brand_mark}}
            </div>`,GIFT_OFFER_SECTION_ID:"#bogos_section_slider_offer",GIFT_OFFER_SECTION:`<div class="bogos-slider-offer" data-offer="{{ bogos_offer_id }}">
                <div class="bogos-slider-offer-title {{ bogos_check_offer_title }}">
                    {{ bogos_offer_title }}
                </div>
                <div class="bogos-slider-offer-badge-container {{ check_show_number_gift_available }}">
                    <div class="bogos-slider-offer-badge {{ check_show_number_gift_available_type }}">
                    
                          <span class="bogos-badge-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="14" viewBox="0 0 12 14" fill="none">
                              <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M4.5 0C3.4801 0 2.6385 0.763422 2.51547 1.75H2.25C1.00736 1.75 0 2.75736 0 4V11.75C0 12.9926 1.00736 14 2.25 14H9.75C10.9926 14 12 12.9926 12 11.75V4C12 2.75736 10.9926 1.75 9.75 1.75H9.48453C9.3615 0.763422 8.5199 0 7.5 0H4.5ZM7.5 1.5H4.5C4.22386 1.5 4 1.72386 4 2V3C4 3.27614 4.22386 3.5 4.5 3.5H7.5C7.77614 3.5 8 3.27614 8 3V2C8 1.72386 7.77614 1.5 7.5 1.5ZM9.28033 7.28033C9.57322 6.98744 9.57322 6.51256 9.28033 6.21967C8.98744 5.92678 8.51256 5.92678 8.21967 6.21967L5.25 9.18934L4.03033 7.96967C3.73744 7.67678 3.26256 7.67678 2.96967 7.96967C2.67678 8.26256 2.67678 8.73744 2.96967 9.03033L4.71967 10.7803C5.01256 11.0732 5.48744 11.0732 5.78033 10.7803L9.28033 7.28033Z"
                                    fill="#29845A"/>
                            </svg>
                          </span>
                        <span class="bogos-badge-title">
                            {{ bogos_number_gift_available }}
                          </span>
                    </div>
                </div>
                <div class="glider-contain">
                    <div class="glider bogos-offer-gift-items-container" id="fg-gift-items"></div>
                    <div>
                        <button type="button" aria-label="Previous" class="glider-prev nav left-nav btn-nav-slide">\u276E</button>
                    </div>
                    <div>
                        <button type="button" aria-label="Next" class="glider-next nav right-nav btn-nav-slide">\u276F</button>
                    </div>
                </div>
                <div role="tablist" class="dots"></div>
                {{ sca_fg_disable_slider_section }}
            </div>`,GIFT_ITEM_SECTION_ID:"#sca_fg_section_gift_item",GIFT_ITEM_SECTION:`<div class="d-flex product-item">
                <div class="product-content">
                    <div class="top-content">
                        <a class="gift-original-url" href="{{ fg_product_handle }}" target="_blank">
                            <img loading="lazy" class="product-item-thumbnail" src="{{ fg_product_img }}" alt="{{ fg_product_img_alt }}">
                            <p class="product-title">{{ fg_product_title }}</p>
                            <p class="product-title variant-title {{ fg_gifts_check_show_by_variants }}">
                                <span class="selected-variant {{ fg_check_selected_variant }}">
                                    {{ fg_variant_title }}
                                </span>
                            </p>
                        </a>
                    </div>
                    {{ bogos_integration_judgeme }}
                    {{ bogos_integration_trustoo }}
                    <div class="d-flex bottom-content">
                        <div class="d-flex price-section">
                            <span class="original-price transcy-money">
                                <del>{{ fg_original_price }}</del>
                            </span>
                            <span class="gift-price transcy-money">{{ fg_gift_price }}</span>
                        </div>
            
                        <div class="dropdown {{ fg_gifts_check_show_by_products }}">
                            <div class="select">
                                <span class="selected-variant {{ fg_check_selected_variant }}">
                                    {{ fg_variant_title }}
                                </span>
                                <i class="fa fa-chevron-left"></i>
                            </div>
                            <ul class="dropdown-menu">
                                {{ sca_fg_variant_select_section }}
                            </ul>
                        </div>
            
                        <button type="button" class="btn-add-to-cart" data-offer="{{ fg_product_belongs_to_offer }}" data-variant="{{ fg_variant_id }}">
                            {{ fg_add_to_cart }}
                        </button>
                    </div>
                </div>
            </div>`,GIFT_ITEM_SECTION_V2_ID:"#bogos_section_gift_item",GIFT_ITEM_SECTION_V2:` <div class="bogos-offer-gift-item">
                <div class="bogos-gift-item-top-info">
                    <div class="bogos-gift-item-image-container">
                        <a class="gift-original-url" href="{{ fg_product_handle }}" target="_blank">
                            <img loading="lazy" class="bogos-gift-item-image" src="{{ fg_product_img }}" alt="{{ fg_product_img_alt }}">
                        </a>
                    </div>
                    <a class="gift-original-url" href="{{ fg_product_handle }}" target="_blank">
                        <div class="bogos-gift-item-title">
                            <div class="bogos-gift-product-title">
                                {{ fg_product_title }}
                            </div>
                        </div>
                    </a>
                </div>
                <div class="bogos-gift-item-bottom-info">
                    <div class="bogos-gift-select-variant-wrapper {{bogos_check_show_select_variant}}">
                          <div class="bogos-gift-select-variant-dropdown">
                          <div class="bogos-gift-select-variant-title-contain">
                            <span class="bogos-gift-select-variant-title">{{ bogos_default_select_variant_title }}</span>
                          </div>
                            <ul class="bogos-gift-select-variant-options">
                               {{ sca_fg_variant_select_section }}
                            </ul>
                          </div>
                    </div>
                            
                    <span class="bogos-gift-variant-title {{ fg_gifts_check_show_by_variants }}">
                      {{ fg_variant_title }}
                    </span>
                    {{ bogos_integration_judgeme }}
                    {{ bogos_integration_trustoo }}
                
                    <div class="bogos-gift-item-price-container">
                          <span class="bogos-gift-item-price">
                            {{ fg_gift_price }}
                          </span>
                        <span class="bogos-gift-item-compare-price">
                            {{ fg_original_price }}
                          </span>
                    </div>
                    <div class="bogos-gift-item-add-container">
                    <div class="bogos-gift-item-quantity-wrapper {{bogos_check_show_quantity_box}}">
                      <div class="bogos-gift-item-quantity-dropdown">
                        <input class="bogos-gift-item-quantity-input" type="text" value="1" min="1" max="{{ bogos_number_max_gifts }}" readonly />
                        <ul class="bogos-gift-item-quantity-options">
                          {{ bogos_gift_quantity_options }}
                        </ul>
                      </div>
                    </div>
                    <button type="button" class="bogos-gift-item-add-btn btn-add-to-cart" data-offer="{{ fg_product_belongs_to_offer }}" data-variant="{{ fg_variant_id }}">
                          {{ fg_add_to_cart }}
                     </button>
                    </div>
                </div>
            </div>`,GIFT_SELECT_SECTION_ID:"#sca_fg_variant_select_section",GIFT_SELECT_SECTION:`<li class="bogos-gift-select-variant-option" data-img="{{ fg_variant_img }}" id="{{ fg_variant_id }}" data-original-id="{{ fg_original_variant_id }}" data-price="{{ fg_variant_price }}" data-original-price="{{ fg_original_variant_price }}">
                {{ fg_variant_title }}
            </li>`,GIFT_SELECT_SECTION_V2_ID:"#bogos_variant_select_section",GIFT_SELECT_SECTION_V2:`<li class="bogos-gift-select-variant-option" data-img="{{ fg_variant_img }}" data-variant-id="{{ fg_variant_id }}" data-original-id="{{ fg_original_variant_id }}" data-price="{{ fg_variant_price }}" data-original-price="{{ fg_original_variant_price }}">
                {{ fg_variant_title }}
            </li>`,DISABLE_SLIDER_SECTION_ID:"#sca_fg_disable_slider_section",DISABLE_SLIDER_SECTION:`<div id="sca-hidden-gift-popup" class="bogos-slider-offer-switch-show">
                 <label class="switch">
                    <input type="checkbox" id="sca-disable-checkbox" class="sca-disable-checkbox" name="sca-disable-checkbox">
                    <span class="slider"></span>
                 </label>
                 <span class="bogos-offer-switch-title">
                    {{ fg_text_disable_slider }}
                 </span>
            </div>`,CART_MSG_SECTION_ID:"#sca_fg_cart_message_section",CART_MSG_SECTION:`<div id="sca-promotion-glider" class="glider sca-promotion-glider">
                {{ sca_fg_cart_message_items_section }}
            </div>`,CART_MSG_ITEM_SECTION_ID:"#sca_fg_cart_message_items_section",CART_MSG_ITEM_SECTION:`<p class="content-promotion-message">
                {{ fg_cart_message }}
            </p>`,OLD_GIFT_THUMBNAIL_SECTION_ID:"#sca_fg_gift_thumbnail_section",OLD_GIFT_THUMBNAIL_SECTION:`<div class="sca-gift-thumbnail-title">{{ fg_gift_thumbnail_title }}</div>

            <div class="slide-container" id="fg-gift-thumbnail-title">
                <div class="glider-contain">
                    <div class="glider sca-list-gift-thumbnail">
                        {{ sca_fg_gift_thumbnail_items_section }}
                    </div>
            
                    <div class="{{ fg_check_show_narrow }}">
                        <span aria-label="Previous" class="glider-prev nav left-nav btn-nav-slide">\xAB</span>
                        <span aria-label="Next" class="glider-next nav right-nav btn-nav-slide">\xBB</span>
                    </div>
                    <div role="tablist" class="dots-thumbnail"></div>
                </div>
            </div>`,OLD_GIFT_THUMBNAIL_ITEMS_SECTION_ID:"#sca_fg_gift_thumbnail_items_section",OLD_GIFT_THUMBNAIL_ITEMS_SECTION:`<div class="d-flex product-item">
                <a class="gift-original-url" href="{{ fg_product_handle }}" target="_blank">
                    <img loading="lazy" class="product-item-thumbnail sca-gift-image" src="{{ fg_product_img }}" 
                        data-type="{{ fg_offer_type }}" alt="{{ fg_product_img_alt }}"
                    >
                </a>
            </div>`,GIFT_THUMBNAIL_SECTION_ID:"#sca_new_fg_gift_thumbnail_section",GIFT_THUMBNAIL_SECTION:'<div class="fg-gift-thumbnail-container">{{ fg_gift_thumbnail_section }}</div>',GIFT_THUMBNAIL_ITEMS_SECTION_ID:"#sca_new_fg_gift_thumbnail_items_section",GIFT_THUMBNAIL_ITEMS_SECTION:`<div class="fg-gift-thumbnail-offer" data-fg-offer-id="{{ fg_offer_id }}">
                <div class="fg-gift-thumbnail-offer-header">
                    <div class="fg-gift-thumbnail-offer-time">
                        <div class="fg-gift-thumbnail-offer-time-title">{{ fg_offer_time_title }}</div>
                        <div class="fg-gift-thumbnail-offer-time-detail">{{ fg_offer_time_detail }}</div>
                    </div>
                    <div class="fg-gift-thumbnail-offer-title">{{ fg_offer_title }}</div>
                </div>
                <div class="fg-gift-thumbnail-offer-body">
                     <div class="glider-contain">
                        <div class="glider fg-gift-thumbnail-offer-slider">{{ fg_offer_body }}</div>
                    </div>
                </div>
                <div class="fg-gift-thumbnail-offer-footer">
                    <div class="fg-gift-thumbnail-offer-footer-quantity">{{ fg_offer_footer_total }}</div>
                    <div class="fg-gift-thumbnail-offer-footer-action">
                        <div class="fg-gift-thumbnail-btn glider-prev"></div>
                        <div class="fg-gift-thumbnail-btn glider-next"></div>
                  </div>
                </div>
            </div>`,GIFT_THUMBNAIL_SUB_ITEMS_SECTION_ID:"#sca_new_fg_gift_thumbnail_sub_items_section",GIFT_THUMBNAIL_SUB_ITEMS_SECTION:`<div class="d-flex product-item">
                <a class="gift-original-url" href="{{ fg_product_handle }}" target="_blank">
                    <img loading="lazy" class="product-item-thumbnail fg-gift-image" src="{{ fg_product_img }}" 
                        data-type="{{ fg_offer_type }}" alt="{{ fg_product_img_alt }}"
                    >
                </a>
            </div>`,GIFT_THUMBNAIL_ITEMS_EXPIRED:`<div class="fg-gift-thumbnail-time-element day">{{ fg_time_day }}</div>
             <div class="fg-gift-time-extra">:</div>
             <div class="fg-gift-thumbnail-time-element hour">{{ fg_time_hour }}</div>
             <div class="fg-gift-time-extra">:</div>
             <div class="fg-gift-thumbnail-time-element minutes">{{ fg_time_minutes }}</div>
             <div class="fg-gift-time-extra">:</div>
             <div class="fg-gift-thumbnail-time-element second">{{ fg_time_second }}</div>`,GIFT_ICON_SECTION_ID:"#sca_fg_gift_icon_section",GIFT_ICON_SECTION:'<img loading="lazy" src="{{ fg_gift_icon }}" alt="{{ fg_gift_icon_alt }}" class="{{ fg_class_product_or_collection_page }}" />',TODAY_OFFER_SECTION_ID:"#sca_fg_today_offer_section",TODAY_OFFER_SECTION:`<div id="sca-today-offer-wrap" class="bogos-today-offer-v2">
                <div class="sca-fg-header">
                    <div class="sca-fg-header-title">
                        <span class="sca-fg-today-offer-title">{{ sca_fg_today_offer_title }}</span>
                        <span class="sca-fg-close-today-offer" aria-label="close" data-close>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#5e5873" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </span>
                    </div>
                    <span class="sca-fg-today-offer-subtitle">{{ sca_fg_today_offer_subtitle }}</span>
                </div>
            
                <div class="sca-fg-body">
                    <div class="sca-fg-offers"></div>
                </div>
            
                <div class="sca-fg-footer">
                    {{ sca_fg_today_offer_footer }}
                </div>
            </div>`,TODAY_OFFER_ITEM_SECTION_ID:"#sca_fg_today_offer_item_section",TODAY_OFFER_ITEM_SECTION:`<div class="sca-fg-offer {{sca_fg_offer_detail}}" data-fg-offer-id="{{ sca_fg_offer_id }}">
               <div class="sca-offer-header-container">
                  {{ bogos_today_offer_header }}
               </div>
               <div class="sca-offer-gift-products {{ check_show_gift_product }}">
                  {{ bogos_today_offer_gift_products }}
               </div>
               <span class="sca-offer-more-gift-products {{ check_show_more_product }}" data-bogos-offer-id="{{ sca_bogos_offer_id }}">
               {{ bogos_more_gift_product }}
               </span>
            </div>`,TODAY_OFFER_ITEM_HEADER_SECTION_ID:"#bogos_today_offer_item_header_section",TODAY_OFFER_ITEM_HEADER_SECTION:`<div class="sca-offer-info">
               <span class="sca-fg-icon-success sca-hide">
                  <svg class="sca-fg-icon-success-anim" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                     <circle class="sca-fg-icon-success-circle" cx="26" cy="26" r="25" fill="none"></circle>
                     <path class="sca-fg-icon-success-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"></path>
                  </svg>
               </span>
               <span class="sca-fg-icon-back-offer-detail">
                  <svg xmlns="http://www.w3.org/2000/svg" width="6" height="10" viewBox="0 0 6 10" fill="none">
                     <path fill-rule="evenodd" clip-rule="evenodd" d="M5.78033 0.46967C6.07322 0.762563 6.07322 1.23744 5.78033 1.53033L2.31066 5L5.78033 8.46967C6.07322 8.76256 6.07322 9.23744 5.78033 9.53033C5.48744 9.82322 5.01256 9.82322 4.71967 9.53033L0.719669 5.53033C0.426776 5.23744 0.426777 4.76256 0.719669 4.46967L4.71967 0.46967C5.01256 0.176777 5.48744 0.176777 5.78033 0.46967Z" fill="#8A8A8A"/>
                  </svg>
               </span>
               <div class="sca-offer-title-container">
                  <b class="sca-offer-title" data-sca-fg-today-offer-title-tooltip="{{ sca_fg_offer_title_tooltip }}" style="cursor: default">
                    {{ sca_fg_offer_title }}
                  </b>
                  <span class="sca-offer-subtitle {{ check_show_gift_notification }}">
                    {{ sca_fg_offer_subtitle }}
                  </span>
               </div>
            </div>
            <a href="{{ bogos_today_offer_link }}" class="{{ check_show_btn_redirect }} sca-today-offer-link">
               <div class="sca-offer-redirect-btn">{{ bogos_offer_link_title }}</div>
            </a>`,TODAY_OFFER_ITEM_HEADER_WITH_IMG_SECTION_ID:"#bogos_today_offer_item_header_with_img_section",TODAY_OFFER_ITEM_HEADER_WITH_IMG_SECTION:`<div class="sca-offer-info">
               <img loading="lazy" class="sca-img-offer" width="50" height="50" src="{{ sca_fg_offer_img }}" alt="">
               <div class="sca-offer-title-container">
                  <b class="sca-offer-title" data-sca-fg-today-offer-title-tooltip="{{ sca_fg_offer_title_tooltip }}" style="cursor: default">
                  {{ sca_fg_offer_title }}
                  </b>
                  <span class="sca-offer-subtitle {{ check_show_gift_notification }}">
                  {{ sca_fg_offer_subtitle }}
                  </span>
               </div>
            </div>
            <span class="sca-fg-icon-success sca-hide">
               <svg class="sca-fg-icon-success-anim" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                  <circle class="sca-fg-icon-success-circle" cx="26" cy="26" r="25" fill="none"></circle>
                  <path class="sca-fg-icon-success-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"></path>
               </svg>
            </span>
            <a href="{{ bogos_today_offer_link }}" class="{{ check_show_btn_redirect }} sca-today-offer-link">
               <div class="sca-offer-redirect-btn">{{ bogos_offer_link_title }}</div>
            </a>`,TODAY_OFFER_GIFT_PRODUCT_ID:"#bogos_today_offer_gift_product",TODAY_OFFER_GIFT_PRODUCT:`<div class="sca-gift-product">
               <img loading="lazy" class="sca-gift-product-img" src="{{ bogos_today_offer_gift_img }}" alt="{{ bogos_today_offer_gift_name }}">
               <div class="sca-gift-product-info">
                  <div class="sca-gift-product-title">
                     {{ bogos_today_offer_gift_name }}
                  </div>
                  <div class="sca-gift-variant-title {{ check_show_variant_name }}">
                     {{ bogos_today_offer_gift_variant_name }}
                  </div>
                  <div class="sca-gift-product-price">
                     <span class="sca-gift-product-discount-price">{{ bogos_today_offer_gift_discount_price }}</span>
                     <span class="sca-gift-product-original-price">{{ bogos_today_offer_gift_original_price }}</span>
                  </div>
                  <div class="sca-gift-product-variants-selected {{ check_show_selected_variant }}">{{ bogos_variants_selected }}</div>
               </div>
            </div>`,TODAY_OFFER_WIDGET_ID:"#sca_fg_today_offer_widget",TODAY_OFFER_WIDGET:`<img loading="lazy" id="sca-fg-today-offer-widget-img" src="{{ sca_fg_today_offer_widget }}" alt="fg-widget-today-offer" />
            <span class="sca-fg-title-icon-widget">{{ sca-fg-title-icon-widget-content }}</span>
            <span class="sca-fg-count-offers"></span>`},y={addToCart:(e,t,i)=>{let r=A.OFFER_TYPE.gift_func,a=i.map(o=>{let{bogos_item_properties:n}=FGSECOMAPP.variables.Shopify??{},g=n?.offers?.[o.offer_root]?.[o.variant_id]??n?.[o.variant_id],s=q.isSpecificOffer?{_bogos_trigger_id:o.offer_root,_bogos_trigger:`${A.TRIGGER_FUNC[r]}_${o.offer_root}`,_bogos_trigger_type:r}:{};return{quantity:o.quantity,id:o.variant_id,properties:{...s,...g}}});return FGSECOMAPP.variables.isHeadless?Y.addCart(a):(t?.sca_add_gift?window.fetch:d.fetch)(e,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json",...t},body:JSON.stringify({items:a,...y.cartAttributes()})})},handleAddGift:async(e,t,i)=>{try{i=`${i}`;let r=FGSECOMAPP.offers.find(g=>i===g.id),l=r.type===A.OFFER_TYPE.function?r.shopify_discount_settings?.code:null;console.info(`BOGOS track: add gift from slider {${e}} {${i}} {${r.type}}`);let o=FGSECOMAPP.arrOfferAdded.find(g=>i===g.belongs_to_offer?.toString()&&e===g.variant_id);o?o.quantity+=t:FGSECOMAPP.arrOfferAdded.unshift({variant_id:e,belongs_to_offer:i,quantity:t,code:l}),localStorage.setItem(FGSECOMAPP.variables.constants.sca_offers_added,d.convertObjToString(FGSECOMAPP.arrOfferAdded)),y.renderEventLoading("start");let n=await y.addToCart(`${FGSECOMAPP.variables.Shopify?.sca_add_url??"/cart/add.js"}?sca_add_gift`,{sca_add_gift:1},[{quantity:t,variant_id:e,offer_root:r.offer_root,offer_id:r.id}]);return n.ok&&await $.apply_discounts([l]),n.ok}catch{return!1}},addGiftToCart:async(e,t,i)=>{let{general:r}=FGSECOMAPP.fgAppearance?.gift_slider,{use_old_version:a,show_gift_type:l}=r??{};a===!1&&y.handleQuantityGiftAvailableSession("set",t,l==="offer"?i.split("_")[0]:void 0),i=i?.toString();let o=document.querySelector(`#fg-gift-items .btn-add-to-cart[data-variant='${e}']`),n=await y.handleAddGift(e,t,i);n?(o&&o.classList.remove("bogos-gift-adding"),o&&o.classList.add("bogos-gift-added"),v.renderSuccessAddGift(),await y.refreshCart([],!0)):o&&(o.innerHTML="Out of stock"),document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.GIFT_ADDED,{detail:{gift:n}}))},processGiftsToCart:async(e,t,i)=>{try{let r=JSON.stringify(FGSECOMAPP.arrOfferAdded)!==i;if(d.empty(e)&&d.empty(t)&&!r)return!1;let a={},l={};FGSECOMAPP.cartItems?.filter(f=>d.checkCartItemIsGift(f))?.forEach(f=>{l[`${f.variant_id}_${f.properties?._bogos_trigger_id}`]={id:f.id,key:f.key,variant_id:f.variant_id,offer_id:f.properties?._bogos_trigger_id,offer_root:f.properties?._bogos_trigger_id,quantity:f.quantity},f.properties?._bogos_trigger_id&&f.key&&(a[f.key]=f.quantity)}),e=e?.filter(f=>!d.empty(f.variant_id)),e?.forEach(f=>{let u=`${f.variant_id}_${q.isSpecificOffer?f.offer_root:""}`,p=l[u]??{};l[u]={...p,...f,quantity:(p.quantity??0)+(f.quantity??1)}});let o=Object.values(l);Object.keys(l)?.forEach(f=>{if(l[f]={...l[f],quantity:Math.max(l[f].quantity,0)},!q.isSpecificOffer){let u=l[f]?.variant_id;a[u]=l[f]?.quantity+(a[u]??0),delete l[f];return}l[f]?.key&&(a[l[f]?.key]=l[f]?.quantity,delete l[f])});let n=!d.empty(a)||!d.empty(l);if(!n&&!r)return!1;e?.forEach(f=>{let u=FGSECOMAPP.arrOfferAdded.find(p=>f.offer_id?.toString()===p.belongs_to_offer?.toString()&&f.variant_id===p.variant_id);u?u.quantity+=f.quantity:FGSECOMAPP.arrOfferAdded.unshift({variant_id:f.variant_id,belongs_to_offer:f.offer_id?.toString(),quantity:f.quantity,code:f.type===A.OFFER_TYPE.function?f.code:null})}),localStorage.setItem(FGSECOMAPP.variables.constants.sca_offers_added,d.convertObjToString(FGSECOMAPP.arrOfferAdded)),y.renderEventLoading("start");let g=!1,s=!d.empty(a),c=!d.empty(l),_=n?`sca_process_gifts${c?"_bogos-ignore":""}`:r?"sca_attr_cart":"sca_none";if(FGSECOMAPP.variables.isHeadless){let f=o.filter(p=>!p.id),u=o.filter(p=>p.id);await y.addToCart(null,null,f).then(p=>g||=p.ok),await Y.updateCart(u).then(p=>g||=p.ok)}else(s||r)&&await d.fetch(`${FGSECOMAPP.variables.Shopify?.sca_update_url??"/cart/update"}?${_}`,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json",sca_process_gifts:"1"},body:JSON.stringify({updates:a,...y.cartAttributes()})}).then(f=>g||=f.ok),c&&await y.addToCart(`${FGSECOMAPP.variables.Shopify?.sca_add_url??"/cart/add"}?${_.replace("_bogos-ignore","")}`,{sca_process_gifts:1},Object.values(l)).then(f=>g||=f.ok);return(c||s)&&await $.apply_discounts(FGSECOMAPP.arrOfferAdded.map(f=>f.code).filter(Boolean)),g&&e.length&&v.renderSuccessAddGift(),document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.CART_AUTO_UPDATED,{detail:{arrGiftsAdd:e,arrGiftsRemove:t}})),FGSECOMAPP.variables.isCheckout&&location.reload(),g}catch(r){return y.renderEventLoading("end"),console.error("BOGOS track: Error processGiftsToCart",r),!1}},renderEventLoading:e=>{try{if(!FGSECOMAPP.variables.Shopify?.enable_process_offer_loading)return;let{checkout_btn_query:t}=FGSECOMAPP.QUERY_SELECTOR,i=[...t?.tool,...t?.integration,...t?.default].filter(Boolean).join(",");document.querySelectorAll(i).forEach(r=>{M.customLoading(e,r).then()})}catch{}},cartAttributes:()=>{if(FGSECOMAPP.variables.Shopify?.do_not_add_freegift_attribute)return;let e=[];if(!d.empty(FGSECOMAPP.arrOfferAdded)){e.push("SECOMAPP_FREEGIFT");let{bogos_item_properties:t}=FGSECOMAPP.variables.Shopify??{};e.push(...t?.cart??[]);for(let i of FGSECOMAPP.arrOfferAdded){let{sub_conditions:r}=FGSECOMAPP.offers.find(l=>l.id===i.belongs_to_offer)??{},{specific_link_address:a}=r??{};d.empty(a)||e.push(a)}}return{attributes:{__freegift_attributes:e.toString(),__bogos_tracking:d.aggregateArrOfferAddedIds(FGSECOMAPP.arrOfferAdded)?.sort().join("-")}}},priceCartItem:e=>{let{final_price:t,price:i}=e??{};try{return e[FGSECOMAPP.variables.Shopify?.sca_fg_price]??t??i}catch{return t??i}},filterProductsSatisfyPackOfProducts:(e,t,i)=>{let r=t.product_narrow[0]??{track_pack_type:null},a=r.track_pack_type;if(d.empty(a))return e;let l=!0,o=[],n=Object.values(r.value);a==="variant"&&(n=n.map(c=>c.variants??c.variant).flat());let g=a==="variant"?"variant_id":"product_id",s=e.reduce((c,_)=>{let f=_[g],u=c[f]??0;return c[f]=u+_.quantity,c},{});for(let c of n){let _=s[c.id]??0;if(c.quantity>_){l=!1,o=[];break}o.push(Math.floor(_/c.quantity))}return i.multiply_max=0,l?(i.multiply_max=o.length>0?Math.min(...o):0,e):[]},filterProductsMatchConditionsWithCalculateForOtherRules:(e,t)=>e?.map(i=>{if(typeof i.cal_gift_for_other_rules<"u"){let r=FGSECOMAPP.arrOfferAdded?.filter(l=>l.variant_id===i.variant_id);if(r?.reduce((l,o)=>l+o.quantity,0)===i.quantity){let l=r?.filter(o=>{if(o.belongs_to_offer?.toString()===t.toString())return!1;let g=(FGSECOMAPP.offers?.find(c=>c.id?.toString()===o.belongs_to_offer?.toString())).gift_settings??{},s=y.priceCartItem(i);return g.cal_gift_for_other_rules&&s>0})?.reduce((o,n)=>o+n.quantity,0);return{...i,cal_gift_for_other_rules:l>0,quantity:l??0}}return{...i,cal_gift_for_other_rules:!1,quantity:0}}return{...i}})??[],filterProductsMatchConditionsWithSettings:(e,t,i,r)=>{let a=FGSECOMAPP.fgSettings?.compare_gift_price_with_product,l=FGSECOMAPP.fgSettings?.not_show_gift_if_already_on_cart;r??=FGSECOMAPP.cartItems;let o=e,n=i.gift_products?.map(_=>_.original_product_shopify_id);if(l){let _=o.filter(u=>!d.checkCartItemIsGift(u)),f=n.filter(u=>_.every(p=>p.product_id!==u));o=f.length?o.filter(u=>!f?.includes(u.product_id)):[]}let g=o;if(a){o=e.sort((P,S)=>y.priceCartItem(P)-y.priceCartItem(S));let _=i.gift_items.map(P=>P?.compare_gift_price??0);o=o.filter(P=>_.some(S=>S<=y.priceCartItem(P)/R)),g=JSON.parse(JSON.stringify(o));let f=i.giftsAdded.sort((P,S)=>S?.compare_gift_price-P?.compare_gift_price).map(P=>({...P})),u=f.reduce((P,S)=>P+S.quantity,0),p=y.calculateMaxGifts(o,t,i),h=Math.max(p-u,0),m=t.is_multiply?i.gift_settings.number_of_gift_can_receive:1;if(g.filter(P=>P.quantity>0).forEach(P=>{P.quantity*=m;let S=y.priceCartItem(P)/R;f.filter(C=>C.quantity>0&&C?.compare_gift_price<=S).forEach(C=>{if(!P.quantity)return 0;let b=P.quantity-C.quantity;C.quantity=Math.max(-b,0),P.quantity=Math.max(b,0)})}),i.giftsAddedInvalid=f.filter(P=>P.quantity>0),!t.is_multiply&&h>0){let[P]=g.slice(-1);!d.empty(P)&&(P.quantity+=h)}g=g.filter(P=>P.quantity>0)}o=o.filter(_=>_.quantity>0);let s=r.map(_=>_.product_id),c=[];return FGSECOMAPP.fgSettings?.select_one_gift_price&&(c=r.filter(_=>d.checkCartItemIsGift(_)).map(_=>_.variant_id)),i.gifts_valid=JSON.parse(JSON.stringify(i.gift_products))?.filter(_=>(i.is_offer_shipping&&(_.variants=_.variants.filter(f=>FGSECOMAPP.productsByID?.[f.product_shopify_id]?.variants?.find(u=>u.id===f.variant_shopify_id)?.available)),_.variants=_.variants.filter(f=>!c.includes(f.variant_shopify_id)),l&&s?.includes(_.original_product_shopify_id)?!1:(a&&(_.variants=_.variants.filter(f=>g.some(u=>f.compare_gift_price<=y.priceCartItem(u)/R))),!d.empty(_.variants)))),o},countTotalMoneyAmount:e=>e.filter(t=>t.cal_gift_for_other_rules===void 0||t.cal_gift_for_other_rules===!0).reduce((t,i)=>t+i.quantity*y.priceCartItem(i),0)/R,countTotalProducts:e=>e.filter(t=>t.cal_gift_for_other_rules===void 0||t.cal_gift_for_other_rules).reduce((t,i)=>t+i.quantity,0),calculateMaxGifts:(e,t,i)=>{let r=0,a=0;if(t.unit==="money"?(a=y.countTotalMoneyAmount(e),i.count_down_value=Math.max(t.min_amount-a,0)):t.unit==="number_of_products"&&(a=y.countTotalProducts(e),i.count_down_quantity=Math.max(t.min_amount-a,0)),a>=t.min_amount&&(t.max_amount===null||a<=t.max_amount)){let l=i.multiply_max??Math.floor(a*100/(t.min_amount*100));r=i.gift_settings.number_of_gift_can_receive*(t.is_multiply?l:1)}return r},countMaxGiftsCanGet:(e,t,i)=>{let r=d.findProductsMatchConditions(t,e,i.sub_conditions?.subscription_products);return r=y.filterProductsMatchConditionsWithCalculateForOtherRules(r,e.offer_id),r=y.filterProductsMatchConditionsWithSettings(r,e,i,t),r=y.filterProductsSatisfyPackOfProducts(r,e,i),y.calculateMaxGifts(r,e,i)},checkEachConditionList:(e,t)=>{let i={},r=[],a=0;return t.offer_conditions.map(l=>{let o=y.countMaxGiftsCanGet(l,e,t);o!==0&&(a=o),r.push(o>0)}),i.max_gifts_can_get=a,i.condition_result=r,i},isSatisfyCondition:(e,t)=>{let i=!1;return e.length===1?i=e[0]:e.length===2&&(t==="and"&&(i=e[0]&&e[1]),t==="or"&&(i=e[0]||e[1])),i},countGiftAvailableFromOffer:(e,t)=>{let i=y.checkGiftAlreadyAddedToCart(e,t);t.giftsAdded=i;let r=y.checkEachConditionList(e,t),a=y.isSatisfyCondition(r.condition_result,t.condition_relationship);if(a){let l=i.filter(o=>o.belongs_to_offer?.toString()===t.id?.toString()).reduce((o,n)=>o+n.quantity,0);r.max_gifts_can_get=r.max_gifts_can_get-l,t.giftsAdded=i,t.giftsAvailable=r.max_gifts_can_get}else t.giftsAdded=i,t.giftsAvailable=0;return!d.empty(FGSECOMAPP.variables.maxOfferPriority)&&t.priority>FGSECOMAPP.variables.maxOfferPriority&&(a=!1),t.stop_lower_priority&&a?FGSECOMAPP.variables.maxOfferPriority=t.priority:t.stop_lower_priority&&!a&&t.priority===FGSECOMAPP.variables.maxOfferPriority&&!d.empty(i)&&(FGSECOMAPP.variables.maxOfferPriority=null),t.isReachConditions=a,t},checkGiftAlreadyAddedToCart:(e,t)=>{let i=e?.map(o=>o.variant_id);FGSECOMAPP.arrOfferAdded=FGSECOMAPP.arrOfferAdded.filter(o=>i?.includes(o.variant_id));let r=t.gift_items.map(o=>o.variant_shopify_id),a={};t.gift_items.filter(o=>a[o.variant_shopify_id]={fg_original_compare_at_price:o.original_compare_at_price,fg_original_price:o.original_price,compare_gift_price:o.compare_gift_price});let l=FGSECOMAPP.arrOfferAdded.filter(o=>o.belongs_to_offer?.toString()===t.id?.toString())?.map(o=>o.variant_id);return e.filter(o=>{let n=d.checkCartItemIsGift(o),g=o.properties?._bogos_trigger_id,s=n&&(g===t.offer_root||!g);return n&&(o.cal_gift_for_other_rules=!1),r.includes(o.variant_id)&&l.includes(o.variant_id)&&s}).map(o=>{let n=t.gift_settings;o.cal_gift_for_other_rules=n.cal_gift_for_other_rules,o.belongs_to_offer=t.id?.toString();let g=!d.empty(o.properties?._bogos_trigger_id),s=FGSECOMAPP.arrOfferAdded?.filter(c=>c.belongs_to_offer?.toString()!==t.id?.toString()&&o.variant_id===c.variant_id)?.reduce((c,_)=>c+_.quantity,0);return{...o,quantity:o.quantity-(g?0:s),...a[o.variant_id]}})},filterGiftProducts:e=>{let t=e.giftsAdded.filter(i=>i.belongs_to_offer?.toString()!==e.id?.toString()).map(i=>i.product_id);return Object.values(e.gifts_valid).filter(i=>!t.includes(i.product_shopify_id))},checkAutoAddGift:(e,t)=>{try{let i=[],{offer:r}=t,{code:a}=r?.shopify_discount_settings??{},l=r?.type;a=l===A.OFFER_TYPE.function?a:null;let o=t.gifts,n=o.reduce((c,_)=>c+_.variants.length,0);if(!e.auto_add_gift&&!r.is_offer_shipping||n<=0)return[];let g=t.offer?.gift_settings?.auto_add_all_gifts,s=t.offer?.gift_should_the_same??{};if(s.status&&s.type==="variant"){let c=o[0].variants[0];c.price===0&&(i.push({variant_id:c.variant_shopify_id,quantity:t.giftsAvailable,offer_id:t.id,offer_root:r.offer_root,type:l,code:a}),console.log(`BOGOS track: variant auto add gift {${c.variant_shopify_id}} {${c.variant_title}} {${t.id}} {${l}}`))}else if(g){let c=(t?.giftsAvailable??0)/n;o.forEach(_=>_.variants?.forEach(f=>i.push({variant_id:f.variant_shopify_id,quantity:c,offer_id:t.id,offer_root:r.offer_root,type:l,code:a}))),console.log(`BOGOS track: auto add all gifts from {${t.id}} {${l}}`)}else if(n===1){let c=o[0].variants[0];c.price===0&&(i.push({variant_id:c.variant_shopify_id,quantity:t.giftsAvailable,offer_id:t.id,offer_root:r.offer_root,type:l,code:a}),console.log(`BOGOS track: auto add gift: {${c.variant_shopify_id}} {${c.variant_title}} {${t.id}} {${l}}`))}return i}catch(i){return console.error("BOGOS track: Error checkAutoAddGift",i),[]}},checkOfferWithSubCondition:(e,t)=>{let i=!0,r=!0,a=!0,l=!0,o=!0,{specific_link_address:n,customer_tags:g,customer_locations:s,customer_order_history:c,mobile_app_channel:_}=e.sub_conditions;if(d.empty(n)||(i=FGSECOMAPP.variables.sca_fg_codes?.includes(n)),!d.empty(g)){let{value_customer_tags:p,type_customer_tags:h}=g??{},m=p?.some(P=>t.customer.tags?.includes(P));r=h==="include"?m:!m}if(!d.empty(s)){let{value_customer_locations:p,type_customer_locations:h}=s??{},m=p?.includes(FGSECOMAPP.customerLocation);l=h==="include"?m:!m}if(!d.empty(c)){let p=!0,{order_created_from:h,total_spend_on_order_history:m,total_spent_on_last_order:P,number_of_order:S,have_not_got_gift_from_this_offer:C}=c??{},b=t.customer.orders??[];if(h){let O=Date.parse(h)/1e3;b=b.filter(G=>G.created_at>=O&&["paid","partially_paid"].includes(G.financial_status))}if(!d.empty(m)&&(m.min_amount!==0||m.max_amount!==0)){let{min_amount:O,max_amount:G}=m??{},w=b.reduce((k,I)=>k+I.total_price,0)/R;p&=(w>=O||!O)&&(w<=G||!G)}if(!d.empty(P)&&(P.min_amount!==0||P.max_amount!==0)){let O=(t.customer.last_total??0)/R,{min_amount:G,max_amount:w}=P??{};p&=b.length>0&&(O>=G||!G)&&(O<=w||!w)}if(!d.empty(S)){let{min_amount:O,max_amount:G}=S??{},w=!(O!==0||G!==0),k=b.length;p&=w?d.empty(b):(k>=O||!O)&&(k<=G||!G)}if(C){let O=t.customer.freegifts_v2??[],G=e.gift_items.map(I=>[`${I.variant_shopify_id}`,`${I.original_variant_shopify_id}_${10*(I.original_price-I.price)*10}`,`${I.original_variant_shopify_id}_${10*(I.original_compare_at_price-I.price)*10}`]).flat(),w=O.filter(({gift_item:I})=>G.includes(I)),k=[...new Set(w.map(({order_id:I})=>I))].length>=Number(C);p&=!k}a=p}let{sale_channels:f,work_with_only_mobile_app:u}=_??{};return o&=u===!1||(f??[]).includes("online_store")||d.empty(f),i&&r&&a&&l&&o},processCartWithOffers:(e,t,i)=>{let r=[],a,l=[],o=[],n=[];for(let g of t){let s=y.countGiftAvailableFromOffer(e,g),c=!s.isReachConditions||s.giftsAvailable<0,_=s.giftsAvailable>0&&s.gift_settings?.auto_add_all_gifts&&FGSECOMAPP.fgSettings?.auto_add_gift;if((c||_)&&s.giftsAdded?.forEach(f=>{o.push({variant_id:f.variant_id,quantity:f.quantity,offer_id:g.id,key:f.key,type:g.type})}),!c){if(s.giftsAvailable===0){let f={};s.giftsAdded?.forEach(u=>{f[u.variant_id]=(f?.[u.variant_id]??0)+u.quantity}),FGSECOMAPP.arrOfferAdded?.filter(u=>g.id?.toString()===u.belongs_to_offer?.toString()).forEach(u=>u.quantity=f[u.variant_id]??u.quantity);continue}(g.sub_conditions&&y.checkOfferWithSubCondition(g,SECOMAPP)||d.empty(g.sub_conditions))&&r.push(g)}}if(e?.filter(g=>d.checkCartItemIsGift(g)&&d.empty(g.belongs_to_offer)).forEach(g=>{o.push({variant_id:g.variant_id,quantity:g.quantity,offer_id:g.properties?._bogos_trigger_id,key:g.key})}),i||d.empty(o)){let g={};r.map(s=>({id:s.id,offerName:s.offer_name,offerPriority:s.priority,stopLowerPriority:s.stop_lower_priority,gifts:y.filterGiftProducts(s),giftsAvailable:s.giftsAvailable,giftsAdded:s.giftsAdded,isReachConditions:s.isReachConditions,offer_root:s.offer_root,offer:s}))?.forEach(s=>{let c=y.checkAutoAddGift(FGSECOMAPP.fgSettings,s);if(c?.length>0){l.push(...c);return}v.handleCheckHiddenGiftSlider(`FGSECOMAPP_HIDDEN_GIFT_OFFER_${s.offer_root}`)||s.gifts.forEach(_=>{g[_.product_shopify_id]={..._,belongs_to_offer:s.id?.toString()},n[s.offer_root]=[...n[s.offer_root]??[],{..._,belongs_to_offer:s.id?.toString()}]})}),a=Object.values(g)??[]}return{arrGiftsAdd:l,arrGiftsRemove:o,arrGiftsData:a,giftsOfferData:n}},processGiftsInvalid:(e,t)=>{let i=new Set;e?.forEach(a=>i.add(a.offer_id)),i.forEach(a=>{let l=FGSECOMAPP.offers?.find(s=>s.id?.toString()===a?.toString());if(d.empty(l)||!l.isReachConditions){FGSECOMAPP.arrOfferAdded=FGSECOMAPP.arrOfferAdded?.filter(s=>s.belongs_to_offer?.toString()!==a?.toString());return}let{auto_add_all_gifts:o}=l?.gift_settings??{};if(l.giftsAvailable>=0&&!o)return;let n=[],g=FGSECOMAPP.arrOfferAdded?.filter(s=>s.belongs_to_offer?.toString()===a?.toString())??[];if(o)n=n.concat([...g]),l.giftsAvailable=0;else{FGSECOMAPP.fgSettings?.compare_gift_price_with_product&&!d.empty(l.giftsAddedInvalid)&&l.giftsAddedInvalid.forEach(s=>{let c=FGSECOMAPP.arrOfferAdded.find(f=>f.belongs_to_offer?.toString()===l.id?.toString()&&s.variant_id===f.variant_id);if(d.empty(c))return;let _=c.quantity-s.quantity;l.giftsAvailable+=s.quantity,_>0?c.quantity=_:(c.quantity=0,n.push({...c}))});for(let s of g){if(l.giftsAvailable>=0)break;l.giftsAvailable+=s.quantity,l.giftsAvailable<=0?n.push({...s}):(s.quantity=l.giftsAvailable,l.giftsAvailable=0)}}n?.forEach(s=>{FGSECOMAPP.arrOfferAdded=FGSECOMAPP.arrOfferAdded?.filter(c=>s.variant_id!==c.variant_id||s.belongs_to_offer?.toString()!==c.belongs_to_offer?.toString())})});let r={};return t?.filter(a=>{if(d.checkCartItemIsGift(a)){let l=a.properties?._bogos_trigger_type===A.OFFER_TYPE.gift_func&&!d.empty(a.properties?._bogos_trigger_id),o=FGSECOMAPP.arrOfferAdded?.filter(g=>a.variant_id===g.variant_id),n=a.variant_id;l&&(n=`${a.variant_id}_${a.belongs_to_offer}`,o=o.filter(g=>a.belongs_to_offer===g.belongs_to_offer)),a.quantity=o?.reduce((g,s)=>g+s.quantity,0)??0,a.quantity-=r[n]??0,r[n]??=a.quantity}return a.quantity>0})??[]},checkAllOffers:async(e,t)=>{let i=JSON.stringify(FGSECOMAPP.arrOfferAdded),{arrGiftsAdd:r,arrGiftsRemove:a,arrGiftsData:l,giftsOfferData:o}=y.processCartWithOffers(e,t,!1),n=y.processGiftsInvalid(a,e);if(!d.empty(a)){let s=y.processCartWithOffers(n,t,!0);y.processGiftsInvalid(s?.arrGiftsRemove,e),r=s?.arrGiftsAdd,a=a?.concat(s?.arrGiftsRemove)??[],l=s?.arrGiftsData,o=s?.giftsOfferData}let g=await y.processGiftsToCart(r,a,i);return g||Q.apply_discounts_shipping(),{giftsOfferData:o,arrGiftsData:l,isUpdated:g&&(!d.empty(r)||!d.empty(a))}},filterOfferGiftSetting:async()=>{try{let e=JSON.parse(JSON.stringify(window.fgData?.offers??[]));for(let n in FGSECOMAPP.productsByID)d.empty(FGSECOMAPP.productsByID[n]?.id)&&delete FGSECOMAPP.productsByID[n];FGSECOMAPP.variables.conditions.locations&&await d.getCustomerLocation();let t=[],i=FGSECOMAPP.fgSettings.offer_process??A.OFFER_TYPE.cloned;e=e?.map(n=>(n.is_offer_shipping=n.gift_settings.discount_method===A.DISCOUNT_TYPE.shipping,n.type_source=n.type,n.type=n.is_offer_shipping?A.OFFER_TYPE.function:i,{...n,id:n.id.toString(),offer_root:(n.offer_root??n.id).toString(),gift_products:y.reorderGiftProducts(n),gift_items:n.gift_items?.map(g=>{let s={};return n.type===A.OFFER_TYPE.function&&!n.is_offer_shipping&&(FGSECOMAPP.variables.giftIdsFunction.push(g.original_variant_shopify_id),s={product_shopify_id:g.original_product_shopify_id,variant_shopify_id:g.original_variant_shopify_id}),{...g,...s}})}));let r=(n,g,s,c)=>{let{type:_,value:f,giftItems:u,giftProducts:p}=g;n.offer_conditions[0].product_narrow=[{type:_,value:{[s]:{...f[s],...!d.empty(c)&&{variants:[{...c}]}}}}],n.gift_items=u.filter(m=>m.original_product_shopify_id?.toString()===s?.toString()&&(d.empty(c)||c?.id===m.original_variant_shopify_id)),n.gift_products=p.filter(m=>m.original_product_shopify_id?.toString()===s?.toString()),n.gift_products[0].variants=[...n.gift_items];let h=n.gift_settings.number_of_gift_can_receive;return n.gift_settings.auto_add_all_gifts&&(h=n.gift_items.length),JSON.parse(JSON.stringify({...n,gift_settings:{...n.gift_settings,number_of_gift_can_receive:h},id:`${n.id}_${f[s].id}_${c?.id??""}`,offer_root:`${n.id}`}))};e.forEach(n=>{try{let g=JSON.parse(JSON.stringify(n)),s=n.gift_should_the_same??{};if(!s?.status||g.is_offer_shipping)return;let c=n.offer_conditions[0]?.product_narrow,_={type:c[0]?.type,value:c[0]?.value,giftItems:[...n.gift_items],giftProducts:[...n.gift_products]};for(let f in _.value){if(s?.type==="product"){t.push(r(g,_,f));continue}if(s?.type==="variant"){let{variant:u,variants:p}=_.value?.[f]??{};(p??u)?.forEach(h=>t.push(r(g,_,f,h)))}}}catch(g){console.error("BOGOS track: Error prepareOfferShouldBeTheSame",g)}}),e=e?.filter(n=>!n?.gift_should_the_same?.status||n.is_offer_shipping)?.concat(t),e=e?.filter(n=>{if(!d.checkValidTimeOffer(n.start_time,n.end_time))return!1;let{customer_order_history:g,customer_tags:s}=n.sub_conditions??{},{no_login:c}=s??{},_=!d.empty(g)||!(c??!0);if(n.sub_conditions&&(!y.checkOfferWithSubCondition(n,SECOMAPP)||_&&d.empty(SECOMAPP.customer.email)))return!1;if(n.is_offer_shipping)return n.gift_settings={...n.gift_settings,number_of_gift_can_receive:1,cal_gift_for_other_rules:!1},!0;let f={...FGSECOMAPP.productsByID},u=!1;if(FGSECOMAPP.fgSettings.sync_quantity===A.SYNC_QUANTITY.stop_offer){n.gift_items=n?.gift_items.filter(h=>f[h.original_product_shopify_id]?.variants?.find(m=>m.id===h.original_variant_shopify_id)?.available)??[];let p=n.gift_items?.map(h=>h.variant_shopify_id);n.gift_products=n?.gift_products?.filter(h=>(h.variants=h?.variants?.filter(m=>p?.includes(m.variant_shopify_id)),h?.variants?.length>0)),u=!0}else if(FGSECOMAPP.fgSettings.manual_input_inventory){n.gift_items=n?.gift_items.filter(h=>f[h.product_shopify_id]?.variants?.find(m=>m.id===h.variant_shopify_id)?.available);let p=n.gift_items?.map(h=>h.variant_shopify_id);n.gift_products=n?.gift_products?.filter(h=>(h.variants=h?.variants?.filter(m=>p?.includes(m.variant_shopify_id)),h?.variants?.length>0)),u=!0}return u&&n.gift_settings?.auto_add_all_gifts&&(n.gift_settings.number_of_gift_can_receive=n.gift_items?.length),u?n.gift_items&&n.gift_items.length>0:!0});let a=FGSECOMAPP?.fgSettings?.cal_gift_discount==="compare_at_price"?"original_compare_at_price":"original_price",l=FGSECOMAPP.fgSettings?.compare_gift_price_with_product,o=l==="compare_at_price"?"original_compare_at_price":"original_price";return e=e?.map(n=>{let g=n.gift_items.map(s=>(s.price=d.convertMultiCurrency(s.price),s.cal_gift_price=d.convertMultiCurrency(d.empty(s[a])?s?.original_price:s[a]),l&&(s.compare_gift_price=d.convertMultiCurrency(d.empty(s[o])?s?.original_price:s[o])),s.original_product_shopify_id));return n.gift_products=n.gift_products?.filter(s=>(s.variants?.forEach(c=>{c.price=d.convertMultiCurrency(c.price),c.cal_gift_price=d.convertMultiCurrency(d.empty(c[a])?c?.original_price:c[a]),l&&(c.compare_gift_price=d.convertMultiCurrency(d.empty(c[o])?c?.original_price:c[o]))}),g.includes(s.original_product_shopify_id))),n.offer_conditions?.forEach(s=>{s.unit==="money"&&(s.min_amount=d.convertMultiCurrency(s.min_amount),s.max_amount=d.empty(s.max_amount)?s.max_amount:d.convertMultiCurrency(s.max_amount))}),{...n}})?.sort((n,g)=>n.priority-g.priority),FGSECOMAPP.variables.giftIdsFunction=[...new Set(FGSECOMAPP.variables.giftIdsFunction)],FGSECOMAPP.variables.maxTodayOfferPriority=Math.min(...e.map(n=>n.priority)),e}catch(e){return console.error("BOGOS track: filterOfferGiftSetting",e),[]}},getInfoCloneProducts:async e=>{try{let t=[],i=[],r={sync:[],cache:[]},a=[],{sync_quantity:l,manual_input_inventory:o}=FGSECOMAPP?.fgSettings??{};window.fgData?.offers?.forEach(n=>{let g=[],s=[],c={sync:[],cache:[]},_=[],f=n.gift_settings.discount_method===A.DISCOUNT_TYPE.shipping;n.gift_products.forEach(u=>{let p=u.clone_product_handle??null,h=u.original_product_handle??null,m=u.original_product_shopify_id??null,P=u.product_shopify_id??null;_.push(u.original_product_shopify_id??null),f&&(g.push(p),c.sync.push(P)),l===A.SYNC_QUANTITY.stop_offer?(g.push(h),s.push(p),c.sync.push(m),c.cache.push(P)):o?(g.push(e?h:p),s.push(e?p:h),c.sync.push(e?m:P),c.cache.push(e?P:m)):(s.push(p,h),c.cache.push(m,P))}),t.push(...g),i.push(...s),r.sync.push(...c.sync),r.cache.push(...c.cache),a.push(..._)}),t=t.filter(n=>!d.empty(n)),i=i.filter(n=>!d.empty(n)),r={sync:r.sync.filter(n=>!d.empty(n)),cache:r.cache.filter(n=>!d.empty(n))},a=a.filter(Boolean),await x.cacheProducts(t,{"sca-offer-search":"1"},async()=>{console.info(`BOGOS track: offer:sync-quantity:${Date.now()}`)},{handles:t,ids:r.sync}),x.cacheProducts(i,{"sca-product-cache":"1"},()=>{console.log(`BOGOS track: product-cached:${Date.now()}`)},{handles:i,ids:r.cache}).then(),F.syncStarRating(a).then()}catch(t){console.error("BOGOS track: getInfoCloneProducts",t)}},validateArrOfferAdded:e=>{let{sca_offers_added:t}=FGSECOMAPP.variables.constants;try{d.empty(e)?(FGSECOMAPP.arrOfferAdded=[],localStorage.setItem(t,d.convertObjToString(FGSECOMAPP.arrOfferAdded))):FGSECOMAPP.arrOfferAdded=d.convertStringToObj(localStorage.getItem(t))}catch(l){FGSECOMAPP.arrOfferAdded=e.filter(o=>d.checkCartItemIsGift(o)).map(o=>({variant_id:o.variant_id,key:o.key,belongs_to_offer:o.properties?._bogos_trigger_id,quantity:o.quantity})),FGSECOMAPP.variables.failedParseArrOffersAdded=!0,console.warn("BOGOS track: Failed parse offer added",l)}let i={};FGSECOMAPP.offers?.forEach(l=>{i[l.id]=l?.gift_items?.map(o=>o.variant_shopify_id)});let r=Object.keys(i);FGSECOMAPP.arrOfferAdded=FGSECOMAPP.arrOfferAdded?.filter(l=>r?.includes(l.belongs_to_offer?.toString())&&i[l.belongs_to_offer?.toString()].includes(l.variant_id));let a={};FGSECOMAPP.arrOfferAdded?.forEach(l=>{let o=a[`${l.belongs_to_offer}_${l.variant_id}`]??{};a[`${l.belongs_to_offer}_${l.variant_id}`]={...l,belongs_to_offer:l.belongs_to_offer?.toString(),quantity:(o?.quantity??0)+(l?.quantity??0)}}),FGSECOMAPP.arrOfferAdded=Object.values(a),localStorage.setItem(t,d.convertObjToString(FGSECOMAPP.arrOfferAdded))},refreshCart:async(e,t,i={})=>{y.arrSaveAllFetch=[];let{isCartPage:r,isCheckout:a}=FGSECOMAPP.variables;t&&(r||a)&&location.reload(),t&&F.renderCart().then(()=>y.renderEventLoading("end")),setTimeout(function(){v.fetchRoot(e,i)},250)},arrSaveAllFetch:[],checkEventCart:async(e,t)=>{try{y.arrSaveAllFetch.push(e[0]),document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.START_PROCESS_CART,{detail:{events:y.arrSaveAllFetch,event:e}})),d.empty(t)&&await d.fetchInfoCartUpdate();let{giftsOfferData:i,arrGiftsData:r,isUpdated:a}=await y.checkAllOffers(FGSECOMAPP.cartItems,FGSECOMAPP.offers);FGSECOMAPP.renderPromotionMessage(FGSECOMAPP.offers),console.info("BOGOS track: cart-events",[...y.arrSaveAllFetch],e[0]),await y.refreshCart(r,a||H.render_cart.test(e[0]),i),r?.length||(y.handleQuantityGiftAvailableSession("remove"),document.querySelector("#freegifts-main-popup-container.sca-modal-fg.sca-is-visible-fg")?.classList?.remove("sca-is-visible-fg")),v.handleCheckedTodayOffer();let{isCartPage:l,isCheckout:o}=FGSECOMAPP.variables,n=e[0]==="bogos:checkout";return a&&(l||o||n)&&(y.arrSaveAllFetch=[],location.reload()),["bogos:rollback"].includes(e[0])||document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.END_PROCESS_CART,{detail:{events:y.arrSaveAllFetch,event:e}})),FGSECOMAPP.cartItems}catch(i){console.error("BOGOS track: Error check cart event",i)}},init:async(e,t,i)=>{document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.BOGOS_FG_START));let{using_draft_order:r}=FGSECOMAPP?.fgSettings??{};r&&(FGSECOMAPP.fgSettings.sync_quantity=A.SYNC_QUANTITY.stop_offer);let a=FGSECOMAPP.variables.conditions.function;a&&(FGSECOMAPP.fgSettings.manual_input_inventory=!0,FGSECOMAPP.fgSettings.not_show_gift_if_already_on_cart=!1);let{sync_quantity:l,manual_input_inventory:o}=FGSECOMAPP?.fgSettings??{},n=l===A.SYNC_QUANTITY.stop_offer||o;i||(n?await y.getInfoCloneProducts(a):y.getInfoCloneProducts(a).then()),FGSECOMAPP.offers=await y.filterOfferGiftSetting(),typeof t=="function"&&t(),v.filterPageDisplay(FGSECOMAPP.fgAppearance?.today_offer?.pages_display)&&v.renderTodayOffer(i),y.validateArrOfferAdded(FGSECOMAPP.cartItems),await y.checkEventCart([e],FGSECOMAPP.cartItems),localStorage.setItem(FGSECOMAPP.variables.constants.sca_offers_added,d.convertObjToString(FGSECOMAPP.arrOfferAdded)),FGSECOMAPP.variables.failedParseArrOffersAdded=!1},reorderGiftProducts:e=>{let t=e.gift_products;t=v.handleTransformGiftsSliderData(t,e.is_offer_shipping?FGSECOMAPP.variables.Shopify.shipping_product_img:null),e.type===A.OFFER_TYPE.function&&!e.is_offer_shipping&&(t=t?.map(l=>({...l,product_shopify_id:l.original_product_shopify_id,clone_product_handle:l.original_product_handle,variants:l.variants?.map(o=>({...o,product_shopify_id:o.original_product_shopify_id,variant_shopify_id:o.original_variant_shopify_id}))})));let i=e.gift_settings,{original_products_to_clone:r}=i;if(d.empty(r))return t;let a={};return r.forEach((l,o)=>{a[l?.product_shopify_id]=o}),t.map(l=>({...l,position:a[l.original_product_shopify_id]??0})).sort((l,o)=>l.position-o.position)},handleQuantityGiftAvailableSession:(e,t=0,i="",r=0)=>{try{let a=i?`_${i}`:"",l=`bogos_added_gift${a}`,o=`bogos_total_gift${a}`;if(e==="set"){let n=FGSECOMAPP.variables[l]??0,g=FGSECOMAPP.variables[o],s=i?r:FGSECOMAPP.offers.filter(c=>c.isReachConditions&&!c.is_offer_shipping).reduce((c,_)=>c+_.giftsAvailable,0);FGSECOMAPP.variables[l]=n+t,g||(FGSECOMAPP.variables[o]=s),FGSECOMAPP.variables[l]===FGSECOMAPP.variables[o]&&(FGSECOMAPP.variables[l]=void 0,FGSECOMAPP.variables[o]=void 0)}else Object.keys(FGSECOMAPP.variables).forEach(n=>{(n.startsWith("bogos_added_gift")||n.startsWith("bogos_total_gift"))&&(FGSECOMAPP.variables[n]=void 0)})}catch(a){console.log(a)}}},d={...X,checkCartItemIsGift:(e,t)=>{let i="-sca_clone_freegift",r=typeof e=="object",a=r&&(FGSECOMAPP.variables.giftIdsFunction.includes(e.variant_id)||FGSECOMAPP.variables.giftIds.includes(e.variant_id))&&e.properties?._bogos_trigger_type===A.OFFER_TYPE.gift_func&&!d.empty(e.properties?._bogos_trigger);return a&&!d.empty(t)?e.properties?._bogos_trigger_id===t.offer_root:!d.empty(e)&&(r&&(e.handle?.includes(i)||e.tags?.includes("bogos-gift")||FGSECOMAPP.variables.giftIds?.includes(e.variant_id)||a)||typeof e=="string"&&e.includes(i))},checkCartItemIsPurchaseOption:e=>{let{selling_plan_allocation:t}=e||{selling_plan_allocation:{selling_plan:null}};return!d.empty(t)&&!d.empty(t?.selling_plan)},convertProductEvent:(e,t)=>e?.map(i=>({id:i.product_shopify_id,title:d.renderOriginalProductTitle(i.original_product_shopify_id,i.title,i.product_shopify_id),handle:i.original_product_handle,thumbnail:i.thumbnail,belongs_to_offer:i.belongs_to_offer??`${t}`,variants:i.variants.map(r=>({id:r.variant_shopify_id,title:r.variant_title,price:r.price,original_price:r.cal_gift_price,thumbnail:r.thumbnail,discount_type:r.discount_type,discount_value:r.discount_value}))}))??[],aggregateArrOfferAddedIds:e=>{let t=[];return e.forEach(i=>{let{belongs_to_offer:r}=i;t.push(r.split("_")?.[0]??"")}),[...new Set(t.filter(i=>!d.empty(i)))]},renderGiftPrice:e=>{e??={};let t=FGSECOMAPP.variables.conditions.function,{show_cloned_price:i}=FGSECOMAPP.variables.Shopify??{},r=FGSECOMAPP.productsByID?.[e?.product_shopify_id]?.variants?.find(l=>l.id===e.variant_shopify_id),a=!t&&i?r?.price:void 0;return a?a/=R:a=e?.price,FGSECOMAPP.helper.formatter.format(a??0)},renderOriginalPrice:e=>{e??={};let t=FGSECOMAPP?.fgSettings?.cal_gift_discount==="compare_at_price"?"compare_at_price":"price",i=FGSECOMAPP.productsByID?.[e.original_product_shopify_id]?.variants?.find(a=>a.id===e.original_variant_shopify_id),r=i?.[t]??i?.price;return r?r/=R:r=e?.cal_gift_price,FGSECOMAPP.helper.formatter.format(r??0)},renderOriginalProductUrl:(e,t)=>{let i=FGSECOMAPP.productsByID[e]?.handle??t??"#";return d.routePath(`/products/${i}`)},renderOriginalProductTitle:(e,t,i)=>FGSECOMAPP.productsByID[e]?.title??(FGSECOMAPP.productsByID[i]?.title??t??"").replace("\xBB","").replace("\u{1F381}","").replace(/\(\d*(\.?\d*)% off\)/,"").replace("(Discount)",""),handleCountdownTimer:(e,t)=>{try{let i,r=()=>{let a=new Date,o=Date.parse(e)-a;if(o<0){clearInterval(i);return}let n=Math.floor(o/(1e3*60*60*24)),g=Math.floor(o/(1e3*60*60)),s=Math.floor(o/(1e3*60)),c=Math.floor(o/1e3),_=n,f=g-n*24,u=s-g*60,p=c-s*60,h=`.fg-gift-thumbnail-offer[data-fg-offer-id='${t}'] .fg-gift-thumbnail-offer-time-detail .fg-gift-thumbnail-time-element`;document.querySelectorAll(`${h}.day`).forEach(m=>{m.innerHTML=_.toString().padStart(2,"0")}),document.querySelectorAll(`${h}.hour`).forEach(m=>{m.innerHTML=f.toString().padStart(2,"0")}),document.querySelectorAll(`${h}.minutes`).forEach(m=>{m.innerHTML=u.toString().padStart(2,"0")}),document.querySelectorAll(`${h}.second`).forEach(m=>{m.innerHTML=p.toString().padStart(2,"0")})};i=setInterval(()=>{r()},1e3)}catch{}}},v={...Z,renderProductHTML:(e,t)=>{let i=t.belongs_to_offer?.some?.(D=>FGSECOMAPP.variables.gifts.offers_shipping.includes(D)),r=t?.variants[0]??{},{original_product_shopify_id:a,product_shopify_id:l,original_product_handle:o,belongs_to_offer:n}=t,g=d.checkIsDefaultTitle(r.variant_title),s=t.variants?.length,c=d.renderOriginalProductTitle(a,t.title,l),_=FGSECOMAPP.offers.find(D=>n===D?.id?.toString())?.giftsAvailable,{general:f}=FGSECOMAPP.fgAppearance?.gift_slider??{},u=f?.show_gift_for_customer==="by_variants",h=(FGSECOMAPP.fgIntegration?.judgeme??{})?.settings??{},{display_star_rating:m,gift_slider:P,status:S}=h,C=(S&&m&&P)??!1,O=(FGSECOMAPP.fgIntegration?.trustoo??{})?.settings??{},{display_star_rating:G,gift_slider:w,status:k}=O,I=(G&&w&&k)??!1,T=d.convertStringToObj(localStorage.getItem(FGSECOMAPP.variables.constants.bogos_judgeme_ratings)??""),L=d.convertStringToObj(localStorage.getItem(FGSECOMAPP.variables.constants.bogos_trustoo_ratings)??""),N=D=>(D??[]).find(({product_id:W})=>W===a)??{},{rating:B}=N(T),{rating:U}=N(L),z=F.renderStarRatingJudgeme(B??null,a),j=F.renderStarRatingTrustoo?.(U??null,a),V=v.renderGiftQuantityOptions(_);return FGSECOMAPP.helper.templateHTML.render(e,{fg_product_handle:d.renderOriginalProductUrl(a,o),fg_product_img:d.handleResizeGiftImage(s===1?r.thumbnail:t.thumbnail),fg_offer_type:i?A.DISCOUNT_TYPE.shipping:A.OFFER_TYPE.cloned,fg_product_img_alt:c,fg_product_title:f?.show_product_title?c:"",fg_gifts_check_show_by_variants:u&&f?.show_variant_title&&!g?"":"sca-d-none",fg_gifts_check_show_by_products:u?"sca-d-none":"",fg_check_selected_variant:s===1?`active ${g?"sca-d-none":""}`:"",fg_variant_title:s!==1?F.convertIntegration(f?.select_gift_btn??"Select variant","customize.select_variant_button_text","customize.gift_slider.select_gift_btn"):r.variant_title,fg_original_price:d.renderOriginalPrice(r),fg_gift_price:d.renderGiftPrice(r),sca_fg_variant_select_section:v.renderVariantSelectOptions(t.variants,t.thumbnail),fg_product_belongs_to_offer:t.belongs_to_offer,fg_variant_id:s===1?r.variant_shopify_id:"",offer:FGSECOMAPP.offers.find(D=>D.id===t.belongs_to_offer?.[0]),bogos_default_select_variant_title:F.convertIntegration(f?.select_gift_btn??"Select variant","customize.select_variant_button_text","customize.gift_slider.select_gift_btn"),bogos_check_show_select_variant:s===1?"sca-d-none":"",bogos_number_max_gifts:_??0,bogos_integration_judgeme:C?z:"",bogos_integration_trustoo:I?j:"",bogos_gift_quantity_options:V,bogos_check_show_quantity_box:FGSECOMAPP.fgSettings?.select_one_gift_price||!f?.enable_add_multiple_gifts?"sca-d-none":""})},renderGiftsOfferSection:(e,t,i={})=>{let{notify_gift_can_add:r}=FGSECOMAPP.fgAppearance?.gift_slider,a=document.querySelector(E.GIFT_OFFER_SECTION_ID)?.innerHTML??E.GIFT_OFFER_SECTION,l=(e??0)===0,o=l?F.convertIntegration(r?.number_gifts_can_be_added??"You can add {{number}} gift product(s)","customize.number_gifts_can_be_added_text","customize.gift_slider.number_gifts_can_be_added_text"):F.convertIntegration(r?.number_gifts_added??"You have added {{number}} gift product(s)","customize.number_gifts_added_text","customize.gift_slider.number_gifts_added_text");return FGSECOMAPP.helper.templateHTML.render(a,{sca_fg_disable_slider_section:v.HIDDEN_GIFT_POPUP(),check_show_number_gift_available:r?.enable===!1?"sca-d-none":"",check_show_number_gift_available_type:(e??0)===0?"warning":"success",bogos_number_gift_available:FGSECOMAPP.helper.templateHTML.render(o,{number:l?t:`${e}/${t}`}),...i})},renderTodayOffer:e=>{let{widget_info:t}=FGSECOMAPP.fgAppearance?.today_offer??{},i=document.querySelector("#sca-fg-today-offer-widget"),r=document.querySelector("#sca-fg-today-offer-iframe");if(e&&!FGSECOMAPP.offers?.length&&(i&&(i.innerHTML="",i.className=""),r&&(r.innerHTML="")),!t?.show_widget||!FGSECOMAPP.offers?.length||!i||!r)return;let a=document.querySelector(E.TODAY_OFFER_WIDGET_ID)?.innerHTML??E.TODAY_OFFER_WIDGET,l=document.querySelector(E.TODAY_OFFER_SECTION_ID)?.innerHTML??E.TODAY_OFFER_SECTION,o={};FGSECOMAPP.offers.forEach(s=>{o[s.offer_root]?o[s.offer_root].gift_products.push(...s.gift_products):o[s.offer_root]=JSON.parse(JSON.stringify(s))});let n=Object.values(o);n=n.sort((s,c)=>new Date(s.start_time)-new Date(c.start_time)),FGSECOMAPP.variables.todayOffers=n,i.innerHTML=FGSECOMAPP.helper.templateHTML.render(a),t?.widget_icon_style==="icon_and_title"&&(i.classList.add("sca-fg-today-offer-widget-with-title"),document.querySelector("#sca-fg-today-offer-widget .sca-fg-count-offers").style.right="-5px"),(t?.widget_icon_style==="icon"||!t?.widget_icon_style)&&(i.classList.remove("sca-fg-today-offer-widget-with-title"),document.querySelector("#sca-fg-today-offer-widget .sca-fg-title-icon-widget")?.classList?.add("sca-hide")),t?.widget_position==="bottom_left"&&(i.classList.add("sca-today-offer-widget-left"),r.classList.add("sca-today-offer-left")),t?.widget_position==="bottom_right"&&(i.classList.add("sca-today-offer-widget-right"),r.classList.add("sca-today-offer-right")),r.innerHTML=FGSECOMAPP.helper.templateHTML.render(l,{sca_fg_today_offer_footer:v.BRAND_MARK_TEMPLATE("today-offer-brand-mark")}),v.handleRenderTodayOfferBody(),document.querySelector("#sca-fg-today-offer-widget .sca-fg-count-offers").innerHTML=n.length.toString();let g=()=>{document.querySelector("#sca-fg-today-offer-iframe")?.classList.toggle("sca-show"),v.handleRenderTodayOfferBody(),document.querySelectorAll(".sca-fg-icon-success").forEach(_=>{_.classList.toggle("sca-hide")})};document.querySelector(".sca-fg-close-today-offer").addEventListener("click",g),!e&&document.querySelector("#sca-fg-today-offer-widget").addEventListener("click",g),v.handleCheckedTodayOffer(),document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.RENDER_TODAY_OFFER,{detail:{todayOffers:n.map(s=>{let c=window.fgData.offers.find(_=>_.id.toString()===s.offer_root);return{id:`${c.id}`,title:F.convertIntegration(s.offer_name,`offer.offer_title_${s.offer_root}`,`offers.${s.offer_root}.offer_name`),gifts:d.convertProductEvent(c.gift_products,c.id),success:s.isReachConditions??!1}})}}))},handleRenderTodayOfferBody:(e=null)=>{let t=!d.empty(e),{widget_info:i}=FGSECOMAPP.fgAppearance?.today_offer??{},r=d.empty(i?.number_gift_show)?2:i?.number_gift_show,a=i?.gift_display==="by_variants",l=i?.show_gift_preview,o=[...FGSECOMAPP.variables.todayOffers];t&&(o=[FGSECOMAPP.variables.todayOffers.find(_=>_.offer_root?.toString()===e.toString())]);let n=document.querySelector(E.TODAY_OFFER_ITEM_SECTION_ID)?.innerHTML??E.TODAY_OFFER_ITEM_SECTION,g=document.querySelector(E.TODAY_OFFER_GIFT_PRODUCT_ID)?.innerHTML??E.TODAY_OFFER_GIFT_PRODUCT,s=document.querySelector(E.TODAY_OFFER_ITEM_HEADER_SECTION_ID)?.innerHTML??E.TODAY_OFFER_ITEM_HEADER_SECTION,c=document.querySelector(E.TODAY_OFFER_ITEM_HEADER_WITH_IMG_SECTION_ID)?.innerHTML??E.TODAY_OFFER_ITEM_HEADER_WITH_IMG_SECTION;document.querySelector("#sca-fg-today-offer-iframe .sca-fg-body .sca-fg-offers").innerHTML=o.map(_=>{let{offer_name:f,offer_root:u,gift_products:p,config:h,gift_settings:m,is_offer_shipping:P}=_,S=P&&m.shipping_discount.create_product,b=`${m.discount.type===A.DISCOUNT_TYPE.fixed_amount?d.renderPrice(d.convertMultiCurrency(m.discount.value)):m.discount.value+"%"}`,O=d.empty(h?.today_offer_title)?F.convertIntegration(f,`offer.offer_title_${u}`,`offers.${u}.offer_name`):F.convertIntegration(h?.today_offer_title,`offer.today_offer_${u}`,`offers.${u}.today_offer_title`),G=h?.offer_link??"",w=[...p];if(a){let T=[];for(let L of p)L?.variants?.forEach(N=>T.push({...L,thumbnail:N.thumbnail??L?.thumbnail,variants:[N]}));w=T}let k=w?.length,I=w.slice(0,r);return t&&(I=w),FGSECOMAPP.helper.templateHTML.render(n,{sca_fg_offer_id:u,sca_fg_offer_detail:t?"sca-fg-offer-detail":"",bogos_today_offer_header:FGSECOMAPP.helper.templateHTML.render(l?s:c,{sca_fg_offer_title:O,check_show_gift_notification:i?.show_gift_notification===!0?"":"sca-d-none",sca_fg_offer_subtitle:P?"":FGSECOMAPP.helper.templateHTML.render(F.convertIntegration(i?.gift_notification??"Get {{number}} gift for {{discountAmount}} OFF","customize.today_offer_gift_notification","customize.today_offer.gift_notification"),{number:m?.number_of_gift_can_receive,discountAmount:b}),bogos_offer_link_title:F.convertIntegration(i?.button_redirect_text??"Get offer","customize.today_offer_button_redirect_text","customize.today_offer.button_redirect_text"),sca_fg_offer_title_tooltip:O,bogos_today_offer_link:G,check_show_btn_redirect:d.empty(G)?"sca-d-none":"",sca_fg_offer_img:p[0].thumbnail}),check_show_gift_product:l?"":"sca-d-none",bogos_more_gift_product:!t&&k>r?FGSECOMAPP.helper.templateHTML.render(F.convertIntegration(i?.see_more_text??"See more ({{number}} products)","customize.today_offer_see_more_text","customize.today_offer.see_more_text"),{number:k-r}):"",check_show_more_product:(k>r||t)&&l?"":"sca-d-none",sca_bogos_offer_id:u,bogos_today_offer_gift_products:I.map(T=>{let L=T?.variants?.length>1,{original_product_shopify_id:N,title:B,product_shopify_id:U}=T??{};return FGSECOMAPP.helper.templateHTML.render(g,{bogos_today_offer_gift_img:T?.thumbnail??T?.variants[0]?.thumbnail,bogos_today_offer_gift_name:P&&!S?O:d.renderOriginalProductTitle(N,B,U),bogos_today_offer_gift_discount_price:P?null:d.renderGiftPrice(T?.variants[0]),bogos_today_offer_gift_original_price:P?"":d.renderOriginalPrice(T?.variants[0]),bogos_variants_selected:L?FGSECOMAPP.helper.templateHTML.render(F.convertIntegration(i?.variant_text??"{{number}} variants selected","customize.today_offer_variant_text","customize.today_offer.variant_text"),{number:T?.variants?.length}):"",check_show_selected_variant:L?"":"sca-d-none",check_show_variant_name:a&&!d.checkIsDefaultTitle(T.variants[0]?.variant_title)?"":"sca-d-none",bogos_today_offer_gift_variant_name:a?T.variants[0]?.variant_title:""})}).join(`
`),offer:_})}).join(`
`),v.handleCheckedTodayOffer(),v.renderTodayOfferQuerySelectorAll()},handleCheckedTodayOffer:()=>{let e=[...new Set(FGSECOMAPP.offers?.filter(t=>t.isReachConditions)?.map(t=>t.offer_root))];document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.TODAY_OFFER_CHANGE,{detail:{idOffersSuccess:e}})),document.querySelectorAll("#sca-fg-today-offer-iframe .sca-fg-offers .sca-fg-offer").forEach(t=>{e.includes(t.getAttribute("data-fg-offer-id"))?t.classList.add("sca-offer-archived"):t.classList.remove("sca-offer-archived")})},renderTodayOfferQuerySelectorAll:()=>{document.querySelectorAll(".sca-offer-title").forEach(function(e){e.addEventListener("mouseenter",function(t){let i=e.getAttribute("data-sca-fg-today-offer-title-tooltip");d.createTooltip(i,t.pageX+5,t.pageY+5)}),e.addEventListener("mouseleave",function(){d.removeTooltip()}),e.addEventListener("mousemove",d.moveTooltip)}),document.querySelectorAll("#sca-fg-today-offer-iframe .sca-offer-more-gift-products ").forEach(e=>{e.addEventListener("click",()=>{let t=e.getAttribute("data-bogos-offer-id");v.handleRenderTodayOfferBody(t),document.querySelector("#sca-fg-today-offer-iframe .sca-fg-body").scrollTo(0,0)})}),document.querySelectorAll("#sca-fg-today-offer-iframe .sca-fg-icon-back-offer-detail").forEach(e=>{e.addEventListener("click",()=>{v.handleRenderTodayOfferBody(),document.querySelectorAll(".sca-fg-icon-success").forEach(i=>{i.classList.toggle("sca-hide")})})})},handleTransformGiftsSliderData:(e,t)=>{let i=FGSECOMAPP.productsByID;return e.map(r=>{let a=i[r.product_shopify_id];return{...r,thumbnail:a?.featured_image??t??r.thumbnail,variants:r.variants.map(l=>{let o=a?.variants?.find(n=>n.id===l.variant_shopify_id);return{...l,thumbnail:o?.featured_image?.src??a?.featured_image??t??l.thumbnail??r.thumbnail}})}})},handleConvertGiftsBelongOffer:e=>{let t=e.map(r=>r.belongs_to_offer).flat().filter((r,a,l)=>l.indexOf(r)===a),i=FGSECOMAPP.offers.filter(r=>t.includes(r.offer_root)).reduce((r,a)=>({...r,[a.offer_root]:{...a,gift_items_filter:e.filter(l=>l.belongs_to_offer.includes(a.offer_root))}}),{});return Object.values(i)},filterOfferToGiftThumbnail:e=>{try{let t={},i={},r=FGSECOMAPP.offers;if(d.empty(e)){e=[];let o={},{current_product:n,other_products:g,current_collection:s}=FGSECOMAPP.variables.Shopify;d.empty(n)||(o[n.id]=n),[...g??[],...s?.products??[]].forEach(c=>o[c.id]=c),Object.values(FGSECOMAPP.productsInPage)?.filter(c=>!d.empty(c.info)&&(d.empty(c?.product_has_icon)||c?.product_has_icon&&!c?.positions?.every(_=>_?.classList?.contains("sca-gift-icon-collection-page"))))?.forEach(c=>{o[c.info.id]={...c.info}}),e=Object.values(o)}e?.forEach(o=>{let n=FGSECOMAPP.productsInPage[o.handle];FGSECOMAPP.productsInPage[o.handle]={...n,info:{...o},product_has_icon:d.empty(r)?void 0:!1};let g={handle:o.handle,tags:o.tags,variant_id:o.variants?.[0]?.id??-1};d.checkCartItemIsGift(g)&&n?.positions?.forEach(s=>s?.remove())});let a=FGSECOMAPP.fgSettings?.compare_gift_price_with_product,l=FGSECOMAPP.variables.Shopify?.enable_gift_icon_selected_product||FGSECOMAPP.fgAppearance.gift_icon?.enable_for_all_conditions;r?.forEach(o=>{let{offer_conditions:n}=o,{is_multiply:g,unit:s,product_narrow:c}=n?.[0]??{},_=n?.length===1&&s==="number_of_products"&&typeof g=="boolean"&&d.empty(c[0]?.track_pack_type);if(l&&(_=c?.length>0&&c[0]?.filter_option!=="exclude"),!_)return;let f;c?.forEach(u=>{switch(u.type){case A.NARROW_TYPE.product:f=Object.values(u.value);break;case A.NARROW_TYPE.product_types:let p=Object.keys(u.value);p.length>0&&(f=(f===void 0?e:f)?.filter(P=>p.includes(P.type))??[]);break;case A.NARROW_TYPE.product_vendors:let h=Object.keys(u.value);h.length>0&&(f=(f===void 0?e:f)?.filter(P=>h.includes(P.vendor))??[]);break;case A.NARROW_TYPE.collection:let m=Object.keys(u.value);m.length>0&&(f=(f===void 0?e:f)?.filter(P=>{let C=P.collections?.map(b=>b.id+"")?.filter(b=>m.includes(b));return!d.empty(C)})??[]);break;default:break}}),f?.forEach(u=>{let p=u.handle,h=JSON.parse(JSON.stringify(o.gift_products)),m=FGSECOMAPP.productsInPage[p]?.info??Object.values(FGSECOMAPP.productsInPage??{}).find(S=>S?.info?.id===u.id)?.info??{price_max:null};if(p=m.handle??p,FGSECOMAPP.fgSettings?.not_show_gift_if_already_on_cart&&(h=h.filter(S=>S.original_product_shopify_id!==m?.id)),a&&(h=h.filter(S=>S.variants.some(C=>C?.compare_gift_price<=m?.price_max/R)),d.empty(h)))return;if(t[p]){let S=t[p];h?.forEach(C=>{let b=S.find(G=>G.original_product_shopify_id===C.original_product_shopify_id);if(d.empty(b)){S.push({...C,belongs_to_offer:[o.offer_root]});return}let O=C.variants.map(G=>G.original_variant_shopify_id);!b.belongs_to_offer?.includes(o.offer_root)&&b.belongs_to_offer?.push(o.offer_root),b.variants=b?.variants?.filter(G=>!O.includes(G.original_variant_shopify_id))??[],b.variants=[...b.variants,...C.variants]}),t[p]=S}else t[p]=h?.map(S=>({...S,belongs_to_offer:[o.offer_root]}));let P=(u.variants??u.variant)?.map(S=>S.id)??[];d.empty(i[p])&&(i[p]={}),FGSECOMAPP.productsInPage[p]?.info?.variants?.filter(S=>P.includes(S.id))?.forEach(S=>{i[p][S.id]=i[p][S.id]??[];let C=h.filter(b=>{let O=b.variants;return a&&(O=O.filter(G=>G?.compare_gift_price<=S.price/R)),!d.empty(O)}).map(b=>({...b,belongs_to_offer:[o.offer_root]}));i[p][S.id].push(...C)})})});for(let o in t){let n=FGSECOMAPP.productsInPage[o];FGSECOMAPP.productsInPage[o]={...n,gifts_will_receive:[...t[o]],product_has_icon:!0,variants_has_gift:{...i[o]}}}return Object.entries(t)?.length?t:{}}catch(t){return console.warn("BOGOS track: Failed check products have customize",t),null}},renderElementGiftIconCollectionPage:()=>{let e=v.getProductHandleInPage(),t=v.filterOfferToGiftThumbnail();v.renderGiftIconForProducts(t),x.searchProducts(e,{"sca-product-search":"1"},!1,{handles:e}).then()},renderElementOldVersionGiftThumbnail:(e,t)=>{let i=document.querySelector(E.OLD_GIFT_THUMBNAIL_ITEMS_SECTION_ID)?.innerHTML??E.OLD_GIFT_THUMBNAIL_ITEMS_SECTION,r=e?.map(_=>v.renderProductHTML(i,_)).join(""),a=document.querySelector(E.OLD_GIFT_THUMBNAIL_SECTION_ID)?.innerHTML??E.OLD_GIFT_THUMBNAIL_SECTION,l=FGSECOMAPP.helper.templateHTML.render(a,{fg_check_show_narrow:e?.length>=4?"":"sca-d-none",sca_fg_gift_thumbnail_items_section:r}),{gift_thumbnail_query:o}=FGSECOMAPP.QUERY_SELECTOR??{},n=[...o?.tool,...o?.page_builder].filter(Boolean).join(","),g=[...o?.integration,...o?.default].filter(Boolean).join(","),s=!0,c=_=>{if(!_)return;let u=[..._.classList].some(S=>o?.page_builder?.toString()?.includes(S));u||(_.parentElement.style.width="100%",_.parentElement.style.height="auto",_.parentElement?.classList?.toggle("sca-fg-form-thumbnail-product-page",e.length>0));let p=_.parentNode.querySelector("#sca-gift-thumbnail");if(p)p.innerHTML=l;else{p=document.createElement("div"),p.setAttribute("id","sca-gift-thumbnail");let S=new DOMParser().parseFromString(l,"text/html");p.innerHTML=S.body.innerHTML,_.parentNode.insertBefore(p,_)}u?_.appendChild(p):_.parentNode.insertBefore(p,_);let h=p.querySelector("#fg-gift-thumbnail-title");if(h)switch(t.gift_thumbnail?.size){case"32":h.style.maxWidth="50%";break;case"50":h.style.maxWidth="60%";break;case"100":h.style.maxWidth="70%";break;case"160":h.style.maxWidth="80%";break;case"240":h.style.maxWidth="100%";break;default:h.style.maxWidth="60%"}let m=FGSECOMAPP.variables.Shopify?.number_gifts_thumbnail??4,P=p.querySelector(".sca-list-gift-thumbnail");e?.length>=m?new FGSECOMAPP.helper.Glider(P,{slidesToShow:Math.max(m-1,1),slidesToScroll:1,draggable:!0,dots:".dots-thumbnail",arrows:{prev:"#fg-gift-thumbnail-title .glider-prev",next:"#fg-gift-thumbnail-title .glider-next"}}):(h&&(h.style.maxWidth="100%"),P&&(P.style.display="flex")),s=!1};return document.querySelectorAll(n).forEach(c),s&&c(document.querySelector(g)),e},renderElementGiftThumbnail:(e,t)=>{let i=document.querySelector(E.GIFT_THUMBNAIL_SUB_ITEMS_SECTION_ID)?.innerHTML??E.GIFT_THUMBNAIL_SUB_ITEMS_SECTION,r=E.GIFT_THUMBNAIL_ITEMS_EXPIRED,{countdown_text:a,number_text:l,show_multiple:o,show_countdown_timer:n,show_number_gift:g}=t?.gift_thumbnail??{},s=document.querySelector(E.GIFT_THUMBNAIL_ITEMS_SECTION_ID)?.innerHTML??E.GIFT_THUMBNAIL_ITEMS_SECTION,c=e?.sort((S,C)=>S.priority-C.priority)?.map(S=>{let C=S?.gift_items_filter??[],b=C?.map(O=>FGSECOMAPP.helper.templateHTML.render(i,{fg_product_handle:d.renderOriginalProductUrl(O.original_product_shopify_id,O.original_product_handle),fg_offer_type:S.is_offer_shipping?A.DISCOUNT_TYPE.shipping:S.type,fg_product_img:d.handleResizeGiftImage(O.thumbnail),fg_product_img_alt:d.renderOriginalProductTitle(O.original_product_shopify_id,O.title)})).join(" ");return FGSECOMAPP.helper.templateHTML.render(s,{fg_offer_id:S.id,fg_offer_title:F.convertIntegration(S.offer_name,`offer.offer_title_${S.offer_root}`,`offers.${S.offer_root}.offer_name`),fg_offer_time_title:F.convertIntegration(a??"Expiring in","customize.gift_thumbnail_countdown_text","customize.gift_icon.gift_thumbnail_countdown_text"),fg_offer_time_detail:S.end_time?FGSECOMAPP.helper.templateHTML.render(r,{fg_time_day:"00",fg_time_hour:"00",fg_time_minutes:"00",fg_time_second:"00"}):"",fg_offer_body:b,fg_offer_footer_total:S.is_offer_shipping?"":`<span>${C.length}</span> ${F.convertIntegration(l??"gift items included","customize.gift_thumbnail_number_text","customize.gift_icon.gift_thumbnail_number_text")}`})}).join(" "),_=document.querySelector(E.GIFT_THUMBNAIL_SECTION_ID)?.innerHTML??E.GIFT_THUMBNAIL_SECTION,f=FGSECOMAPP.helper.templateHTML.render(_,{fg_gift_thumbnail_section:c}),{gift_thumbnail_query:u}=FGSECOMAPP.QUERY_SELECTOR??{},p=[...u?.tool,...u?.page_builder].filter(Boolean).join(","),h=[...u?.integration,...u?.default].filter(Boolean).join(","),m=!0,P=S=>{if(!S)return;let b=[...S.classList].some(T=>u?.page_builder?.toString()?.includes(T));b||(S.parentElement.style.width="100%",S.parentElement.style.height="auto",S.parentElement?.classList?.toggle("sca-fg-form-thumbnail-product-page",e.length>0));let O=S.parentNode.querySelector("#sca-gift-thumbnail");if(O)O.innerHTML=f;else{O=document.createElement("div"),O.setAttribute("id","sca-gift-thumbnail");let T=new DOMParser().parseFromString(f,"text/html");O.innerHTML=T.body.innerHTML,S.parentNode.insertBefore(O,S)}b?S.appendChild(O):S.parentNode.insertBefore(O,S);let G=o==="together",w=O.querySelector(".fg-gift-thumbnail-container");G?w?.classList.remove("seperated"):w?.classList.add("seperated");let k=n??!0,I=g??!0;O.querySelectorAll(".fg-gift-thumbnail-offer")?.forEach(T=>{let L=T.getAttribute("data-fg-offer-id"),N=e.find(W=>W.id===L),B=T.querySelectorAll(".fg-gift-thumbnail-offer-slider .product-item"),U=FGSECOMAPP.variables.Shopify?.number_gifts_thumbnail??4;B?.length>=U?new FGSECOMAPP.helper.Glider(T.querySelector(".glider"),{slidesToShow:U,slidesToScroll:1,arrows:{prev:`.fg-gift-thumbnail-offer[data-fg-offer-id="${L}"] .fg-gift-thumbnail-btn.glider-prev`,next:`.fg-gift-thumbnail-offer[data-fg-offer-id="${L}"] .fg-gift-thumbnail-btn.glider-next`}}):T.querySelector(".fg-gift-thumbnail-offer-footer .fg-gift-thumbnail-offer-footer-action").classList.add("sca-d-none"),B.length<=4?T.querySelector(".fg-gift-thumbnail-offer-slider").style.width="fit-content":T.querySelector(".fg-gift-thumbnail-offer-slider").style.width="unset";let j=T.querySelector(".fg-gift-thumbnail-offer-time");!N?.end_time||!k?j.classList.add("sca-d-none"):(j.classList.remove("sca-d-none"),d.handleCountdownTimer(N.end_time,L));let V=T.querySelector(".fg-gift-thumbnail-offer-footer"),D=T.querySelector(".fg-gift-thumbnail-offer-footer-quantity");I?(D.classList.remove("sca-d-none"),V.style.justifyContent="space-between"):(D.classList.add("sca-d-none"),V.style.justifyContent="flex-end")}),m=!1};return document.querySelectorAll(p).forEach(P),m&&P(document.querySelector(h)),e},renderElementGiftIconProductPage:()=>{let{product_page:e}=FGSECOMAPP.fgAppearance?.gift_icon??{},t=e?.gift_icon?.status,i=document.querySelector(E.GIFT_ICON_SECTION_ID)?.innerHTML??E.GIFT_ICON_SECTION,r=FGSECOMAPP.helper.templateHTML.render(i,{fg_class_product_or_collection_page:`sca-gift-icon-img ${t?"":"sca-d-none"}`}),{gift_icon_product_query:a}=FGSECOMAPP.QUERY_SELECTOR,l=[...a?.tool,...a?.page_builder].filter(Boolean).join(","),o=[...a?.default,...a?.integration].filter(Boolean).join(","),n=!0,g=s=>{if(!s)return;[...s.classList].some(u=>a?.page_builder?.toString()?.includes(u))||(s.style.position="relative",s.style.width="fit-content",s.classList?.toggle("sca-fg-form-icon-product-page",!0));let f=s.querySelector("#sca-gift-icon");f?f.innerHTML=r:(f=document.createElement("div"),f.setAttribute("id","sca-gift-icon"),f.innerHTML=r,s.appendChild(f)),!t&&(f.style.display="none"),n=!1};return document.querySelectorAll(l).forEach(g),n&&g(document.querySelector(o)),FGSECOMAPP.fgAppearance?.gift_icon?.gift_icon_path},renderGiftIconForProducts:(e,t)=>{let i=[],r=FGSECOMAPP.fgAppearance?.gift_icon?.collection_page?.status;Object.keys(e)?.forEach(a=>{let l=FGSECOMAPP.productsInPage[a],o=`href*='/${a}'`,n=l?.positions??(t?document.querySelectorAll(`.fg-secomapp-collection-img[${o}], .fg-secomapp-collection-img:has([${o}])`):[]);if(d.empty(n)||!Array.isArray(n))return;let g=document.querySelector(E.GIFT_ICON_SECTION_ID)?.innerHTML??E.GIFT_ICON_SECTION,s=FGSECOMAPP.helper.templateHTML.render(g,{fg_class_product_or_collection_page:`sca-gift-icon-collection-img ${r?"":"sca-d-none"}`}),c=[...new Set((l?.gifts_will_receive??[]).map(f=>f.belongs_to_offer).flat())],_=[];n.forEach(f=>{f.style.position="relative",f.classList?.toggle("sca-fg-icon-collection-page",!0);let u=f.querySelector(".sca-gift-icon-collection-page");if(u){let h=u.getAttribute("data-offer-ids")?.split(","),m=c.some(P=>!h?.includes?.(P));return u.setAttribute("data-offer-ids",c.join(",")),m&&_.push(f),!1}_.push(f),u=document.createElement("div"),u.setAttribute("class","sca-gift-icon-collection-page"),u.setAttribute("data-offer-ids",c.join(","));let p=new DOMParser().parseFromString(s,"text/html");u.innerHTML=p.body.innerHTML,!r&&(u.style.display="none"),f.appendChild(u)}),_.length&&i.push({positions:_,product:{...l?.info,handle:a},gifts:d.convertProductEvent(l?.gifts_will_receive??[]),belongs_to_offer:[...new Set(c)]})}),i.length&&document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.PRODUCT_HAS_GIFTS,{detail:{type:"product-list",icon:FGSECOMAPP.fgAppearance?.gift_icon?.gift_icon_path,products:i,enable:r}}))},fetchVariantsSelected:()=>{FGSECOMAPP.variables.Shopify?.enable_check_variants_has_gift&&document.addEventListener("change",function(){let e=new URL(document.URL),t=parseInt(e.searchParams.get("variant"));d.debounce(i=>{FGSECOMAPP.variables.current_variantID===i&&i||(FGSECOMAPP.variables.current_variantID=i,v.renderProductPage(i))},500)(isNaN(t)?void 0:t)})},renderBlockEmptyProductPage:()=>{let e=document.querySelector("#bogos-gift-icon-view-block-preview-mode");e&&v.renderEmpty(e,"There is the placeholder of gift icon.");let t=document.querySelector("#bogos-gift-thumbnail-view-block-preview-mode");t&&v.renderEmpty(t,"There is the placeholder of gift thumbnail.")},renderProductPage:e=>{let{enable_check_variants_has_gift:t,current_product:i}=FGSECOMAPP.variables.Shopify;if(d.empty(i))return;document.querySelector("#sca-gift-icon")?.remove(),document.querySelector("#sca-gift-thumbnail")?.remove();let r=v.filterOfferToGiftThumbnail(),a=location.pathname.split("/"),l=a?.indexOf("products"),o=decodeURI(l>=0?a[l+1]??null:null)??i?.handle,n=r?.[o];if(d.empty(n)){v.renderBlockEmptyProductPage();return}let g=FGSECOMAPP.productsInPage[o]?.variants_has_gift??{},s=Object.keys(g),c=!0;if(t&&(!d.empty(e)&&!s.includes(`${e}`)&&(c=!1),d.empty(e)&&!d.empty(i?.current_variant)&&!s.includes(i?.current_variant?.id?.toString())&&(c=!1),n=g[e??i?.current_variant?.id]??[]),c){let f=v.handleConvertGiftsBelongOffer(n),{product_page:u}=FGSECOMAPP.fgAppearance?.gift_icon??{},{use_old_version:p,status:h}=u?.gift_thumbnail??{};h&&(p??!0)?v.renderElementOldVersionGiftThumbnail(n,u):h&&v.renderElementGiftThumbnail(f,u),v.renderElementGiftIconProductPage(n)}let _=n?.map(f=>f.belongs_to_offer).flat();document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.PRODUCT_HAS_GIFTS,{detail:{type:"product",enable:FGSECOMAPP.fgAppearance?.gift_icon?.product_page?.gift_icon?.status,icon:FGSECOMAPP.fgAppearance?.gift_icon?.gift_icon_path,gifts:d.convertProductEvent(n),product:{handle:o,...i,variant:e??i?.current_variant?.id},belongs_to_offer:[...new Set(_)]}}))},renderCustomizeForProduct:async(e,t,i)=>{i??=await x.cacheProductsObj(e,t);let r=v.filterOfferToGiftThumbnail(i);return r?(t?.collection&&v.renderGiftIconForProducts(r,t?.isHeadless),t.product&&(FGSECOMAPP.variables.Shopify.current_product=i[0],v.renderProductPage()),Object.keys(r).map(a=>({[a]:FGSECOMAPP.productsInPage?.[a]}))):{}},fetchRoot:async(e,t={})=>{let i=document.querySelector("#bogos-gift-slider-view-block-preview-mode");if(e&&e.length>0){FGSECOMAPP.isDelayShowAdded&&(await new Promise(o=>setTimeout(o,1500)),FGSECOMAPP.isDelayShowAdded=!1);let r=FGSECOMAPP.fgAppearance?.gift_slider,a=r?.general?.use_old_version===!1;v.filterPageDisplay(r?.pages_display)&&(v.renderGiftSelectSection(Object.keys(t).length),a&&r?.general?.show_gift_type==="offer"?v.renderGiftSliderSeparateByOffer(t):v.renderGiftSliderViewByAllInOne(e),document.querySelectorAll("#freegifts-main-popup-container .glider-dots").forEach(o=>{o.children.length<=1&&(o.style.display="none")})),i&&(i.style.display="none !important")}else{let{gift_slider_query:r}=FGSECOMAPP.QUERY_SELECTOR??{},a=[...r?.page_builder,...r?.default].filter(Boolean).join(",");document.querySelectorAll(a).forEach(l=>l.innerHTML=""),i&&v.renderEmpty(i,"There is the placeholder of gift slider.")}e.length>0&&v.renderQuerySelectorAll(),FGSECOMAPP.fetchCheckoutEvents(),FGSECOMAPP.renderPromotionMessage(FGSECOMAPP.offers),y.arrSaveAllFetch=[]},renderQuerySelectorAll:()=>{let e=document.querySelectorAll("[data-open]"),t=document.querySelectorAll("#freegifts-main-popup-container [data-close]"),i="sca-is-visible-fg",r=document.querySelectorAll("#fg-gift-items .btn-add-to-cart"),a=r.length;for(let s=0;s<a;s++)d.empty(r[s].getAttribute("data-variant"))&&(r[s].disabled=!0);for(let s of e)s.addEventListener("click",function(){let c=this.dataset.open;document.getElementById(c).classList.add(i)});for(let s of t)s.addEventListener("click",function(){y.handleQuantityGiftAvailableSession("remove"),this.parentElement.parentElement.classList.remove(i)});document.addEventListener("click",s=>{s.target===document.querySelector("#freegifts-main-popup-container.sca-modal-fg.sca-is-visible-fg")&&(y.handleQuantityGiftAvailableSession("remove"),document.querySelector("#freegifts-main-popup-container.sca-modal-fg.sca-is-visible-fg")?.classList.remove(i))}),document.addEventListener("click",s=>{(s.target??document.createElement("div")).closest(".bogos-slider-close-btn")&&(y.handleQuantityGiftAvailableSession("remove"),document.querySelector("#freegifts-main-popup-container.sca-modal-fg.sca-is-visible-fg")?.classList.remove(i))}),document.addEventListener("keyup",s=>{s.key==="Escape"&&document.querySelector("#freegifts-main-popup-container.sca-modal-fg.sca-is-visible-fg")&&(y.handleQuantityGiftAvailableSession("remove"),document.querySelector("#freegifts-main-popup-container.sca-modal-fg.sca-is-visible-fg")?.classList.remove(i))});let{use_old_version:l,show_gift_type:o}=FGSECOMAPP.fgAppearance?.gift_slider?.general??{},n=l===!1,g=s=>{s.querySelector(".btn-add-to-cart").addEventListener("click",async function(){let _=this.getAttribute("data-variant")-0,f=this.getAttribute("data-offer"),u=FGSECOMAPP.offers.find(h=>h.id===f)?.giftsAvailable,p=1;if(n){let h=s.querySelector(".bogos-gift-item-quantity-input")??s.querySelector(".bogos-gift-quantity-input"),m=parseInt(h.value);p=isNaN(m)?1:Math.min(m,parseInt(u))}try{this.disabled=!0,this.classList.add("bogos-gift-adding"),this.innerHTML="",await y.addGiftToCart(_,p,f),this.disabled=!1,document.querySelector("#freegifts-main-popup-container.sca-modal-fg.sca-is-visible-fg")&&(FGSECOMAPP.isDelayShowAdded=!0,await new Promise(m=>setTimeout(m,800))),window.location.href.includes("/cart")?location.reload():typeof Shopify?.getCart=="function"&&await Shopify?.getCart(FGSECOMAPP.variables.fgCallback?.[0])}catch(h){console.error("BOGOS track: error event click add-to-cart ",h)}FGSECOMAPP.variables.isHeadless&&document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.BOGOS_FG_PROCESS))})};document.querySelectorAll("#fg-gift-items .dropdown").forEach(s=>s.addEventListener("click",function(){this.setAttribute("tabindex",1),this.focus(),this.classList.toggle("active"),this.querySelector(".dropdown-menu").classList.toggle("d-block")})),document.querySelectorAll("#fg-gift-items .dropdown").forEach(s=>document.addEventListener("click",function(c){s.contains(c.target)||(s.classList.remove("active"),s.querySelector(".dropdown-menu").classList.remove("d-block")),document.querySelectorAll(".btn-add-to-cart.sca-fg-out-stock").forEach(f=>{f.disabled=!0})})),document.querySelectorAll("#fg-gift-items .product-item").forEach(s=>{s.querySelectorAll(".dropdown > .dropdown-menu > li").forEach(c=>{c.addEventListener("click",function(){let _=this.getAttribute("id"),f=this.getAttribute("data-img"),u=this.getAttribute("data-price"),p=this.getAttribute("data-original-price"),h=this.getAttribute("data-original-id"),m=s.querySelector(".top-content");m.querySelector(".product-item-thumbnail").setAttribute("src",f);let P=new URL(m.querySelector(".gift-original-url").href);P.searchParams.set("variant",h),m.querySelector(".gift-original-url").href=P.toString();let S=s.querySelector(".bottom-content");S.querySelector(".original-price del").textContent=p,S.querySelector(".gift-price").textContent=u;let C=S?.querySelector(".btn-add-to-cart");C.setAttribute("data-variant",_),C.disabled=!1,C.style="";let b=S.querySelector(".selected-variant");b.classList.add("active"),b.innerHTML=this.innerText})}),g(s)}),document.querySelectorAll(".bogos-gifts-slider-container .bogos-offer-gift-item").forEach(s=>{s.querySelectorAll(".bogos-gift-select-variant-wrapper").forEach(_=>{let f=_.querySelector(".bogos-gift-select-variant-dropdown"),u=_.querySelectorAll(".bogos-gift-select-variant-option"),p=s.querySelector(".bogos-gift-item-bottom-info"),h=s.querySelector(".bogos-gift-select-variant-title"),m=p?.querySelector(".btn-add-to-cart"),P=()=>{f.classList.toggle("opened")},S=b=>{let O=b.currentTarget.getAttribute("data-variant-id")-0,G=b.currentTarget.getAttribute("data-img"),w=b.currentTarget.getAttribute("data-price"),k=b.currentTarget.getAttribute("data-original-price"),I=b.currentTarget.getAttribute("data-original-id");h.textContent=b.currentTarget.textContent.trim();let T=s.querySelector(".bogos-gift-item-image-container");T.querySelector(".bogos-gift-item-image").setAttribute("src",G);let L=new URL(T.querySelector(".gift-original-url").href);L.searchParams.set("variant",I),T.querySelector(".gift-original-url").href=L.toString(),p.querySelector(".bogos-gift-item-compare-price").textContent=k,p.querySelector(".bogos-gift-item-price").textContent=w,m.setAttribute("data-variant",O),m.disabled=!1,m.style=""},C=b=>{!_.contains(b.target)&&f.classList.contains("opened")&&f.classList.remove("opened")};document.addEventListener("click",C),u.forEach(b=>{b.addEventListener("click",S)}),f.addEventListener("click",P)}),g(s);let c=s.querySelector(".bogos-gift-select-variant");c&&c.addEventListener("change",function(){let _=s.querySelector(".bogos-gift-item-bottom-info"),f=_?.querySelector(".btn-add-to-cart");if(d.empty(this.value)){f.disabled=!0,f.setAttribute("data-variant","");return}let u=this.value-0,p=c.querySelector(`[value="${u}"]`);if(p){let h=p.getAttribute("data-img"),m=p.getAttribute("data-price"),P=p.getAttribute("data-original-price"),S=p.getAttribute("data-original-id"),C=s.querySelector(".bogos-gift-item-image-container");C.querySelector(".bogos-gift-item-image").setAttribute("src",h);let b=new URL(C.querySelector(".gift-original-url").href);b.searchParams.set("variant",S),C.querySelector(".gift-original-url").href=b.toString(),_.querySelector(".bogos-gift-item-compare-price").textContent=P,_.querySelector(".bogos-gift-item-price").textContent=m,f.setAttribute("data-variant",u),f.disabled=!1,f.style=""}})}),document.querySelectorAll(".bogos-gifts-slider-container .bogos-gift-item-quantity-wrapper").forEach(s=>{let c=s.querySelector(".bogos-gift-item-quantity-dropdown"),_=s.querySelector(".bogos-gift-item-quantity-input"),f=s.querySelectorAll(".bogos-gift-item-quantity-option"),u=()=>{c.classList.toggle("opened")},p=m=>{_.value=m.currentTarget.getAttribute("data-quantity")},h=m=>{!s.contains(m.target)&&c.classList.contains("opened")&&c.classList.remove("opened")};document.addEventListener("click",h),f.forEach(m=>{m.addEventListener("click",p)}),c.addEventListener("click",u)}),document.querySelectorAll(".freegifts-main-container .bogos-slider-offer").forEach(s=>{let c=s.querySelector("#sca-hidden-gift-popup .sca-disable-checkbox");c?.addEventListener("change",async()=>{if(c.checked)if(n&&o==="offer"){let _=s.getAttribute("data-offer");_&&(localStorage.setItem(`FGSECOMAPP_HIDDEN_GIFT_OFFER_${_}`,`${Date.now()}`),await new Promise(f=>setTimeout(f,400)),s.classList.add("sca-d-none"),document.querySelectorAll(".bogos-slider-offers-container .bogos-slider-offer:not(.sca-d-none)").length||(document.querySelector("#freegifts-main-popup-container.sca-modal-fg.sca-is-visible-fg")?.classList?.remove(i),document.querySelector("#freegifts-main-page-container:not(.sca-modal-fg)")?.classList?.add("sca-d-none")))}else localStorage.setItem("FGSECOMAPP_HIDDEN_GIFT_POPUP",`${Date.now()}`),await new Promise(_=>setTimeout(_,400)),document.querySelector("#freegifts-main-popup-container.sca-modal-fg.sca-is-visible-fg")?.classList?.remove(i),document.querySelector("#freegifts-main-page-container:not(.sca-modal-fg)")?.classList?.add("sca-d-none")})}),document.querySelectorAll(".freegifts-main-container .slide-container.sca-modal-dialog-fg").forEach(s=>{let c=s.querySelector("#sca-hidden-gift-popup .sca-disable-checkbox");c?.addEventListener("change",async()=>{c.checked&&(localStorage.setItem("FGSECOMAPP_HIDDEN_GIFT_POPUP",`${Date.now()}`),await new Promise(_=>setTimeout(_,400)),document.querySelector("#freegifts-main-popup-container.sca-modal-fg.sca-is-visible-fg")?.classList?.remove(i),document.querySelector("#freegifts-main-page-container:not(.sca-modal-fg)")?.classList?.add("sca-d-none"))})})},renderGiftsIntoPerSlider:(e,t,i,r)=>{e.innerHTML=t.map(a=>v.renderProductHTML(i,a)).join(` 
`),e.setAttribute("data-show-desktop",`${r}`),v.renderGlider(e,r)},renderGlider:(e,t)=>{let{bogos_settings_glider:i}=FGSECOMAPP.variables.Shopify,{general:r}=FGSECOMAPP.fgAppearance?.gift_slider,a=r?.number_product_slider_mobile??1.8,l=e.parentElement.parentElement;e.setAttribute("data-show-mobile",`${a}`),new FGSECOMAPP.helper.Glider(e,{slidesToShow:1,slidesToScroll:1,draggable:!1,dots:r?.show_pagination?l?.querySelector(".dots"):null,arrows:{prev:l?.querySelector(".glider-prev"),next:l?.querySelector(".glider-next")},responsive:[{breakpoint:750,settings:{slidesToShow:t??4,slidesToScroll:t??4}},{breakpoint:300,settings:{slidesToShow:a===1?a:a+.04,slidesToScroll:a}}],...typeof i=="object"?i:{}}).refresh()},renderGiftSliderSeparateByOffer:e=>{let t=[];Object.entries(e).forEach(([s,c])=>{let _=[...c];if(FGSECOMAPP.fgAppearance?.gift_slider?.general?.show_gift_for_customer==="by_variants"){_=[];for(let p of c){let{variants:h}=p??{};h?.forEach(m=>_.push({...p,thumbnail:m.thumbnail,variants:[m]}))}}let f=FGSECOMAPP.offers.filter(p=>p.offer_root===s.toString()),u=f[0]??{};t.push({offer_name:u.offer_name,offer_root:s,priority:u.priority,giftsAvailable:f.reduce((p,h)=>p+h.giftsAvailable,0),arrGiftShow:_})}),t=t?.sort((s,c)=>s.priority-c.priority);let i=Math.max(...t.map(s=>s?.arrGiftShow?.length)),{general:r}=FGSECOMAPP.fgAppearance?.gift_slider,a=r?.number_product_slider??4,l=a,o=document.querySelector(E.GIFT_ITEM_SECTION_V2_ID)?.innerHTML??E.GIFT_ITEM_SECTION_V2;document.querySelectorAll(".bogos-gifts-slider-container .bogos-slider-offers-container").forEach(s=>{s.innerHTML=t.map(c=>{y.handleQuantityGiftAvailableSession("set",0,c.offer_root,c.giftsAvailable);let _=FGSECOMAPP.variables[`bogos_added_gift_${c.offer_root}`],f=FGSECOMAPP.variables[`bogos_total_gift_${c.offer_root}`];return v.renderGiftsOfferSection(_,f,{bogos_check_show_quantity_box:FGSECOMAPP.fgSettings?.select_one_gift_price?"sca-d-none":"",bogos_offer_id:c?.offer_root?.toString(),bogos_offer_title:F.convertIntegration(c.offer_name,`offer.offer_title_${c.offer_root}`,`offers.${c.offer_root}.offer_name`)})}).join(` 
`)}),document.querySelectorAll(".bogos-gifts-slider-container .bogos-slider-offer-switch-show").forEach(s=>{(i<=2||a<=2)&&(s.style.position="unset")});let g=document.querySelector(".bogos-gifts-slider-container.bogos-gift-slider-modal");if((i<=a||a<=4)&&g){let s=Math.min(i,a);g.style.setProperty("max-width",Math.min(s,4)*(i===1?350:163)+12*s+50+"px","important"),l=s}document.querySelectorAll(".bogos-gifts-slider-container .bogos-slider-offers-container").forEach(s=>{s.querySelectorAll(".bogos-offer-gift-items-container").forEach((c,_)=>{v.renderGiftsIntoPerSlider(c,t[_].arrGiftShow,o,l)})}),document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.SHOW_GIFT_SLIDER,{detail:{addGiftToCartFunc:FGSECOMAPP.helper.addGiftToCart,giftsOffer:t}}))},renderGiftSliderViewByAllInOne:e=>{let t=[...e];if(FGSECOMAPP.fgAppearance?.gift_slider?.general?.show_gift_for_customer==="by_variants"){t=[];for(let c of e)c.variants?.forEach(_=>t.push({...c,thumbnail:_.thumbnail,variants:[_]}))}let i=t.length,{general:r}=FGSECOMAPP.fgAppearance?.gift_slider,a=r?.use_old_version===!1,l=r?.number_product_slider??4,o=l,n=a?document.querySelector(".bogos-gifts-slider-container.bogos-gift-slider-modal"):document.querySelector(".slide-container.sca-modal-dialog-fg"),g=a?".bogos-offer-gift-items-container":".bogos-gift-items",s=a?document.querySelector(E.GIFT_ITEM_SECTION_V2_ID)?.innerHTML??E.GIFT_ITEM_SECTION_V2:document.querySelector(E.GIFT_ITEM_SECTION_ID)?.innerHTML??E.GIFT_ITEM_SECTION;if(a){y.handleQuantityGiftAvailableSession("set");let c=FGSECOMAPP.variables.bogos_added_gift,_=FGSECOMAPP.variables.bogos_total_gift;document.querySelectorAll(".bogos-gifts-slider-container .bogos-slider-offers-container").forEach(f=>{f.innerHTML=v.renderGiftsOfferSection(c,_,{bogos_check_offer_title:"sca-d-none"})}),document.querySelectorAll(".bogos-gifts-slider-container .bogos-slider-offer-switch-show").forEach(f=>{f&&(i<=2||l<=2)&&(f.style.position="unset")})}if((i<=l||l<=4)&&n){let c=Math.min(i,l);n.style.setProperty("max-width",Math.min(c,4)*(i===1?350:163)+12*c+50+"px","important"),o=c}document.querySelectorAll(g).forEach(c=>{v.renderGiftsIntoPerSlider(c,t,s,o)}),document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.SHOW_GIFT_SLIDER,{detail:{addGiftToCartFunc:FGSECOMAPP.helper.addGiftToCart,gifts:d.convertProductEvent(t)}}))},renderGiftSelectSection:e=>{let t=FGSECOMAPP.fgAppearance?.gift_slider??{},i=F.convertIntegration(t?.notify_offer_available?.text??"\u{1F381} You have qualified for {{qualifiedOffers}} offer(s)!","customize.notify_offer_available_text","customize.gift_slider.notify_offer_available_text"),r=t?.general?.use_old_version===!1,{gift_slider_query:a}=FGSECOMAPP.QUERY_SELECTOR??{},l=[...a?.page_builder,...a?.default].filter(Boolean).join(","),o=document.querySelectorAll(l);if(o?.length>0){let s=r?document.querySelector(E.GIFTS_CART_SECTION_V2_ID)?.innerHTML??E.GIFTS_CART_SECTION_V2:document.querySelector(E.GIFTS_CART_SECTION_ID)?.innerHTML??E.GIFTS_CART_SECTION;o.forEach(c=>{c.classList?.toggle("freegifts-main-container",!0),c.innerHTML=FGSECOMAPP.helper.templateHTML.render(s,{sca_fg_disable_slider_section:`${v.BRAND_MARK_TEMPLATE()}`,bogos_check_show_offer_available:r&&t?.notify_offer_available?.enable&&t?.general?.show_gift_type==="offer"?"":"sca-d-none",bogos_slider_offer_available:FGSECOMAPP.helper.templateHTML.render(i,{qualifiedOffers:e,totalOffers:FGSECOMAPP.offers.length}),bogos_brand_mark:v.BRAND_MARK_TEMPLATE("bogos-brand-mark-gift-slider-v2")})});return}let{FGSECOMAPP_HIDDEN_GIFT_POPUP:n}=FGSECOMAPP.variables.constants;if(v.handleCheckHiddenGiftSlider(n)||(o=document.querySelector(a.popup.filter(Boolean).join(",")),!o))return;let g=r?document.querySelector(E.GIFTS_POPUP_SECTION_V2_ID)?.innerHTML??E.GIFTS_POPUP_SECTION_V2:document.querySelector(E.GIFTS_POPUP_SECTION_ID)?.innerHTML??E.GIFTS_POPUP_SECTION;o.innerHTML=FGSECOMAPP.helper.templateHTML.render(g,{sca_fg_disable_slider_section:`${v.HIDDEN_GIFT_POPUP()} ${v.BRAND_MARK_TEMPLATE()}`,bogos_check_show_offer_available:r&&t?.notify_offer_available?.enable&&t?.general?.show_gift_type==="offer"?"":"sca-d-none",bogos_slider_offer_available:FGSECOMAPP.helper.templateHTML.render(i,{qualifiedOffers:e,totalOffers:FGSECOMAPP.offers.length}),bogos_brand_mark:v.BRAND_MARK_TEMPLATE("bogos-brand-mark-gift-slider-v2")}),o.classList.add("sca-is-visible-fg")},renderVariantSelectOptions:(e,t)=>{let r=FGSECOMAPP.fgAppearance?.gift_slider?.general?.use_old_version===!1?document.querySelector(E.GIFT_SELECT_SECTION_V2_ID)?.innerHTML??E.GIFT_SELECT_SECTION_V2:document.querySelector(E.GIFT_SELECT_SECTION_ID)?.innerHTML??E.GIFT_SELECT_SECTION;return e.map(a=>FGSECOMAPP.helper.templateHTML.render(r,{fg_variant_img:d.handleResizeGiftImage(a.thumbnail??t),fg_variant_id:a.variant_shopify_id,fg_original_variant_id:a.original_variant_shopify_id,fg_variant_price:d.renderGiftPrice(a),fg_original_variant_price:d.renderOriginalPrice(a),fg_variant_title:a.variant_title,variant:a})).join(` 
`)},renderGiftQuantityOptions:e=>{let t='<li class="bogos-gift-item-quantity-option" data-quantity="{{bogos_gift_quantity}}">{{ bogos_gift_quantity }}</li>';return Array.from({length:e},(i,r)=>r+1).map(i=>FGSECOMAPP.helper.templateHTML.render(t,{bogos_gift_quantity:i})).join(` 
`)},renderPromotionMessage:e=>{try{if(!FGSECOMAPP.fgAppearance?.promotion_message?.show_on_cart_page)return;let{enable_hidden_message_added:t}=FGSECOMAPP.variables.Shopify??{};d.empty(e)&&(e=[...FGSECOMAPP.offers]);let i=location.href.includes("/cart"),r=[];if(e?.forEach(u=>{if(u.isReachConditions&&(!t||u.giftsAdded?.length)||d.empty(u.promotion_message)||!d.empty(FGSECOMAPP.variables.maxOfferPriority)&&!u.isReachConditions&&u.priority>FGSECOMAPP.variables.maxOfferPriority||d.empty((u.count_down_value??0)+(u.count_down_quantity??0))&&/({{\s*sca_min_total\s*}})|({{\s*sca_min_quantity\s*}})/gm.test(u.promotion_message))return;let p=u.count_down_value?.toFixed(FGSECOMAPP.variables.Shopify?.sca_amount_fixed??2);r.push({value:FGSECOMAPP.helper.templateHTML.render(F.convertIntegration(u.promotion_message,`offer.cart_message_${u.offer_root}`,`offers.${u.offer_root}.promotion_message`),{sca_min_total_with_currency:d.renderPrice(p),sca_min_total:p,sca_min_quantity:u.count_down_quantity}),offer:u})}),document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.RENDER_CART_MESSAGE,{detail:{data:r.map(u=>({offer:u.value,offer_root:u.offer?.offer_root}))}})),d.empty(r)){document.querySelectorAll(".sca-promotion-message-layout").forEach(p=>p.innerHTML="");let u=document.querySelector("#bogos-cart-message-view-block-preview-mode");u&&v.renderEmpty(u,"There is the placeholder of cart message.");return}let a=document.querySelector(E.CART_MSG_ITEM_SECTION_ID)?.innerHTML??E.CART_MSG_ITEM_SECTION,l=r.map(u=>FGSECOMAPP.helper.templateHTML.render(a,{fg_cart_message:u.value,offer:u.offer})).join(""),o=document.querySelector(E.CART_MSG_SECTION_ID)?.innerHTML??E.CART_MSG_SECTION,n=FGSECOMAPP.helper.templateHTML.render(o,{sca_fg_cart_message_items_section:l}),{cart_message_query:g}=FGSECOMAPP.QUERY_SELECTOR,s=document.querySelector([...g?.default].filter(Boolean).join(",")),c=document.querySelectorAll([...g?.tool,...g?.integration,...g?.page_builder].filter(Boolean).join(",")),_=document.querySelectorAll(".sca-promotion-message-layout");d.empty(_)||_.forEach(u=>u.innerHTML=n),_=document.createElement("div"),_.setAttribute("id","sca-promotion-message-layout"),_.classList.add("sca-promotion-message-layout");let f=new DOMParser().parseFromString(n,"text/html");_.innerHTML=f.body.innerHTML,d.empty(c)||c?.forEach(u=>{if(u.querySelector(".sca-promotion-message-layout"))return;let p=_.cloneNode(!0);u.prepend(p)}),s?.querySelector(".sca-promotion-message-layout")||(f=new DOMParser().parseFromString(n,"text/html"),_.innerHTML=f.body.innerHTML,s&&i&&s.prepend(_)),document.querySelectorAll(".sca-promotion-glider").forEach(u=>{let p=new FGSECOMAPP.helper.Glider(u)||{ele:null,scrollItem:()=>{}};((m,P)=>{let S=m.track.childElementCount,C=null,b=1;function O(){C=setTimeout(()=>{b>=S&&(b=0),m.scrollItem(b++)},P)}m.ele?.addEventListener("glider-animated",function(){window.clearInterval(C),O()}),O()})(p,FGSECOMAPP.variables.Shopify?.sca_deplay_cart_msg??3e3)})}catch(t){console.warn("BOGOS track: Failed render cart message",t)}},renderSuccessAddGift:()=>{if(!FGSECOMAPP.variables.Shopify?.enable_toast_added)return;let e=document.querySelector(".sca-fg-notifications");if(!e)return;e.innerHTML="";let t=FGSECOMAPP.variables.Shopify?.sca_text_notify_success??"Add gift to cart successfully!",i=document.createElement("div");i.className="sca-fg-toast sca-fg-success",i.innerHTML=`<div class="sca-fg-column">
                     <i>
                         <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512">
                             <style>svg{fill:#28c76f}</style>
                             <path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/>
                         </svg>
                     </i>
                     <span>${t}</span>
                </div>
                  
                <i id="close-fg-toast">
                      <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512">
                        <path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/>
                      </svg>
                </i>`,e.appendChild(i);let r=setTimeout(()=>v.removeToast(i),3e3);document.querySelector("#close-fg-toast")?.addEventListener("click",()=>v.removeToast(i,r))},removeToast:(e,t)=>{e.classList.add("hide"),t&&clearTimeout(t),setTimeout(()=>e.remove(),500)},HIDDEN_GIFT_POPUP:()=>{let e=FGSECOMAPP.fgAppearance?.gift_slider?.disable_slider_checkbox??{},t=document.querySelector(E.DISABLE_SLIDER_SECTION_ID)?.innerHTML??E.DISABLE_SLIDER_SECTION;return e?.enable?FGSECOMAPP.helper.templateHTML.render(t):""},handleCheckHiddenGiftSlider:e=>{let t=localStorage.getItem(e)-0,r=(FGSECOMAPP.fgAppearance?.gift_slider??{})?.disable_slider_checkbox??{},a=(r?.time??0)*60*1e3;return r?.enable&&!isNaN(t)&&t+a>Date.now()?!0:(localStorage.removeItem(e),!1)},init:()=>{v.fetchVariantsSelected(),v.renderProductPage(),v.renderElementGiftIconCollectionPage()}},F={...K,syncStarRating:async e=>{await F.syncRatingProducts(e,A.APP_REVIEW_OPTION.gift_slider,()=>{console.log(`BOGOS track: judgeme-synced:${Date.now()}`)}),await F.syncRatingProducts(e,A.APP_REVIEW_OPTION.gift_slider,()=>{console.log(`BOGOS track: trustoo-synced:${Date.now()}`)},A.APP_REVIEW.trustoo)}},M={reCallCheckout:e=>{try{let t=FGSECOMAPP.fgSettings?.mode_override_checkout,i=e;i?.hasAttribute("sca_handle_checkout")||(i=document.querySelector("[sca_handle_checkout]:has(#sca-spinner-checkout)"));let r=JSON.parse(i.getAttribute("data-fg-checkout-btn"));if(i.value=r?.value??"",i.innerHTML=r?.innerHTML??"",i.disabled=!1,i.removeEventListener("click",M.progressEventCheckout),i.removeEventListener("touchstart",M.progressEventCheckout),i.removeAttribute("sca_handle_checkout"),t==="clone_checkout"){i.parentNode.querySelector("[sca_root_checkout]").click();return}t==="trigger_body"&&window.removeEventListener("click",M.handleEventCheckoutDocument,!0),FGSECOMAPP.variables.checkIsBlockCheckout=!1,i.click()}catch(t){window.location.replace(d.routePath("/checkout")),console.warn("BOGOS track: Error recall root event checkout",t)}},customLoading:async(e,t)=>{if(typeof FGSECOMAPP.helper?.scaCustomLoadingCheckout=="function"){await FGSECOMAPP.helper.scaCustomLoadingCheckout(e);return}if(e==="start"&&t)t.disabled=!0,t.setAttribute("data-fg-checkout-btn",JSON.stringify({innerHTML:t.innerHTML,value:t.value})),t.value=FGSECOMAPP.variables.Shopify?.sca_fg_value_checkout??"Loading...",t.innerHTML=FGSECOMAPP.variables.Shopify?.sca_fg_innerHTML??`<div id="sca-spinner-checkout" class="sca-spinner-border" role="status">
                        <span class="sca-loading">Loading...</span>
                    </div>`;else if(e==="end"&&t){let i=JSON.parse(t.getAttribute("data-fg-checkout-btn"));t.value=i?.value??"",t.innerHTML=i?.innerHTML??"",t.disabled=!1}else e==="error"?window.location.replace(d.routePath("/checkout")):console.warn("BOGOS track: Cannot define custom loading with type: ",e)},progressEventCheckout:async(e,t)=>{try{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();let{using_draft_order:i}=FGSECOMAPP.fgSettings??{},{checkIsBlockCheckout:r,conditions:a}=FGSECOMAPP.variables??{},l=t==="trigger_body"?e.target:e.currentTarget??e.target,{form:o}=l;if(await M.customLoading("start",l),document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.START_VALIDATE_CHECKOUT,{detail:{}})),r)return!1;FGSECOMAPP.variables.checkIsBlockCheckout=!0,Q.apply_discounts_shipping("checkout");try{if(o&&!FGSECOMAPP.variables.Shopify?.disable_fetch_cart_checkout){let c=new URL(o.action);c.searchParams.append("sca_checkout_form",""),await d.fetch(c.toString(),{method:"POST",body:new FormData(o)})}}catch{console.log("BOGOS track: not type checkout btn")}let n=FGSECOMAPP.cartItems?.some(c=>d.checkCartItemIsGift(c));if(d.empty(FGSECOMAPP.offers)&&!n)return console.log("BOGOS track: not have orders and gifts"),M.reCallCheckout(l),!1;await d.fetchInfoCartUpdate();let g=[...FGSECOMAPP.cartItems],{arrGiftsRemove:s}=y.processCartWithOffers(g,FGSECOMAPP.offers,!1);if(await y.checkAllOffers(g,FGSECOMAPP.offers),s?.length>0)location.reload();else if(i&&!a.function&&n){let c=await x.draftOrder();FGSECOMAPP.variables.checkIsBlockCheckout=!1;let{invoice_url:_}=c?.sca_link_checkout??{};d.empty(_)?(console.warn("BOGOS track: error draft-order",c),M.reCallCheckout(l)):window.location.href=_}else console.log("BOGOS track: not using draft order"),FGSECOMAPP.variables.checkIsBlockCheckout=!1,M.reCallCheckout(l);await M.customLoading("end",l),document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.END_VALIDATE_CHECKOUT,{detail:{status:"done",valid:!s?.length}}))}catch(i){await M.customLoading("error"),document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.END_VALIDATE_CHECKOUT,{detail:{status:"error"}})),console.error("BOGOS track: Error process checkout",i)}},handleEventCheckoutDocument:async e=>{e.target?.hasAttribute("sca_handle_checkout")&&await M.progressEventCheckout(e,"trigger_body")},renderEventCheckout:()=>{let e=FGSECOMAPP.fgSettings?.mode_override_checkout,{checkout_btn_query:t}=FGSECOMAPP.QUERY_SELECTOR,i=[...t?.tool,...t?.integration,...t?.default].filter(Boolean).join(",");document.querySelectorAll(i).forEach(r=>{let a=r.hasAttribute("sca_root_checkout"),l=r.hasAttribute("sca_clone_checkout"),o=r.hasAttribute("sca_handle_checkout"),n=!o;if(e==="clone_checkout"){if(a)return;if(!l&&!o){let g=r.cloneNode(!0);g.addEventListener("click",M.progressEventCheckout),g.addEventListener("touchstart",M.progressEventCheckout),g.addEventListener("touchend",M.progressEventCheckout),g.setAttribute("sca_handle_checkout",""),g.setAttribute("sca_clone_checkout",""),r.style.display="none",r.style.visibility="hidden",r.style.opacity="0",r.setAttribute("sca_root_checkout",""),r.parentNode?.appendChild(g)}n=l&&!o}n&&(r.addEventListener("click",M.progressEventCheckout),r.addEventListener("touchstart",M.progressEventCheckout),r.addEventListener("touchend",M.progressEventCheckout)),r.setAttribute("sca_handle_checkout",""),FGSECOMAPP.variables.hasDoneProcessCheckout=!0}),e==="trigger_body"&&window.addEventListener("click",M.handleEventCheckoutDocument,!0)},fetchEvents:()=>{FGSECOMAPP.variables.scaCountRenderEventCheckout=0,FGSECOMAPP.variables.hasDoneProcessCheckout=!1;let e=setInterval(()=>{M.renderEventCheckout(),FGSECOMAPP.variables.scaCountRenderEventCheckout++,(FGSECOMAPP.variables.scaCountRenderEventCheckout>10||FGSECOMAPP.variables.hasDoneProcessCheckout)&&(FGSECOMAPP.variables.scaCountRenderEventCheckout=0,clearInterval(e))},400)},wallets:async e=>{try{let{paymentsConfig:t}=FGSECOMAPP.variables;if(d.empty(t)&&(t=await d.fetch("/payments/config?bogos").then(a=>a.json())||{paymentInstruments:{accessToken:null}},FGSECOMAPP.variables.paymentsConfig=t),d.empty(e))return d.empty(t);let{country:i,currency:r}=FGSECOMAPP.variables.Shopify;return await d.fetchCartDefault(),await d.fetch("/wallets/checkouts/?bogos",{method:"POST",headers:{accept:"*/*",authorization:`Basic ${window.btoa(t?.paymentInstruments?.accessToken)}`,"cache-control":"no-cache","content-type":"application/json",pragma:"no-cache"},body:JSON.stringify({checkout:{...e,country:i,presentment_currency:r?.active,line_items:FGSECOMAPP.SHOPIFY_CART.items}})}),!0}catch(t){return console.warn("BOGOS track: wallets/config",t),!1}},init:()=>{M.fetchEvents()}},Q={...$,apply_discounts_shipping:(e="cart")=>{let t=(FGSECOMAPP.variables.bogos_shipping_discounts??[]).sort().toString();FGSECOMAPP.variables.bogos_shipping_discounts=FGSECOMAPP.offers.filter(r=>r.is_offer_shipping&&r.isReachConditions).map(r=>r.shopify_discount_settings?.code).filter(Boolean).sort(),(e==="checkout"||t!==FGSECOMAPP.variables.bogos_shipping_discounts.toString())&&$.apply_discounts(FGSECOMAPP.variables.bogos_shipping_discounts)}},x={...J,getInfoProducts:async(e,t)=>{await x.fetch({sca_products_handle:d.convertObjToString(e,"uri")},t).then(async i=>{let r=await i.json(),a=[],{currency:l}=FGSECOMAPP.variables.Shopify,n=(r.currency??"USD")!==l.active;r?.products?.forEach(s=>{if(d.empty(s?.products?.id))return;let{products:c,collections:_}=s;a.push({...n?x.convertProductCurrency(c):c,collections:_})});let g=v.filterOfferToGiftThumbnail(a);v.renderGiftIconForProducts(g)}).catch(i=>{console.warn("BOGOS track: getInfoProductsByProxy",i)})},draftOrder:async()=>{try{let{shop:e,currency:t,add_cart_attributes:i,add_cart_discounts:r}=FGSECOMAPP.variables.Shopify,a=await x.fetch({sca_shop_name:e}).then(o=>o.json()),l=[];return i&&(l=Object.entries(a.cart[0]?.cart_attributes).map(([o,n])=>({key:o,value:`${n}`}))),a.cart=(a.cart??[]).map(o=>{o.product.collections=o.collections?.map(c=>({id:c.id})),o.product.tags=o.tags;let n=FGSECOMAPP.fgSettings.draft_order??{},g=n.discount_code||r&&typeof n.discount_code!="boolean"?o.product.discounts:[],s=Object.entries(o.product.properties??{}).map(([c,_])=>({key:c,value:`${_}`}));return{id:o.product.id,variant_id:o.product.variant_id,product_id:o.product.product_id,title:o.product.title,handle:o.product.handle,price:y.priceCartItem(o.product),quantity:o.product.quantity,product_type:o.product.product_type,vendor:o.product.vendor,tags:o.product.tags,collections:o.product.collections,selling_plan_allocation:o.product.selling_plan_allocation,discounts:g,properties:s}}),a.others={secomapp:{customer:SECOMAPP?.customer??{},fg_codes:SECOMAPP?.fg_codes??[],fgSettings:FGSECOMAPP.fgSettings},cookie_fg_code:FGSECOMAPP.variables.sca_fg_codes,shopify_currency:t,customer_location:FGSECOMAPP.customerLocation,cart_attributes:l,arr_offer_added:q.isSpecificOffer?void 0:FGSECOMAPP.arrOfferAdded,max_priority_draft_order:FGSECOMAPP.variables.maxTodayOfferPriority,offers_in_time:[...new Set(FGSECOMAPP.offers.map(o=>Number(o.offer_root)))],other_discount:[...FGSECOMAPP.variables.bogos_shipping_discounts??[],...FGSECOMAPP.variables.bogos_other_discounts??[]]},await x.fetch({data_checkout:d.convertObjToString(a,"uri")}).then(o=>o.json())||{sca_link_checkout:null}}catch(e){return{error:e.message}}}},{fetch:tt}=window,q={isSpecificOffer:!1,overrideFetch:()=>{let{disable_override_fetch:e}=FGSECOMAPP.variables.Shopify,{isCheckout:t,isHeadless:i}=FGSECOMAPP.variables??{};t||i||e||(window.fetch=async function(){let r=tt.apply(this,arguments);try{let a=typeof arguments[0]=="string"&&arguments[0],l=typeof arguments[1]?.body=="string"&&arguments[1]?.body,o=H.cart.test(a??""),n=a?.includes("graphql.json")&&H.graphql.test(l??"");if(o||n){let g=o?a.match(H.cart):l.match(H.graphql),s=()=>r.then(async function(c){c.ok&&await y.checkEventCart([`fetch-override:${g?.[0]}`])});FGSECOMAPP?.variables?.Shopify?.disable_async_process_fg?s().then():await s()}document.dispatchEvent(new CustomEvent(FGSECOMAPP.CUSTOM_EVENTS.FG_OVERRIDE_FETCH))}catch(a){console.warn("BOGOS track: fetch override error",a)}return r})},listenAPI:()=>{let e=d.debounce(function(){v.renderElementGiftIconCollectionPage()},1e3);new PerformanceObserver(t=>{let i=!1;t.getEntries().forEach(r=>{let{initiatorType:a,name:l,responseStatus:o}=r,n=["xmlhttprequest","fetch"].includes(a),g=["sca_attr_cart","_bogos-ignore","bogos_discount"].some(c=>l.includes(c));if(o>=400)return;let[s]=y.arrSaveAllFetch.slice(-1);if(n&&!g&&H.cart.test(l)){let c=l.match(H.cart)?.[0];!(s===`fetch-override:${c}`)&&y.checkEventCart([`observer:${c}`]).then()}window?.Spurit?.global?.loaded&&document.querySelector("#occ3-drawer .spurit-occ3__slide-drawer")&&(FGSECOMAPP.renderPromotionMessage(),FGSECOMAPP.fetchCheckoutEvents()),i||=n&&!l.includes(SECOMAPP.freegiftProxy)}),i&&e()}).observe({entryTypes:["resource"]})},shopify_getCart:()=>{try{if(FGSECOMAPP.variables.Shopify?.disableShopify_getCart||typeof Shopify?.getCart!="function")return;Shopify.getCart=async function(e){if(!FGSECOMAPP.variables.secomappGetCartRunning){FGSECOMAPP.variables.secomappGetCartRunning=!0,await y.checkEventCart(["Shopify.getCart",{}]);let t=await d.fetchCartDefault("sca_cart_xhr");typeof e=="function"&&(FGSECOMAPP.variables.fgCallback.push(e),e(t)),FGSECOMAPP.variables.secomappGetCartRunning=!1}FGSECOMAPP.fetchCheckoutEvents()},typeof ShopifyAPI<"u"&&typeof ShopifyAPI.getCart<"u"&&(ShopifyAPI.getCart=Shopify?.getCart),typeof Shopify?.api<"u"&&typeof Shopify?.api?.getCart<"u"&&(Shopify.api.getCart=Shopify?.getCart)}catch(e){console.warn("BOGOS track: initializeForXHR Shopify.getCart",e)}},createGlobalVariables:()=>{let{cart_and_checkout_validation:e,offer_process:t}=FGSECOMAPP.fgSettings??{};q.isSpecificOffer=e?.offer||t===A.OFFER_TYPE.function,window.fgData?.offers?.forEach(i=>{FGSECOMAPP.variables.giftIds=FGSECOMAPP.variables.giftIds.concat(i.gift_items.map(a=>a.variant_shopify_id)),FGSECOMAPP.variables.gifts.originalProducts=FGSECOMAPP.variables.gifts.originalProducts.concat(i.gift_products.map(a=>a.original_product_shopify_id)),t!==A.OFFER_TYPE.function&&(FGSECOMAPP.variables.gifts.clonedProducts=FGSECOMAPP.variables.gifts.clonedProducts.concat(i.gift_products.map(a=>a.product_shopify_id))),FGSECOMAPP.variables.conditions.locations||=!d.empty(i.sub_conditions?.customer_locations),FGSECOMAPP.variables.conditions.collections||=i.offer_conditions?.[0]?.product_narrow?.some(a=>a.type===A.NARROW_TYPE.collection)??!1;let r=i.gift_settings.discount_method===A.DISCOUNT_TYPE.shipping;FGSECOMAPP.variables.conditions.shipping||=r,r&&FGSECOMAPP.variables.gifts.offers_shipping.push(i.id.toString())}),FGSECOMAPP.variables.giftIds=[...new Set(FGSECOMAPP.variables.giftIds)].filter(Boolean),FGSECOMAPP.variables.gifts.originalProducts=[...new Set(FGSECOMAPP.variables.gifts.originalProducts)].filter(Boolean),FGSECOMAPP.variables.gifts.clonedProducts=[...new Set(FGSECOMAPP.variables.gifts.clonedProducts)].filter(Boolean),window.BOGOS_CORE?.helper&&(BOGOS_CORE.helper.gift={renderCustomizeForProduct:v.renderCustomizeForProduct,prepareCheckout:async()=>await y.checkEventCart(["bogos:checkout"]),checkItemIsGift:d.checkCartItemIsGift}),FGSECOMAPP.helper={...FGSECOMAPP.helper,initializeForXHR:q.shopify_getCart,customLoadingCheckout:M.customLoading,fetchCheckoutEvents:M.fetchEvents,renderPromotionMessage:v.renderPromotionMessage,renderProductPage:v.renderProductPage,addGiftToCart:y.handleAddGift},FGSECOMAPP.fetchCheckoutEvents=M.fetchEvents,FGSECOMAPP.renderPromotionMessage=v.renderPromotionMessage,FGSECOMAPP.variables.isCheckout=document.querySelector("#secomapp_freegifts_version")?.getAttribute("data-template")==="fg-checkout",FGSECOMAPP.variables.conditions.function=t===A.OFFER_TYPE.function,document.addEventListener(FGSECOMAPP.CUSTOM_EVENTS.BOGOS_FG_PROCESS,i=>{d.debounce(async()=>{if(q.processing)return;q.processing=!0;let r=Y.convertStorefrontCart({data:{cart:i.detail?.cart}},!0);await y.checkEventCart([i.detail?.event??"bogos:gifts"],r?.shopify_cart?.items).then(),q.processing=!1},250)()}),document.addEventListener(FGSECOMAPP.CUSTOM_EVENTS.BOGOS_FG_INIT,()=>{y.init("bogos:rollback",null,!0).then()}),document.addEventListener(FGSECOMAPP.CUSTOM_EVENTS.BOGOS_FG_CART_MESSAGE,()=>v.renderPromotionMessage()),document.addEventListener(FGSECOMAPP.CUSTOM_EVENTS.RERENDER_GIFT_SLIDER,()=>{let{general:i}=FGSECOMAPP.fgAppearance?.gift_slider,a=i?.use_old_version===!1?".bogos-offer-gift-items-container":".bogos-gift-items";document.querySelectorAll(a).forEach(l=>{let o=parseInt(l.getAttribute("data-show-desktop"));v.renderGlider(l,isNaN(o)?4:o)})})},init:async()=>{q.createGlobalVariables(),M.init(),await y.init("init-page",()=>{q.listenAPI(),q.overrideFetch(),q.shopify_getCart()}),v.init(),setTimeout(()=>{v.renderPromotionMessage()},2e3)}};q.init().then()})();})();
