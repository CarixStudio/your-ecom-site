"use strict";(self.webpackChunkshopify_theme=self.webpackChunkshopify_theme||[]).push([[794],{"722d6f0f51848806a616":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{focusManager:()=>focusManager});var _subscribable_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b5ce34368ec17444eb14"),_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("49f8b71830711fdc9d35"),focusManager=new class extends _subscribable_js__WEBPACK_IMPORTED_MODULE_0__.Subscribable{#focused;#cleanup;#setup;constructor(){super(),this.#setup=onFocus=>{if(!_utils_js__WEBPACK_IMPORTED_MODULE_1__.isServer&&window.addEventListener){const listener=()=>onFocus();return window.addEventListener("visibilitychange",listener,!1),()=>{window.removeEventListener("visibilitychange",listener)}}}}onSubscribe(){this.#cleanup||this.setEventListener(this.#setup)}onUnsubscribe(){this.hasListeners()||(this.#cleanup?.(),this.#cleanup=void 0)}setEventListener(setup){this.#setup=setup,this.#cleanup?.(),this.#cleanup=setup(focused=>{typeof focused=="boolean"?this.setFocused(focused):this.onFocus()})}setFocused(focused){this.#focused!==focused&&(this.#focused=focused,this.onFocus())}onFocus(){const isFocused=this.isFocused();this.listeners.forEach(listener=>{listener(isFocused)})}isFocused(){return typeof this.#focused=="boolean"?this.#focused:globalThis.document?.visibilityState!=="hidden"}}},fa5c494e10f4d8f629a0:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{notifyManager:()=>notifyManager});var notifyManager=function(){let queue=[],transactions=0,notifyFn=callback=>{callback()},batchNotifyFn=callback=>{callback()},scheduleFn=cb=>setTimeout(cb,0);const schedule=callback=>{transactions?queue.push(callback):scheduleFn(()=>{notifyFn(callback)})};return{batch:callback=>{let result;transactions++;try{result=callback()}finally{transactions--,transactions||(()=>{const originalQueue=queue;queue=[],originalQueue.length&&scheduleFn(()=>{batchNotifyFn(()=>{originalQueue.forEach(callback2=>{notifyFn(callback2)})})})})()}return result},batchCalls:callback=>(...args)=>{schedule(()=>{callback(...args)})},schedule,setNotifyFunction:fn=>{notifyFn=fn},setBatchNotifyFunction:fn=>{batchNotifyFn=fn},setScheduler:fn=>{scheduleFn=fn}}}()},cee7af7bac6e317df0e8:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{onlineManager:()=>onlineManager});var _subscribable_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b5ce34368ec17444eb14"),_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("49f8b71830711fdc9d35"),onlineManager=new class extends _subscribable_js__WEBPACK_IMPORTED_MODULE_0__.Subscribable{#online=!0;#cleanup;#setup;constructor(){super(),this.#setup=onOnline=>{if(!_utils_js__WEBPACK_IMPORTED_MODULE_1__.isServer&&window.addEventListener){const onlineListener=()=>onOnline(!0),offlineListener=()=>onOnline(!1);return window.addEventListener("online",onlineListener,!1),window.addEventListener("offline",offlineListener,!1),()=>{window.removeEventListener("online",onlineListener),window.removeEventListener("offline",offlineListener)}}}}onSubscribe(){this.#cleanup||this.setEventListener(this.#setup)}onUnsubscribe(){this.hasListeners()||(this.#cleanup?.(),this.#cleanup=void 0)}setEventListener(setup){this.#setup=setup,this.#cleanup?.(),this.#cleanup=setup(this.setOnline.bind(this))}setOnline(online){this.#online!==online&&(this.#online=online,this.listeners.forEach(listener=>{listener(online)}))}isOnline(){return this.#online}}},a2d23d64bc704f7389a1:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Query:()=>Query,fetchState:()=>fetchState});var _utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("49f8b71830711fdc9d35"),_notifyManager_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("fa5c494e10f4d8f629a0"),_retryer_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("82f92ddd87e757d19241"),_removable_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b4c1d8d9c0d604d5cc67"),Query=class extends _removable_js__WEBPACK_IMPORTED_MODULE_0__.Removable{#initialState;#revertState;#cache;#retryer;#defaultOptions;#abortSignalConsumed;constructor(config){super(),this.#abortSignalConsumed=!1,this.#defaultOptions=config.defaultOptions,this.setOptions(config.options),this.observers=[],this.#cache=config.cache,this.queryKey=config.queryKey,this.queryHash=config.queryHash,this.#initialState=function(options){const data=typeof options.initialData=="function"?options.initialData():options.initialData,hasData=data!==void 0,initialDataUpdatedAt=hasData?typeof options.initialDataUpdatedAt=="function"?options.initialDataUpdatedAt():options.initialDataUpdatedAt:0;return{data,dataUpdateCount:0,dataUpdatedAt:hasData?initialDataUpdatedAt??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:hasData?"success":"pending",fetchStatus:"idle"}}(this.options),this.state=config.state??this.#initialState,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#retryer?.promise}setOptions(options){this.options={...this.#defaultOptions,...options},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||this.state.fetchStatus!=="idle"||this.#cache.remove(this)}setData(newData,options){const data=(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.replaceData)(this.state.data,newData,this.options);return this.#dispatch({data,type:"success",dataUpdatedAt:options?.updatedAt,manual:options?.manual}),data}setState(state,setStateOptions){this.#dispatch({type:"setState",state,setStateOptions})}cancel(options){const promise=this.#retryer?.promise;return this.#retryer?.cancel(options),promise?promise.then(_utils_js__WEBPACK_IMPORTED_MODULE_1__.noop).catch(_utils_js__WEBPACK_IMPORTED_MODULE_1__.noop):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#initialState)}isActive(){return this.observers.some(observer=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.resolveEnabled)(observer.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_utils_js__WEBPACK_IMPORTED_MODULE_1__.skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some(observer=>observer.getCurrentResult().isStale):this.state.data===void 0)}isStaleByTime(staleTime=0){return this.state.isInvalidated||this.state.data===void 0||!(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.timeUntilStale)(this.state.dataUpdatedAt,staleTime)}onFocus(){this.observers.find(x=>x.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#retryer?.continue()}onOnline(){this.observers.find(x=>x.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#retryer?.continue()}addObserver(observer){this.observers.includes(observer)||(this.observers.push(observer),this.clearGcTimeout(),this.#cache.notify({type:"observerAdded",query:this,observer}))}removeObserver(observer){this.observers.includes(observer)&&(this.observers=this.observers.filter(x=>x!==observer),this.observers.length||(this.#retryer&&(this.#abortSignalConsumed?this.#retryer.cancel({revert:!0}):this.#retryer.cancelRetry()),this.scheduleGc()),this.#cache.notify({type:"observerRemoved",query:this,observer}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#dispatch({type:"invalidate"})}fetch(options,fetchOptions){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&fetchOptions?.cancelRefetch)this.cancel({silent:!0});else if(this.#retryer)return this.#retryer.continueRetry(),this.#retryer.promise}if(options&&this.setOptions(options),!this.options.queryFn){const observer=this.observers.find(x=>x.options.queryFn);observer&&this.setOptions(observer.options)}const abortController=new AbortController,addSignalProperty=object=>{Object.defineProperty(object,"signal",{enumerable:!0,get:()=>(this.#abortSignalConsumed=!0,abortController.signal)})},context={fetchOptions,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>{const queryFn=(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.ensureQueryFn)(this.options,fetchOptions),queryFnContext={queryKey:this.queryKey,meta:this.meta};return addSignalProperty(queryFnContext),this.#abortSignalConsumed=!1,this.options.persister?this.options.persister(queryFn,queryFnContext,this):queryFn(queryFnContext)}};addSignalProperty(context),this.options.behavior?.onFetch(context,this),this.#revertState=this.state,this.state.fetchStatus!=="idle"&&this.state.fetchMeta===context.fetchOptions?.meta||this.#dispatch({type:"fetch",meta:context.fetchOptions?.meta});const onError=error=>{(0,_retryer_js__WEBPACK_IMPORTED_MODULE_2__.isCancelledError)(error)&&error.silent||this.#dispatch({type:"error",error}),(0,_retryer_js__WEBPACK_IMPORTED_MODULE_2__.isCancelledError)(error)||(this.#cache.config.onError?.(error,this),this.#cache.config.onSettled?.(this.state.data,error,this)),this.scheduleGc()};return this.#retryer=(0,_retryer_js__WEBPACK_IMPORTED_MODULE_2__.createRetryer)({initialPromise:fetchOptions?.initialPromise,fn:context.fetchFn,abort:abortController.abort.bind(abortController),onSuccess:data=>{if(data!==void 0){try{this.setData(data)}catch(error){return void onError(error)}this.#cache.config.onSuccess?.(data,this),this.#cache.config.onSettled?.(data,this.state.error,this),this.scheduleGc()}else onError(new Error(`${this.queryHash} data is undefined`))},onError,onFail:(failureCount,error)=>{this.#dispatch({type:"failed",failureCount,error})},onPause:()=>{this.#dispatch({type:"pause"})},onContinue:()=>{this.#dispatch({type:"continue"})},retry:context.options.retry,retryDelay:context.options.retryDelay,networkMode:context.options.networkMode,canRun:()=>!0}),this.#retryer.start()}#dispatch(action){this.state=(state=>{switch(action.type){case"failed":return{...state,fetchFailureCount:action.failureCount,fetchFailureReason:action.error};case"pause":return{...state,fetchStatus:"paused"};case"continue":return{...state,fetchStatus:"fetching"};case"fetch":return{...state,...fetchState(state.data,this.options),fetchMeta:action.meta??null};case"success":return{...state,data:action.data,dataUpdateCount:state.dataUpdateCount+1,dataUpdatedAt:action.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!action.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const error=action.error;return(0,_retryer_js__WEBPACK_IMPORTED_MODULE_2__.isCancelledError)(error)&&error.revert&&this.#revertState?{...this.#revertState,fetchStatus:"idle"}:{...state,error,errorUpdateCount:state.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:state.fetchFailureCount+1,fetchFailureReason:error,fetchStatus:"idle",status:"error"};case"invalidate":return{...state,isInvalidated:!0};case"setState":return{...state,...action.state}}})(this.state),_notifyManager_js__WEBPACK_IMPORTED_MODULE_3__.notifyManager.batch(()=>{this.observers.forEach(observer=>{observer.onQueryUpdate()}),this.#cache.notify({query:this,type:"updated",action})})}};function fetchState(data,options){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:(0,_retryer_js__WEBPACK_IMPORTED_MODULE_2__.canFetch)(options.networkMode)?"fetching":"paused",...data===void 0&&{error:null,status:"pending"}}}},"2c4e2dc07734c3611524":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{QueryClient:()=>QueryClient});var utils=__webpack_require__("49f8b71830711fdc9d35"),modern_query=__webpack_require__("a2d23d64bc704f7389a1"),notifyManager=__webpack_require__("fa5c494e10f4d8f629a0"),subscribable=__webpack_require__("b5ce34368ec17444eb14"),QueryCache=class extends subscribable.Subscribable{constructor(config={}){super(),this.config=config,this.#queries=new Map}#queries;build(client,options,state){const queryKey=options.queryKey,queryHash=options.queryHash??(0,utils.hashQueryKeyByOptions)(queryKey,options);let query=this.get(queryHash);return query||(query=new modern_query.Query({cache:this,queryKey,queryHash,options:client.defaultQueryOptions(options),state,defaultOptions:client.getQueryDefaults(queryKey)}),this.add(query)),query}add(query){this.#queries.has(query.queryHash)||(this.#queries.set(query.queryHash,query),this.notify({type:"added",query}))}remove(query){const queryInMap=this.#queries.get(query.queryHash);queryInMap&&(query.destroy(),queryInMap===query&&this.#queries.delete(query.queryHash),this.notify({type:"removed",query}))}clear(){notifyManager.notifyManager.batch(()=>{this.getAll().forEach(query=>{this.remove(query)})})}get(queryHash){return this.#queries.get(queryHash)}getAll(){return[...this.#queries.values()]}find(filters){const defaultedFilters={exact:!0,...filters};return this.getAll().find(query=>(0,utils.matchQuery)(defaultedFilters,query))}findAll(filters={}){const queries=this.getAll();return Object.keys(filters).length>0?queries.filter(query=>(0,utils.matchQuery)(filters,query)):queries}notify(event){notifyManager.notifyManager.batch(()=>{this.listeners.forEach(listener=>{listener(event)})})}onFocus(){notifyManager.notifyManager.batch(()=>{this.getAll().forEach(query=>{query.onFocus()})})}onOnline(){notifyManager.notifyManager.batch(()=>{this.getAll().forEach(query=>{query.onOnline()})})}},removable=__webpack_require__("b4c1d8d9c0d604d5cc67"),retryer=__webpack_require__("82f92ddd87e757d19241"),Mutation=class extends removable.Removable{#observers;#mutationCache;#retryer;constructor(config){super(),this.mutationId=config.mutationId,this.#mutationCache=config.mutationCache,this.#observers=[],this.state=config.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(config.options),this.scheduleGc()}setOptions(options){this.options=options,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(observer){this.#observers.includes(observer)||(this.#observers.push(observer),this.clearGcTimeout(),this.#mutationCache.notify({type:"observerAdded",mutation:this,observer}))}removeObserver(observer){this.#observers=this.#observers.filter(x=>x!==observer),this.scheduleGc(),this.#mutationCache.notify({type:"observerRemoved",mutation:this,observer})}optionalRemove(){this.#observers.length||(this.state.status==="pending"?this.scheduleGc():this.#mutationCache.remove(this))}continue(){return this.#retryer?.continue()??this.execute(this.state.variables)}async execute(variables){this.#retryer=(0,retryer.createRetryer)({fn:()=>this.options.mutationFn?this.options.mutationFn(variables):Promise.reject(new Error("No mutationFn found")),onFail:(failureCount,error)=>{this.#dispatch({type:"failed",failureCount,error})},onPause:()=>{this.#dispatch({type:"pause"})},onContinue:()=>{this.#dispatch({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#mutationCache.canRun(this)});const restored=this.state.status==="pending",isPaused=!this.#retryer.canStart();try{if(!restored){this.#dispatch({type:"pending",variables,isPaused}),await this.#mutationCache.config.onMutate?.(variables,this);const context=await this.options.onMutate?.(variables);context!==this.state.context&&this.#dispatch({type:"pending",context,variables,isPaused})}const data=await this.#retryer.start();return await this.#mutationCache.config.onSuccess?.(data,variables,this.state.context,this),await this.options.onSuccess?.(data,variables,this.state.context),await this.#mutationCache.config.onSettled?.(data,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(data,null,variables,this.state.context),this.#dispatch({type:"success",data}),data}catch(error){try{throw await this.#mutationCache.config.onError?.(error,variables,this.state.context,this),await this.options.onError?.(error,variables,this.state.context),await this.#mutationCache.config.onSettled?.(void 0,error,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,error,variables,this.state.context),error}finally{this.#dispatch({type:"error",error})}}finally{this.#mutationCache.runNext(this)}}#dispatch(action){this.state=(state=>{switch(action.type){case"failed":return{...state,failureCount:action.failureCount,failureReason:action.error};case"pause":return{...state,isPaused:!0};case"continue":return{...state,isPaused:!1};case"pending":return{...state,context:action.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:action.isPaused,status:"pending",variables:action.variables,submittedAt:Date.now()};case"success":return{...state,data:action.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...state,data:void 0,error:action.error,failureCount:state.failureCount+1,failureReason:action.error,isPaused:!1,status:"error"}}})(this.state),notifyManager.notifyManager.batch(()=>{this.#observers.forEach(observer=>{observer.onMutationUpdate(action)}),this.#mutationCache.notify({mutation:this,type:"updated",action})})}},MutationCache=class extends subscribable.Subscribable{constructor(config={}){super(),this.config=config,this.#mutations=new Set,this.#scopes=new Map,this.#mutationId=0}#mutations;#scopes;#mutationId;build(client,options,state){const mutation=new Mutation({mutationCache:this,mutationId:++this.#mutationId,options:client.defaultMutationOptions(options),state});return this.add(mutation),mutation}add(mutation){this.#mutations.add(mutation);const scope=scopeFor(mutation);if(typeof scope=="string"){const scopedMutations=this.#scopes.get(scope);scopedMutations?scopedMutations.push(mutation):this.#scopes.set(scope,[mutation])}this.notify({type:"added",mutation})}remove(mutation){if(this.#mutations.delete(mutation)){const scope=scopeFor(mutation);if(typeof scope=="string"){const scopedMutations=this.#scopes.get(scope);if(scopedMutations)if(scopedMutations.length>1){const index=scopedMutations.indexOf(mutation);index!==-1&&scopedMutations.splice(index,1)}else scopedMutations[0]===mutation&&this.#scopes.delete(scope)}}this.notify({type:"removed",mutation})}canRun(mutation){const scope=scopeFor(mutation);if(typeof scope=="string"){const mutationsWithSameScope=this.#scopes.get(scope),firstPendingMutation=mutationsWithSameScope?.find(m=>m.state.status==="pending");return!firstPendingMutation||firstPendingMutation===mutation}return!0}runNext(mutation){const scope=scopeFor(mutation);return typeof scope=="string"?this.#scopes.get(scope)?.find(m=>m!==mutation&&m.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){notifyManager.notifyManager.batch(()=>{this.#mutations.forEach(mutation=>{this.notify({type:"removed",mutation})}),this.#mutations.clear(),this.#scopes.clear()})}getAll(){return Array.from(this.#mutations)}find(filters){const defaultedFilters={exact:!0,...filters};return this.getAll().find(mutation=>(0,utils.matchMutation)(defaultedFilters,mutation))}findAll(filters={}){return this.getAll().filter(mutation=>(0,utils.matchMutation)(filters,mutation))}notify(event){notifyManager.notifyManager.batch(()=>{this.listeners.forEach(listener=>{listener(event)})})}resumePausedMutations(){const pausedMutations=this.getAll().filter(x=>x.state.isPaused);return notifyManager.notifyManager.batch(()=>Promise.all(pausedMutations.map(mutation=>mutation.continue().catch(utils.noop))))}};function scopeFor(mutation){return mutation.options.scope?.id}var focusManager=__webpack_require__("722d6f0f51848806a616"),onlineManager=__webpack_require__("cee7af7bac6e317df0e8");function infiniteQueryBehavior(pages){return{onFetch:(context,query)=>{const options=context.options,direction=context.fetchOptions?.meta?.fetchMore?.direction,oldPages=context.state.data?.pages||[],oldPageParams=context.state.data?.pageParams||[];let result={pages:[],pageParams:[]},currentPage=0;const fetchFn=async()=>{let cancelled=!1;const queryFn=(0,utils.ensureQueryFn)(context.options,context.fetchOptions),fetchPage=async(data,param,previous)=>{if(cancelled)return Promise.reject();if(param==null&&data.pages.length)return Promise.resolve(data);const queryFnContext={queryKey:context.queryKey,pageParam:param,direction:previous?"backward":"forward",meta:context.options.meta};var object;object=queryFnContext,Object.defineProperty(object,"signal",{enumerable:!0,get:()=>(context.signal.aborted?cancelled=!0:context.signal.addEventListener("abort",()=>{cancelled=!0}),context.signal)});const page=await queryFn(queryFnContext),{maxPages}=context.options,addTo=previous?utils.addToStart:utils.addToEnd;return{pages:addTo(data.pages,page,maxPages),pageParams:addTo(data.pageParams,param,maxPages)}};if(direction&&oldPages.length){const previous=direction==="backward",oldData={pages:oldPages,pageParams:oldPageParams},param=(previous?getPreviousPageParam:getNextPageParam)(options,oldData);result=await fetchPage(oldData,param,previous)}else{const remainingPages=pages??oldPages.length;do{const param=currentPage===0?oldPageParams[0]??options.initialPageParam:getNextPageParam(options,result);if(currentPage>0&&param==null)break;result=await fetchPage(result,param),currentPage++}while(currentPage<remainingPages)}return result};context.options.persister?context.fetchFn=()=>context.options.persister?.(fetchFn,{queryKey:context.queryKey,meta:context.options.meta,signal:context.signal},query):context.fetchFn=fetchFn}}}function getNextPageParam(options,{pages,pageParams}){const lastIndex=pages.length-1;return pages.length>0?options.getNextPageParam(pages[lastIndex],pages,pageParams[lastIndex],pageParams):void 0}function getPreviousPageParam(options,{pages,pageParams}){return pages.length>0?options.getPreviousPageParam?.(pages[0],pages,pageParams[0],pageParams):void 0}var QueryClient=class{#queryCache;#mutationCache;#defaultOptions;#queryDefaults;#mutationDefaults;#mountCount;#unsubscribeFocus;#unsubscribeOnline;constructor(config={}){this.#queryCache=config.queryCache||new QueryCache,this.#mutationCache=config.mutationCache||new MutationCache,this.#defaultOptions=config.defaultOptions||{},this.#queryDefaults=new Map,this.#mutationDefaults=new Map,this.#mountCount=0}mount(){this.#mountCount++,this.#mountCount===1&&(this.#unsubscribeFocus=focusManager.focusManager.subscribe(async focused=>{focused&&(await this.resumePausedMutations(),this.#queryCache.onFocus())}),this.#unsubscribeOnline=onlineManager.onlineManager.subscribe(async online=>{online&&(await this.resumePausedMutations(),this.#queryCache.onOnline())}))}unmount(){this.#mountCount--,this.#mountCount===0&&(this.#unsubscribeFocus?.(),this.#unsubscribeFocus=void 0,this.#unsubscribeOnline?.(),this.#unsubscribeOnline=void 0)}isFetching(filters){return this.#queryCache.findAll({...filters,fetchStatus:"fetching"}).length}isMutating(filters){return this.#mutationCache.findAll({...filters,status:"pending"}).length}getQueryData(queryKey){const options=this.defaultQueryOptions({queryKey});return this.#queryCache.get(options.queryHash)?.state.data}ensureQueryData(options){const defaultedOptions=this.defaultQueryOptions(options),query=this.#queryCache.build(this,defaultedOptions),cachedData=query.state.data;return cachedData===void 0?this.fetchQuery(options):(options.revalidateIfStale&&query.isStaleByTime((0,utils.resolveStaleTime)(defaultedOptions.staleTime,query))&&this.prefetchQuery(defaultedOptions),Promise.resolve(cachedData))}getQueriesData(filters){return this.#queryCache.findAll(filters).map(({queryKey,state})=>[queryKey,state.data])}setQueryData(queryKey,updater,options){const defaultedOptions=this.defaultQueryOptions({queryKey}),query=this.#queryCache.get(defaultedOptions.queryHash),prevData=query?.state.data,data=(0,utils.functionalUpdate)(updater,prevData);if(data!==void 0)return this.#queryCache.build(this,defaultedOptions).setData(data,{...options,manual:!0})}setQueriesData(filters,updater,options){return notifyManager.notifyManager.batch(()=>this.#queryCache.findAll(filters).map(({queryKey})=>[queryKey,this.setQueryData(queryKey,updater,options)]))}getQueryState(queryKey){const options=this.defaultQueryOptions({queryKey});return this.#queryCache.get(options.queryHash)?.state}removeQueries(filters){const queryCache=this.#queryCache;notifyManager.notifyManager.batch(()=>{queryCache.findAll(filters).forEach(query=>{queryCache.remove(query)})})}resetQueries(filters,options){const queryCache=this.#queryCache,refetchFilters={type:"active",...filters};return notifyManager.notifyManager.batch(()=>(queryCache.findAll(filters).forEach(query=>{query.reset()}),this.refetchQueries(refetchFilters,options)))}cancelQueries(filters,cancelOptions={}){const defaultedCancelOptions={revert:!0,...cancelOptions},promises=notifyManager.notifyManager.batch(()=>this.#queryCache.findAll(filters).map(query=>query.cancel(defaultedCancelOptions)));return Promise.all(promises).then(utils.noop).catch(utils.noop)}invalidateQueries(filters,options={}){return notifyManager.notifyManager.batch(()=>{if(this.#queryCache.findAll(filters).forEach(query=>{query.invalidate()}),filters?.refetchType==="none")return Promise.resolve();const refetchFilters={...filters,type:filters?.refetchType??filters?.type??"active"};return this.refetchQueries(refetchFilters,options)})}refetchQueries(filters,options={}){const fetchOptions={...options,cancelRefetch:options.cancelRefetch??!0},promises=notifyManager.notifyManager.batch(()=>this.#queryCache.findAll(filters).filter(query=>!query.isDisabled()).map(query=>{let promise=query.fetch(void 0,fetchOptions);return fetchOptions.throwOnError||(promise=promise.catch(utils.noop)),query.state.fetchStatus==="paused"?Promise.resolve():promise}));return Promise.all(promises).then(utils.noop)}fetchQuery(options){const defaultedOptions=this.defaultQueryOptions(options);defaultedOptions.retry===void 0&&(defaultedOptions.retry=!1);const query=this.#queryCache.build(this,defaultedOptions);return query.isStaleByTime((0,utils.resolveStaleTime)(defaultedOptions.staleTime,query))?query.fetch(defaultedOptions):Promise.resolve(query.state.data)}prefetchQuery(options){return this.fetchQuery(options).then(utils.noop).catch(utils.noop)}fetchInfiniteQuery(options){return options.behavior=infiniteQueryBehavior(options.pages),this.fetchQuery(options)}prefetchInfiniteQuery(options){return this.fetchInfiniteQuery(options).then(utils.noop).catch(utils.noop)}ensureInfiniteQueryData(options){return options.behavior=infiniteQueryBehavior(options.pages),this.ensureQueryData(options)}resumePausedMutations(){return onlineManager.onlineManager.isOnline()?this.#mutationCache.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#queryCache}getMutationCache(){return this.#mutationCache}getDefaultOptions(){return this.#defaultOptions}setDefaultOptions(options){this.#defaultOptions=options}setQueryDefaults(queryKey,options){this.#queryDefaults.set((0,utils.hashKey)(queryKey),{queryKey,defaultOptions:options})}getQueryDefaults(queryKey){const defaults=[...this.#queryDefaults.values()],result={};return defaults.forEach(queryDefault=>{(0,utils.partialMatchKey)(queryKey,queryDefault.queryKey)&&Object.assign(result,queryDefault.defaultOptions)}),result}setMutationDefaults(mutationKey,options){this.#mutationDefaults.set((0,utils.hashKey)(mutationKey),{mutationKey,defaultOptions:options})}getMutationDefaults(mutationKey){const defaults=[...this.#mutationDefaults.values()];let result={};return defaults.forEach(queryDefault=>{(0,utils.partialMatchKey)(mutationKey,queryDefault.mutationKey)&&(result={...result,...queryDefault.defaultOptions})}),result}defaultQueryOptions(options){if(options._defaulted)return options;const defaultedOptions={...this.#defaultOptions.queries,...this.getQueryDefaults(options.queryKey),...options,_defaulted:!0};return defaultedOptions.queryHash||(defaultedOptions.queryHash=(0,utils.hashQueryKeyByOptions)(defaultedOptions.queryKey,defaultedOptions)),defaultedOptions.refetchOnReconnect===void 0&&(defaultedOptions.refetchOnReconnect=defaultedOptions.networkMode!=="always"),defaultedOptions.throwOnError===void 0&&(defaultedOptions.throwOnError=!!defaultedOptions.suspense),!defaultedOptions.networkMode&&defaultedOptions.persister&&(defaultedOptions.networkMode="offlineFirst"),defaultedOptions.queryFn===utils.skipToken&&(defaultedOptions.enabled=!1),defaultedOptions}defaultMutationOptions(options){return options?._defaulted?options:{...this.#defaultOptions.mutations,...options?.mutationKey&&this.getMutationDefaults(options.mutationKey),...options,_defaulted:!0}}clear(){this.#queryCache.clear(),this.#mutationCache.clear()}}},"0dce9a3d0ca3fa0e7307":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{QueryObserver:()=>QueryObserver});var _focusManager_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("722d6f0f51848806a616"),_notifyManager_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("fa5c494e10f4d8f629a0"),_query_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("a2d23d64bc704f7389a1"),_subscribable_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b5ce34368ec17444eb14"),_thenable_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ef2353f1a8450488aa7d"),_utils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("49f8b71830711fdc9d35"),QueryObserver=class extends _subscribable_js__WEBPACK_IMPORTED_MODULE_0__.Subscribable{constructor(client,options){super(),this.options=options,this.#client=client,this.#selectError=null,this.#currentThenable=(0,_thenable_js__WEBPACK_IMPORTED_MODULE_1__.pendingThenable)(),this.options.experimental_prefetchInRender||this.#currentThenable.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(options)}#client;#currentQuery=void 0;#currentQueryInitialState=void 0;#currentResult=void 0;#currentResultState;#currentResultOptions;#currentThenable;#selectError;#selectFn;#selectResult;#lastQueryWithDefinedData;#staleTimeoutId;#refetchIntervalId;#currentRefetchInterval;#trackedProps=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#currentQuery.addObserver(this),shouldFetchOnMount(this.#currentQuery,this.options)?this.#executeFetch():this.updateResult(),this.#updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(this.#currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(this.#currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#clearStaleTimeout(),this.#clearRefetchInterval(),this.#currentQuery.removeObserver(this)}setOptions(options,notifyOptions){const prevOptions=this.options,prevQuery=this.#currentQuery;if(this.options=this.#client.defaultQueryOptions(options),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.resolveEnabled)(this.options.enabled,this.#currentQuery)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#updateQuery(),this.#currentQuery.setOptions(this.options),prevOptions._defaulted&&!(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.shallowEqualObjects)(this.options,prevOptions)&&this.#client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#currentQuery,observer:this});const mounted=this.hasListeners();mounted&&shouldFetchOptionally(this.#currentQuery,prevQuery,this.options,prevOptions)&&this.#executeFetch(),this.updateResult(notifyOptions),!mounted||this.#currentQuery===prevQuery&&(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.resolveEnabled)(this.options.enabled,this.#currentQuery)===(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.resolveEnabled)(prevOptions.enabled,this.#currentQuery)&&(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.resolveStaleTime)(this.options.staleTime,this.#currentQuery)===(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.resolveStaleTime)(prevOptions.staleTime,this.#currentQuery)||this.#updateStaleTimeout();const nextRefetchInterval=this.#computeRefetchInterval();!mounted||this.#currentQuery===prevQuery&&(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.resolveEnabled)(this.options.enabled,this.#currentQuery)===(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.resolveEnabled)(prevOptions.enabled,this.#currentQuery)&&nextRefetchInterval===this.#currentRefetchInterval||this.#updateRefetchInterval(nextRefetchInterval)}getOptimisticResult(options){const query=this.#client.getQueryCache().build(this.#client,options),result=this.createResult(query,options);return function(observer,optimisticResult){return!(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.shallowEqualObjects)(observer.getCurrentResult(),optimisticResult)}(this,result)&&(this.#currentResult=result,this.#currentResultOptions=this.options,this.#currentResultState=this.#currentQuery.state),result}getCurrentResult(){return this.#currentResult}trackResult(result,onPropTracked){const trackedResult={};return Object.keys(result).forEach(key=>{Object.defineProperty(trackedResult,key,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(key),onPropTracked?.(key),result[key])})}),trackedResult}trackProp(key){this.#trackedProps.add(key)}getCurrentQuery(){return this.#currentQuery}refetch({...options}={}){return this.fetch({...options})}fetchOptimistic(options){const defaultedOptions=this.#client.defaultQueryOptions(options),query=this.#client.getQueryCache().build(this.#client,defaultedOptions);return query.fetch().then(()=>this.createResult(query,defaultedOptions))}fetch(fetchOptions){return this.#executeFetch({...fetchOptions,cancelRefetch:fetchOptions.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#currentResult))}#executeFetch(fetchOptions){this.#updateQuery();let promise=this.#currentQuery.fetch(this.options,fetchOptions);return fetchOptions?.throwOnError||(promise=promise.catch(_utils_js__WEBPACK_IMPORTED_MODULE_2__.noop)),promise}#updateStaleTimeout(){this.#clearStaleTimeout();const staleTime=(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.resolveStaleTime)(this.options.staleTime,this.#currentQuery);if(_utils_js__WEBPACK_IMPORTED_MODULE_2__.isServer||this.#currentResult.isStale||!(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isValidTimeout)(staleTime))return;const timeout=(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.timeUntilStale)(this.#currentResult.dataUpdatedAt,staleTime)+1;this.#staleTimeoutId=setTimeout(()=>{this.#currentResult.isStale||this.updateResult()},timeout)}#computeRefetchInterval(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#currentQuery):this.options.refetchInterval)??!1}#updateRefetchInterval(nextInterval){this.#clearRefetchInterval(),this.#currentRefetchInterval=nextInterval,!_utils_js__WEBPACK_IMPORTED_MODULE_2__.isServer&&(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.resolveEnabled)(this.options.enabled,this.#currentQuery)!==!1&&(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isValidTimeout)(this.#currentRefetchInterval)&&this.#currentRefetchInterval!==0&&(this.#refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||_focusManager_js__WEBPACK_IMPORTED_MODULE_3__.focusManager.isFocused())&&this.#executeFetch()},this.#currentRefetchInterval))}#updateTimers(){this.#updateStaleTimeout(),this.#updateRefetchInterval(this.#computeRefetchInterval())}#clearStaleTimeout(){this.#staleTimeoutId&&(clearTimeout(this.#staleTimeoutId),this.#staleTimeoutId=void 0)}#clearRefetchInterval(){this.#refetchIntervalId&&(clearInterval(this.#refetchIntervalId),this.#refetchIntervalId=void 0)}createResult(query,options){const prevQuery=this.#currentQuery,prevOptions=this.options,prevResult=this.#currentResult,prevResultState=this.#currentResultState,prevResultOptions=this.#currentResultOptions,queryInitialState=query!==prevQuery?query.state:this.#currentQueryInitialState,{state}=query;let data,newState={...state},isPlaceholderData=!1;if(options._optimisticResults){const mounted=this.hasListeners(),fetchOnMount=!mounted&&shouldFetchOnMount(query,options),fetchOptionally=mounted&&shouldFetchOptionally(query,prevQuery,options,prevOptions);(fetchOnMount||fetchOptionally)&&(newState={...newState,...(0,_query_js__WEBPACK_IMPORTED_MODULE_4__.fetchState)(state.data,query.options)}),options._optimisticResults==="isRestoring"&&(newState.fetchStatus="idle")}let{error,errorUpdatedAt,status}=newState;if(options.select&&newState.data!==void 0)if(prevResult&&newState.data===prevResultState?.data&&options.select===this.#selectFn)data=this.#selectResult;else try{this.#selectFn=options.select,data=options.select(newState.data),data=(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.replaceData)(prevResult?.data,data,options),this.#selectResult=data,this.#selectError=null}catch(selectError){this.#selectError=selectError}else data=newState.data;if(options.placeholderData!==void 0&&data===void 0&&status==="pending"){let placeholderData;if(prevResult?.isPlaceholderData&&options.placeholderData===prevResultOptions?.placeholderData)placeholderData=prevResult.data;else if(placeholderData=typeof options.placeholderData=="function"?options.placeholderData(this.#lastQueryWithDefinedData?.state.data,this.#lastQueryWithDefinedData):options.placeholderData,options.select&&placeholderData!==void 0)try{placeholderData=options.select(placeholderData),this.#selectError=null}catch(selectError){this.#selectError=selectError}placeholderData!==void 0&&(status="success",data=(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.replaceData)(prevResult?.data,placeholderData,options),isPlaceholderData=!0)}this.#selectError&&(error=this.#selectError,data=this.#selectResult,errorUpdatedAt=Date.now(),status="error");const isFetching=newState.fetchStatus==="fetching",isPending=status==="pending",isError=status==="error",isLoading=isPending&&isFetching,hasData=data!==void 0,nextResult={status,fetchStatus:newState.fetchStatus,isPending,isSuccess:status==="success",isError,isInitialLoading:isLoading,isLoading,data,dataUpdatedAt:newState.dataUpdatedAt,error,errorUpdatedAt,failureCount:newState.fetchFailureCount,failureReason:newState.fetchFailureReason,errorUpdateCount:newState.errorUpdateCount,isFetched:newState.dataUpdateCount>0||newState.errorUpdateCount>0,isFetchedAfterMount:newState.dataUpdateCount>queryInitialState.dataUpdateCount||newState.errorUpdateCount>queryInitialState.errorUpdateCount,isFetching,isRefetching:isFetching&&!isPending,isLoadingError:isError&&!hasData,isPaused:newState.fetchStatus==="paused",isPlaceholderData,isRefetchError:isError&&hasData,isStale:isStale(query,options),refetch:this.refetch,promise:this.#currentThenable};if(this.options.experimental_prefetchInRender){const finalizeThenableIfPossible=thenable=>{nextResult.status==="error"?thenable.reject(nextResult.error):nextResult.data!==void 0&&thenable.resolve(nextResult.data)},recreateThenable=()=>{const pending=this.#currentThenable=nextResult.promise=(0,_thenable_js__WEBPACK_IMPORTED_MODULE_1__.pendingThenable)();finalizeThenableIfPossible(pending)},prevThenable=this.#currentThenable;switch(prevThenable.status){case"pending":query.queryHash===prevQuery.queryHash&&finalizeThenableIfPossible(prevThenable);break;case"fulfilled":nextResult.status!=="error"&&nextResult.data===prevThenable.value||recreateThenable();break;case"rejected":nextResult.status==="error"&&nextResult.error===prevThenable.reason||recreateThenable()}}return nextResult}updateResult(notifyOptions){const prevResult=this.#currentResult,nextResult=this.createResult(this.#currentQuery,this.options);if(this.#currentResultState=this.#currentQuery.state,this.#currentResultOptions=this.options,this.#currentResultState.data!==void 0&&(this.#lastQueryWithDefinedData=this.#currentQuery),(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.shallowEqualObjects)(nextResult,prevResult))return;this.#currentResult=nextResult;const defaultNotifyOptions={};notifyOptions?.listeners!==!1&&(()=>{if(!prevResult)return!0;const{notifyOnChangeProps}=this.options,notifyOnChangePropsValue=typeof notifyOnChangeProps=="function"?notifyOnChangeProps():notifyOnChangeProps;if(notifyOnChangePropsValue==="all"||!notifyOnChangePropsValue&&!this.#trackedProps.size)return!0;const includedProps=new Set(notifyOnChangePropsValue??this.#trackedProps);return this.options.throwOnError&&includedProps.add("error"),Object.keys(this.#currentResult).some(key=>{const typedKey=key;return this.#currentResult[typedKey]!==prevResult[typedKey]&&includedProps.has(typedKey)})})()&&(defaultNotifyOptions.listeners=!0),this.#notify({...defaultNotifyOptions,...notifyOptions})}#updateQuery(){const query=this.#client.getQueryCache().build(this.#client,this.options);if(query===this.#currentQuery)return;const prevQuery=this.#currentQuery;this.#currentQuery=query,this.#currentQueryInitialState=query.state,this.hasListeners()&&(prevQuery?.removeObserver(this),query.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#updateTimers()}#notify(notifyOptions){_notifyManager_js__WEBPACK_IMPORTED_MODULE_5__.notifyManager.batch(()=>{notifyOptions.listeners&&this.listeners.forEach(listener=>{listener(this.#currentResult)}),this.#client.getQueryCache().notify({query:this.#currentQuery,type:"observerResultsUpdated"})})}};function shouldFetchOnMount(query,options){return function(query2,options2){return(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.resolveEnabled)(options2.enabled,query2)!==!1&&query2.state.data===void 0&&!(query2.state.status==="error"&&options2.retryOnMount===!1)}(query,options)||query.state.data!==void 0&&shouldFetchOn(query,options,options.refetchOnMount)}function shouldFetchOn(query,options,field){if((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.resolveEnabled)(options.enabled,query)!==!1){const value=typeof field=="function"?field(query):field;return value==="always"||value!==!1&&isStale(query,options)}return!1}function shouldFetchOptionally(query,prevQuery,options,prevOptions){return(query!==prevQuery||(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.resolveEnabled)(prevOptions.enabled,query)===!1)&&(!options.suspense||query.state.status!=="error")&&isStale(query,options)}function isStale(query,options){return(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.resolveEnabled)(options.enabled,query)!==!1&&query.isStaleByTime((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.resolveStaleTime)(options.staleTime,query))}},b4c1d8d9c0d604d5cc67:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Removable:()=>Removable});var _utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("49f8b71830711fdc9d35"),Removable=class{#gcTimeout;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.isValidTimeout)(this.gcTime)&&(this.#gcTimeout=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(newGcTime){this.gcTime=Math.max(this.gcTime||0,newGcTime??(_utils_js__WEBPACK_IMPORTED_MODULE_0__.isServer?1/0:3e5))}clearGcTimeout(){this.#gcTimeout&&(clearTimeout(this.#gcTimeout),this.#gcTimeout=void 0)}}},"82f92ddd87e757d19241":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{canFetch:()=>canFetch,createRetryer:()=>createRetryer,isCancelledError:()=>isCancelledError});var _focusManager_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("722d6f0f51848806a616"),_onlineManager_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("cee7af7bac6e317df0e8"),_thenable_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ef2353f1a8450488aa7d"),_utils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("49f8b71830711fdc9d35");function defaultRetryDelay(failureCount){return Math.min(1e3*2**failureCount,3e4)}function canFetch(networkMode){return(networkMode??"online")!=="online"||_onlineManager_js__WEBPACK_IMPORTED_MODULE_0__.onlineManager.isOnline()}var CancelledError=class extends Error{constructor(options){super("CancelledError"),this.revert=options?.revert,this.silent=options?.silent}};function isCancelledError(value){return value instanceof CancelledError}function createRetryer(config){let continueFn,isRetryCancelled=!1,failureCount=0,isResolved=!1;const thenable=(0,_thenable_js__WEBPACK_IMPORTED_MODULE_1__.pendingThenable)(),canContinue=()=>_focusManager_js__WEBPACK_IMPORTED_MODULE_2__.focusManager.isFocused()&&(config.networkMode==="always"||_onlineManager_js__WEBPACK_IMPORTED_MODULE_0__.onlineManager.isOnline())&&config.canRun(),canStart=()=>canFetch(config.networkMode)&&config.canRun(),resolve=value=>{isResolved||(isResolved=!0,config.onSuccess?.(value),continueFn?.(),thenable.resolve(value))},reject=value=>{isResolved||(isResolved=!0,config.onError?.(value),continueFn?.(),thenable.reject(value))},pause=()=>new Promise(continueResolve=>{continueFn=value=>{(isResolved||canContinue())&&continueResolve(value)},config.onPause?.()}).then(()=>{continueFn=void 0,isResolved||config.onContinue?.()}),run=()=>{if(isResolved)return;let promiseOrValue;const initialPromise=failureCount===0?config.initialPromise:void 0;try{promiseOrValue=initialPromise??config.fn()}catch(error){promiseOrValue=Promise.reject(error)}Promise.resolve(promiseOrValue).then(resolve).catch(error=>{if(isResolved)return;const retry=config.retry??(_utils_js__WEBPACK_IMPORTED_MODULE_3__.isServer?0:3),retryDelay=config.retryDelay??defaultRetryDelay,delay=typeof retryDelay=="function"?retryDelay(failureCount,error):retryDelay,shouldRetry=retry===!0||typeof retry=="number"&&failureCount<retry||typeof retry=="function"&&retry(failureCount,error);!isRetryCancelled&&shouldRetry?(failureCount++,config.onFail?.(failureCount,error),(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.sleep)(delay).then(()=>canContinue()?void 0:pause()).then(()=>{isRetryCancelled?reject(error):run()})):reject(error)})};return{promise:thenable,cancel:cancelOptions=>{isResolved||(reject(new CancelledError(cancelOptions)),config.abort?.())},continue:()=>(continueFn?.(),thenable),cancelRetry:()=>{isRetryCancelled=!0},continueRetry:()=>{isRetryCancelled=!1},canStart,start:()=>(canStart()?run():pause().then(run),thenable)}}},b5ce34368ec17444eb14:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Subscribable:()=>Subscribable});var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(listener){return this.listeners.add(listener),this.onSubscribe(),()=>{this.listeners.delete(listener),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}},ef2353f1a8450488aa7d:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{function pendingThenable(){let resolve,reject;const thenable=new Promise((_resolve,_reject)=>{resolve=_resolve,reject=_reject});function finalize(data){Object.assign(thenable,data),delete thenable.resolve,delete thenable.reject}return thenable.status="pending",thenable.catch(()=>{}),thenable.resolve=value=>{finalize({status:"fulfilled",value}),resolve(value)},thenable.reject=reason=>{finalize({status:"rejected",reason}),reject(reason)},thenable}__webpack_require__.d(__webpack_exports__,{pendingThenable:()=>pendingThenable})},"49f8b71830711fdc9d35":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{addToEnd:()=>addToEnd,addToStart:()=>addToStart,ensureQueryFn:()=>ensureQueryFn,functionalUpdate:()=>functionalUpdate,hashKey:()=>hashKey,hashQueryKeyByOptions:()=>hashQueryKeyByOptions,isServer:()=>isServer,isValidTimeout:()=>isValidTimeout,matchMutation:()=>matchMutation,matchQuery:()=>matchQuery,noop:()=>noop,partialMatchKey:()=>partialMatchKey,replaceData:()=>replaceData,resolveEnabled:()=>resolveEnabled,resolveStaleTime:()=>resolveStaleTime,shallowEqualObjects:()=>shallowEqualObjects,skipToken:()=>skipToken,sleep:()=>sleep,timeUntilStale:()=>timeUntilStale});var isServer=typeof window>"u"||"Deno"in globalThis;function noop(){}function functionalUpdate(updater,input){return typeof updater=="function"?updater(input):updater}function isValidTimeout(value){return typeof value=="number"&&value>=0&&value!==1/0}function timeUntilStale(updatedAt,staleTime){return Math.max(updatedAt+(staleTime||0)-Date.now(),0)}function resolveStaleTime(staleTime,query){return typeof staleTime=="function"?staleTime(query):staleTime}function resolveEnabled(enabled,query){return typeof enabled=="function"?enabled(query):enabled}function matchQuery(filters,query){const{type="all",exact,fetchStatus,predicate,queryKey,stale}=filters;if(queryKey){if(exact){if(query.queryHash!==hashQueryKeyByOptions(queryKey,query.options))return!1}else if(!partialMatchKey(query.queryKey,queryKey))return!1}if(type!=="all"){const isActive=query.isActive();if(type==="active"&&!isActive||type==="inactive"&&isActive)return!1}return!(typeof stale=="boolean"&&query.isStale()!==stale||fetchStatus&&fetchStatus!==query.state.fetchStatus||predicate&&!predicate(query))}function matchMutation(filters,mutation){const{exact,status,predicate,mutationKey}=filters;if(mutationKey){if(!mutation.options.mutationKey)return!1;if(exact){if(hashKey(mutation.options.mutationKey)!==hashKey(mutationKey))return!1}else if(!partialMatchKey(mutation.options.mutationKey,mutationKey))return!1}return!(status&&mutation.state.status!==status||predicate&&!predicate(mutation))}function hashQueryKeyByOptions(queryKey,options){return(options?.queryKeyHashFn||hashKey)(queryKey)}function hashKey(queryKey){return JSON.stringify(queryKey,(_,val)=>isPlainObject(val)?Object.keys(val).sort().reduce((result,key)=>(result[key]=val[key],result),{}):val)}function partialMatchKey(a,b){return a===b||typeof a==typeof b&&!(!a||!b||typeof a!="object"||typeof b!="object")&&!Object.keys(b).some(key=>!partialMatchKey(a[key],b[key]))}function replaceEqualDeep(a,b){if(a===b)return a;const array=isPlainArray(a)&&isPlainArray(b);if(array||isPlainObject(a)&&isPlainObject(b)){const aItems=array?a:Object.keys(a),aSize=aItems.length,bItems=array?b:Object.keys(b),bSize=bItems.length,copy=array?[]:{};let equalItems=0;for(let i=0;i<bSize;i++){const key=array?i:bItems[i];(!array&&aItems.includes(key)||array)&&a[key]===void 0&&b[key]===void 0?(copy[key]=void 0,equalItems++):(copy[key]=replaceEqualDeep(a[key],b[key]),copy[key]===a[key]&&a[key]!==void 0&&equalItems++)}return aSize===bSize&&equalItems===aSize?a:copy}return b}function shallowEqualObjects(a,b){if(!b||Object.keys(a).length!==Object.keys(b).length)return!1;for(const key in a)if(a[key]!==b[key])return!1;return!0}function isPlainArray(value){return Array.isArray(value)&&value.length===Object.keys(value).length}function isPlainObject(o){if(!hasObjectPrototype(o))return!1;const ctor=o.constructor;if(ctor===void 0)return!0;const prot=ctor.prototype;return!!hasObjectPrototype(prot)&&!!prot.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(o)===Object.prototype}function hasObjectPrototype(o){return Object.prototype.toString.call(o)==="[object Object]"}function sleep(timeout){return new Promise(resolve=>{setTimeout(resolve,timeout)})}function replaceData(prevData,data,options){return typeof options.structuralSharing=="function"?options.structuralSharing(prevData,data):options.structuralSharing!==!1?replaceEqualDeep(prevData,data):data}function addToEnd(items,item,max=0){const newItems=[...items,item];return max&&newItems.length>max?newItems.slice(1):newItems}function addToStart(items,item,max=0){const newItems=[item,...items];return max&&newItems.length>max?newItems.slice(0,-1):newItems}var skipToken=Symbol();function ensureQueryFn(options,fetchOptions){return!options.queryFn&&fetchOptions?.initialPromise?()=>fetchOptions.initialPromise:options.queryFn&&options.queryFn!==skipToken?options.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${options.queryHash}'`))}}}]);
//# sourceMappingURL=/cdn/shop/t/1074/assets/shared-react-query.js.map?v=85938371290931090431761066870
